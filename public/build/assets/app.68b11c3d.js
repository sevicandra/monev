var U0="2.1.5";const an="[data-trix-attachment]",ia={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},_t={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(s){return Ql(s.parentNode)===_t[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(s){return Ql(s.parentNode)===_t[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},Ql=s=>{var t;return s==null||(t=s.tagName)===null||t===void 0?void 0:t.toLowerCase()},tc=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),cs=tc&&parseInt(tc[1]);var Si={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:cs&&cs>12,samsungAndroid:cs&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(s=>s in InputEvent.prototype)},M={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};const q0=[M.bytes,M.KB,M.MB,M.GB,M.TB,M.PB];var $c={prefix:"IEC",precision:2,formatter(s){switch(s){case 0:return"0 ".concat(M.bytes);case 1:return"1 ".concat(M.byte);default:let t;this.prefix==="SI"?t=1e3:this.prefix==="IEC"&&(t=1024);const n=Math.floor(Math.log(s)/Math.log(t)),r=(s/Math.pow(t,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(r," ").concat(q0[n])}}};const Or="\uFEFF",ze="\xA0",Gc=function(s){for(const t in s){const n=s[t];this[t]=n}return this},ra=document.documentElement,H0=ra.matches,it=function(s){let{onElement:t,matchingSelector:n,withCallback:r,inPhase:a,preventDefault:l,times:h}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const p=t||ra,A=n,R=a==="capturing",S=function(O){h!=null&&--h==0&&S.destroy();const L=Ve(O.target,{matchingSelector:A});L!=null&&(r==null||r.call(L,O,L),l&&O.preventDefault())};return S.destroy=()=>p.removeEventListener(s,S,R),p.addEventListener(s,S,R),S},bi=function(s){let{onElement:t,bubbles:n,cancelable:r,attributes:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=t!=null?t:ra;n=n!==!1,r=r!==!1;const h=document.createEvent("Events");return h.initEvent(s,n,r),a!=null&&Gc.call(h,a),l.dispatchEvent(h)},Xc=function(s,t){if((s==null?void 0:s.nodeType)===1)return H0.call(s,t)},Ve=function(s){let{matchingSelector:t,untilNode:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.parentNode;if(s!=null){if(t==null)return s;if(s.closest&&n==null)return s.closest(t);for(;s&&s!==n;){if(Xc(s,t))return s;s=s.parentNode}}},oa=s=>document.activeElement!==s&&sn(s,document.activeElement),sn=function(s,t){if(s&&t)for(;t;){if(t===s)return!0;t=t.parentNode}},hs=function(s){var t;if((t=s)===null||t===void 0||!t.parentNode)return;let n=0;for(s=s.previousSibling;s;)n++,s=s.previousSibling;return n},Ke=s=>{var t;return s==null||(t=s.parentNode)===null||t===void 0?void 0:t.removeChild(s)},Lr=function(s){let{onlyNodesOfType:t,usingFilter:n,expandEntityReferences:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(()=>{switch(t){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(s,a,n!=null?n:null,r===!0)},Lt=s=>{var t;return s==null||(t=s.tagName)===null||t===void 0?void 0:t.toLowerCase()},j=function(s){let t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof s=="object"?(r=s,s=r.tagName):r={attributes:r};const a=document.createElement(s);if(r.editable!=null&&(r.attributes==null&&(r.attributes={}),r.attributes.contenteditable=r.editable),r.attributes)for(t in r.attributes)n=r.attributes[t],a.setAttribute(t,n);if(r.style)for(t in r.style)n=r.style[t],a.style[t]=n;if(r.data)for(t in r.data)n=r.data[t],a.dataset[t]=n;return r.className&&r.className.split(" ").forEach(l=>{a.classList.add(l)}),r.textContent&&(a.textContent=r.textContent),r.childNodes&&[].concat(r.childNodes).forEach(l=>{a.appendChild(l)}),a};let gi;const Ai=function(){if(gi!=null)return gi;gi=[];for(const s in _t){const t=_t[s];t.tagName&&gi.push(t.tagName)}return gi},ds=s=>Fn(s==null?void 0:s.firstChild),ec=function(s){let{strict:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return t?Fn(s):Fn(s)||!Fn(s.firstChild)&&function(n){return Ai().includes(Lt(n))&&!Ai().includes(Lt(n.firstChild))}(s)},Fn=s=>j0(s)&&(s==null?void 0:s.data)==="block",j0=s=>(s==null?void 0:s.nodeType)===Node.COMMENT_NODE,Nn=function(s){let{name:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s)return xi(s)?s.data===Or?!t||s.parentNode.dataset.trixCursorTarget===t:void 0:Nn(s.firstChild)},un=s=>Xc(s,an),Yc=s=>xi(s)&&(s==null?void 0:s.data)==="",xi=s=>(s==null?void 0:s.nodeType)===Node.TEXT_NODE,sa={level2Enabled:!0,getLevel(){return this.level2Enabled&&Si.supportsInputEvents?2:0},pickFiles(s){const t=j("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});t.addEventListener("change",()=>{s(t.files),Ke(t)}),Ke(document.getElementById(this.fileInputId)),document.body.appendChild(t),t.click()}};var Er={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},ln={bold:{tagName:"strong",inheritable:!0,parser(s){const t=window.getComputedStyle(s);return t.fontWeight==="bold"||t.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:s=>window.getComputedStyle(s).fontStyle==="italic"},href:{groupTagName:"a",parser(s){const t="a:not(".concat(an,")"),n=s.closest(t);if(n)return n.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},Zc={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(M.bold,'" tabindex="-1">').concat(M.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(M.italic,'" tabindex="-1">').concat(M.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(M.strike,'" tabindex="-1">').concat(M.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(M.link,'" tabindex="-1">').concat(M.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(M.heading1,'" tabindex="-1">').concat(M.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(M.quote,'" tabindex="-1">').concat(M.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(M.code,'" tabindex="-1">').concat(M.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(M.bullets,'" tabindex="-1">').concat(M.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(M.numbers,'" tabindex="-1">').concat(M.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(M.outdent,'" tabindex="-1">').concat(M.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(M.indent,'" tabindex="-1">').concat(M.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(M.attachFiles,'" tabindex="-1">').concat(M.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(M.undo,'" tabindex="-1">').concat(M.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(M.redo,'" tabindex="-1">').concat(M.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(M.urlPlaceholder,'" aria-label="').concat(M.url,`" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(M.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(M.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)};const js={interval:5e3};var Li=Object.freeze({__proto__:null,attachments:ia,blockAttributes:_t,browser:Si,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},fileSize:$c,input:sa,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:M,parser:Er,textAttributes:ln,toolbar:Zc,undo:js});class dt{static proxyMethod(t){const{name:n,toMethod:r,toProperty:a,optional:l}=z0(t);this.prototype[n]=function(){let h,p;var A,R;return r?p=l?(A=this[r])===null||A===void 0?void 0:A.call(this):this[r]():a&&(p=this[a]),l?(h=(R=p)===null||R===void 0?void 0:R[n],h?nc.call(h,p,arguments):void 0):(h=p[n],nc.call(h,p,arguments))}}}const z0=function(s){const t=s.match(V0);if(!t)throw new Error("can't parse @proxyMethod expression: ".concat(s));const n={name:t[4]};return t[2]!=null?n.toMethod=t[1]:n.toProperty=t[1],t[3]!=null&&(n.optional=!0),n},{apply:nc}=Function.prototype,V0=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$");var fs,gs,ps;class Ri extends dt{static box(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(t==null?void 0:t.toString())}static fromUCS2String(t){return new this(t,zs(t))}static fromCodepoints(t){return new this(Vs(t),t)}constructor(t,n){super(...arguments),this.ucs2String=t,this.codepoints=n,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return Vs(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return zs(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}}const K0=((fs=Array.from)===null||fs===void 0?void 0:fs.call(Array,"\u{1F47C}").length)===1,J0=((gs=" ".codePointAt)===null||gs===void 0?void 0:gs.call(" ",0))!=null,$0=((ps=String.fromCodePoint)===null||ps===void 0?void 0:ps.call(String,32,128124))===" \u{1F47C}";let zs,Vs;zs=K0&&J0?s=>Array.from(s).map(t=>t.codePointAt(0)):function(s){const t=[];let n=0;const{length:r}=s;for(;n<r;){let a=s.charCodeAt(n++);if(55296<=a&&a<=56319&&n<r){const l=s.charCodeAt(n++);(64512&l)==56320?a=((1023&a)<<10)+(1023&l)+65536:n--}t.push(a)}return t},Vs=$0?s=>String.fromCodePoint(...Array.from(s||[])):function(s){return(()=>{const t=[];return Array.from(s).forEach(n=>{let r="";n>65535&&(n-=65536,r+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),t.push(r+String.fromCharCode(n))}),t})().join("")};let G0=0;class dn extends dt{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++G0}hasSameConstructorAs(t){return this.constructor===(t==null?void 0:t.constructor)}isEqualTo(t){return this===t}inspect(){const t=[],n=this.contentsForInspection()||{};for(const r in n){const a=n[r];t.push("".concat(r,"=").concat(a))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Ri.box(this)}getCacheKey(){return this.id.toString()}}const cn=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s.length!==t.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==t[n])return!1;return!0},aa=function(s){const t=s.slice(0);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.splice(...r),t},X0=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,Y0=function(){const s=j("input",{dir:"auto",name:"x",dirName:"x.dir"}),t=j("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),n=j("form");n.appendChild(s),n.appendChild(t);const r=function(){try{return new FormData(n).has(t.dirName)}catch{return!1}}(),a=function(){try{return s.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return r?function(l){return t.value=l,new FormData(n).get(t.dirName)}:a?function(l){return s.value=l,s.matches(":dir(rtl)")?"rtl":"ltr"}:function(l){const h=l.trim().charAt(0);return X0.test(h)?"rtl":"ltr"}}();let ms=null,vs=null,bs=null,Cr=null;const Ks=()=>(ms||(ms=Q0().concat(Z0())),ms),ht=s=>_t[s],Z0=()=>(vs||(vs=Object.keys(_t)),vs),Js=s=>ln[s],Q0=()=>(bs||(bs=Object.keys(ln)),bs),Qc=function(s,t){tA(s).textContent=t.replace(/%t/g,s)},tA=function(s){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-tag-name",s.toLowerCase());const n=eA();return n&&t.setAttribute("nonce",n),document.head.insertBefore(t,document.head.firstChild),t},eA=function(){const s=ic("trix-csp-nonce")||ic("csp-nonce");if(s)return s.getAttribute("content")},ic=s=>document.head.querySelector("meta[name=".concat(s,"]")),rc={"application/x-trix-feature-detection":"test"},th=function(s){const t=s.getData("text/plain"),n=s.getData("text/html");if(!t||!n)return t==null?void 0:t.length;{const{body:r}=new DOMParser().parseFromString(n,"text/html");if(r.textContent===t)return!r.querySelector("*")}},eh=/Mac|^iP/.test(navigator.platform)?s=>s.metaKey:s=>s.ctrlKey,ua=s=>setTimeout(s,1),nh=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={};for(const n in s){const r=s[n];t[n]=r}return t},qn=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const n in s)if(s[n]!==t[n])return!1;return!0},X=function(s){if(s!=null)return Array.isArray(s)||(s=[s,s]),[oc(s[0]),oc(s[1]!=null?s[1]:s[0])]},_e=function(s){if(s==null)return;const[t,n]=X(s);return $s(t,n)},_r=function(s,t){if(s==null||t==null)return;const[n,r]=X(s),[a,l]=X(t);return $s(n,a)&&$s(r,l)},oc=function(s){return typeof s=="number"?s:nh(s)},$s=function(s,t){return typeof s=="number"?s===t:qn(s,t)};class ih extends dt{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(n=>n!==t),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}}const hn=new ih,rh=function(){const s=window.getSelection();if(s.rangeCount>0)return s},yi=function(){var s;const t=(s=rh())===null||s===void 0?void 0:s.getRangeAt(0);if(t&&!nA(t))return t},oh=function(s){const t=window.getSelection();return t.removeAllRanges(),t.addRange(s),hn.update()},nA=s=>sc(s.startContainer)||sc(s.endContainer),sc=s=>!Object.getPrototypeOf(s),vi=s=>s.replace(new RegExp("".concat(Or),"g"),"").replace(new RegExp("".concat(ze),"g")," "),la=new RegExp("[^\\S".concat(ze,"]")),ca=s=>s.replace(new RegExp("".concat(la.source),"g")," ").replace(/\ {2,}/g," "),ac=function(s,t){if(s.isEqualTo(t))return["",""];const n=As(s,t),{length:r}=n.utf16String;let a;if(r){const{offset:l}=n,h=s.codepoints.slice(0,l).concat(s.codepoints.slice(l+r));a=As(t,Ri.fromCodepoints(h))}else a=As(t,s);return[n.utf16String.toString(),a.utf16String.toString()]},As=function(s,t){let n=0,r=s.length,a=t.length;for(;n<r&&s.charAt(n).isEqualTo(t.charAt(n));)n++;for(;r>n+1&&s.charAt(r-1).isEqualTo(t.charAt(a-1));)r--,a--;return{utf16String:s.slice(n,r),offset:n}};class jt extends dn{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!t.length)return new this;let n=pi(t[0]),r=n.getKeys();return t.slice(1).forEach(a=>{r=n.getKeysCommonToHash(pi(a)),n=n.slice(r)}),n}static box(t){return pi(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=Rr(t)}add(t,n){return this.merge(iA(t,n))}remove(t){return new jt(Rr(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new jt(rA(this.values,oA(t)))}slice(t){const n={};return Array.from(t).forEach(r=>{this.has(r)&&(n[r]=this.values[r])}),new jt(n)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=pi(t),this.getKeys().filter(n=>this.values[n]===t.values[n])}isEqualTo(t){return cn(this.toArray(),pi(t).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){const t=[];for(const n in this.values){const r=this.values[n];t.push(t.push(n,r))}this.array=t.slice(0)}return this.array}toObject(){return Rr(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}}const iA=function(s,t){const n={};return n[s]=t,n},rA=function(s,t){const n=Rr(s);for(const r in t){const a=t[r];n[r]=a}return n},Rr=function(s,t){const n={};return Object.keys(s).sort().forEach(r=>{r!==t&&(n[r]=s[r])}),n},pi=function(s){return s instanceof jt?s:new jt(s)},oA=function(s){return s instanceof jt?s.values:s};class ha{static groupObjects(){let t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:r,asTree:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a&&r==null&&(r=0);const l=[];return Array.from(n).forEach(h=>{var p;if(t){var A,R,S;if((A=h.canBeGrouped)!==null&&A!==void 0&&A.call(h,r)&&(R=(S=t[t.length-1]).canBeGroupedWith)!==null&&R!==void 0&&R.call(S,h,r))return void t.push(h);l.push(new this(t,{depth:r,asTree:a})),t=null}(p=h.canBeGrouped)!==null&&p!==void 0&&p.call(h,r)?t=[h]:l.push(h)}),t&&l.push(new this(t,{depth:r,asTree:a})),l}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:n,asTree:r}=arguments.length>1?arguments[1]:void 0;this.objects=t,r&&(this.depth=n,this.objects=this.constructor.groupObjects(this.objects,{asTree:r,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){const t=["objectGroup"];return Array.from(this.getObjects()).forEach(n=>{t.push(n.getCacheKey())}),t.join("/")}}class sA extends dt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(n=>{const r=JSON.stringify(n);this.objects[r]==null&&(this.objects[r]=n)})}find(t){const n=JSON.stringify(t);return this.objects[n]}}class aA{constructor(t){this.reset(t)}add(t){const n=uc(t);this.elements[n]=t}remove(t){const n=uc(t),r=this.elements[n];if(r)return delete this.elements[n],r}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(t).forEach(n=>{this.add(n)}),t}}const uc=s=>s.dataset.trixStoreKey;class Tr extends dt{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,n)=>(this.performing=!0,this.perform((r,a)=>{this.succeeded=r,this.performing=!1,this.performed=!0,this.succeeded?t(a):n(a)})))),this.promise}perform(t){return t(!1)}release(){var t,n;(t=this.promise)===null||t===void 0||(n=t.cancel)===null||n===void 0||n.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}}Tr.proxyMethod("getPromise().then"),Tr.proxyMethod("getPromise().catch");class fn extends dt{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=t,this.options=n,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],(t=this.parentView)===null||t===void 0?void 0:t.invalidate()}invalidateViewForObject(t){var n;return(n=this.findViewForObject(t))===null||n===void 0?void 0:n.invalidate()}findOrCreateCachedChildView(t,n,r){let a=this.getCachedViewForObject(n);return a?this.recordChildView(a):(a=this.createChildView(...arguments),this.cacheViewForObject(a,n)),a}createChildView(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n instanceof ha&&(r.viewClass=t,t=uA);const a=new t(n,r);return this.recordChildView(a)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(n=>{t.push(n),t=t.concat(n.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){const n=t==null?void 0:t.id;if(n)return this.rootView.element.querySelector("[data-trix-id='".concat(n,"']"))}findViewForObject(t){for(const n of this.getAllChildViews())if(n.object===t)return n}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var n;return(n=this.getViewCache())===null||n===void 0?void 0:n[t.getCacheKey()]}cacheViewForObject(t,n){const r=this.getViewCache();r&&(r[n.getCacheKey()]=t)}garbageCollectCachedViews(){const t=this.getViewCache();if(t){const n=this.getAllChildViews().concat(this).map(r=>r.object.getCacheKey());for(const r in t)n.includes(r)||delete t[r]}}}class uA extends fn{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){const t=this.createContainerElement();return this.getChildViews().forEach(n=>{Array.from(n.getNodes()).forEach(r=>{t.appendChild(r)})}),[t]}createContainerElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}}const lA="style href src width height language class".split(" "),cA="javascript:".split(" "),hA="script iframe form noscript".split(" ");class Ir extends dt{static setHTML(t,n){const r=new this(n).sanitize(),a=r.getHTML?r.getHTML():r.outerHTML;t.innerHTML=a}static sanitize(t,n){const r=new this(t,n);return r.sanitize(),r}constructor(t){let{allowedAttributes:n,forbiddenProtocols:r,forbiddenElements:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=n||lA,this.forbiddenProtocols=r||cA,this.forbiddenElements=a||hA,this.body=dA(t)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting()}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){const t=Lr(this.body),n=[];for(;t.nextNode();){const r=t.currentNode;switch(r.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(r)?n.push(r):this.sanitizeElement(r);break;case Node.COMMENT_NODE:n.push(r)}}return n.forEach(r=>Ke(r)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(n=>{let{name:r}=n;this.allowedAttributes.includes(r)||r.indexOf("data-trix")===0||t.removeAttribute(r)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{const n=t.previousElementSibling;n&&Lt(n)==="li"&&n.appendChild(t)}),this.body}elementIsRemovable(t){if((t==null?void 0:t.nodeType)===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(Lt(t))}elementIsntSerializable(t){return t.getAttribute("data-trix-serialize")==="false"&&!un(t)}}const dA=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";s=s.replace(/<\/html[^>]*>[^]*$/i,"</html>");const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=s,Array.from(t.head.querySelectorAll("style")).forEach(n=>{t.body.appendChild(n)}),t.body},{css:Ue}=Li;class da extends fn{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t;const n=t=j({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),r=this.getHref();return r&&(t=j({tagName:"a",editable:!1,attributes:{href:r,tabindex:-1}}),n.appendChild(t)),this.attachment.hasContent()?Ir.setHTML(t,this.attachment.getContent()):this.createContentNodes().forEach(a=>{t.appendChild(a)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=j({tagName:"progress",attributes:{class:Ue.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),n.appendChild(this.progressElement)),[lc("left"),n,lc("right")]}createCaptionElement(){const t=j({tagName:"figcaption",className:Ue.attachmentCaption}),n=this.attachmentPiece.getCaption();if(n)t.classList.add("".concat(Ue.attachmentCaption,"--edited")),t.textContent=n;else{let r,a;const l=this.getCaptionConfig();if(l.name&&(r=this.attachment.getFilename()),l.size&&(a=this.attachment.getFormattedFilesize()),r){const h=j({tagName:"span",className:Ue.attachmentName,textContent:r});t.appendChild(h)}if(a){r&&t.appendChild(document.createTextNode(" "));const h=j({tagName:"span",className:Ue.attachmentSize,textContent:a});t.appendChild(h)}}return t}getClassName(){const t=[Ue.attachment,"".concat(Ue.attachment,"--").concat(this.attachment.getType())],n=this.attachment.getExtension();return n&&t.push("".concat(Ue.attachment,"--").concat(n)),t.join(" ")}getData(){const t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:n}=this.attachmentPiece;return n.isEmpty()||(t.trixAttributes=JSON.stringify(n)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!fA(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;const n=this.attachment.getType(),r=nh((t=ia[n])===null||t===void 0?void 0:t.caption);return n==="file"&&(r.name=!0),r}findProgressElement(){var t;return(t=this.findElement())===null||t===void 0?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){const t=this.attachment.getUploadProgress(),n=this.findProgressElement();n&&(n.value=t)}}const lc=s=>j({tagName:"span",textContent:Or,data:{trixCursorTarget:s,trixSerialize:!1}}),fA=function(s,t){const n=j("div");return Ir.setHTML(n,s||""),n.querySelector(t)};class sh extends da{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=j({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){const t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",M.captionPlaceholder),t}refresh(t){var n;if(t||(t=(n=this.findElement())===null||n===void 0?void 0:n.querySelector("img")),t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){const n=this.attachment.getURL(),r=this.attachment.getPreviewURL();if(t.src=r||n,r===n)t.removeAttribute("data-trix-serialized-attributes");else{const p=JSON.stringify({src:n});t.setAttribute("data-trix-serialized-attributes",p)}const a=this.attachment.getWidth(),l=this.attachment.getHeight();a!=null&&(t.width=a),l!=null&&(t.height=l);const h=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=h}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}}class ah extends fn{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes();const n=this.createElement();if(n){const r=function(a){for(;(l=a)!==null&&l!==void 0&&l.firstElementChild;){var l;a=a.firstElementChild}return a}(n);Array.from(t).forEach(a=>{r.appendChild(a)}),t=[n]}return t}createAttachmentNodes(){const t=this.attachment.isPreviewable()?sh:da;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if((t=this.textConfig)!==null&&t!==void 0&&t.plaintext)return[document.createTextNode(this.string)];{const n=[],r=this.string.split(`
`);for(let a=0;a<r.length;a++){const l=r[a];if(a>0){const h=j("br");n.push(h)}if(l.length){const h=document.createTextNode(this.preserveSpaces(l));n.push(h)}}return n}}createElement(){let t,n,r;const a={};for(n in this.attributes){r=this.attributes[n];const h=Js(n);if(h){if(h.tagName){var l;const p=j(h.tagName);l?(l.appendChild(p),l=p):t=l=p}if(h.styleProperty&&(a[h.styleProperty]=r),h.style)for(n in h.style)r=h.style[n],a[n]=r}}if(Object.keys(a).length)for(n in t||(t=j("span")),a)r=a[n],t.style[n]=r;return t}createContainerElement(){for(const t in this.attributes){const n=this.attributes[t],r=Js(t);if(r&&r.groupTagName){const a={};return a[t]=n,j(r.groupTagName,a)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,ze)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(ze," $2")).replace(/\ {2}/g,"".concat(ze," ")).replace(/\ {2}/g," ".concat(ze)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,ze)),t}}class uh extends fn{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){const t=[],n=ha.groupObjects(this.getPieces()),r=n.length-1;for(let l=0;l<n.length;l++){const h=n[l],p={};l===0&&(p.isFirst=!0),l===r&&(p.isLast=!0),gA(a)&&(p.followsWhitespace=!0);const A=this.findOrCreateCachedChildView(ah,h,{textConfig:this.textConfig,context:p});t.push(...Array.from(A.getNodes()||[]));var a=h}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}}const gA=s=>/\s$/.test(s==null?void 0:s.toString()),{css:cc}=Li;class lh extends fn{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){const t=[document.createComment("block")];if(this.block.isEmpty())t.push(j("br"));else{var n;const r=(n=ht(this.block.getLastAttribute()))===null||n===void 0?void 0:n.text,a=this.findOrCreateCachedChildView(uh,this.block.text,{textConfig:r});t.push(...Array.from(a.getNodes()||[])),this.shouldAddExtraNewlineElement()&&t.push(j("br"))}if(this.attributes.length)return t;{let r;const{tagName:a}=_t.default;this.block.isRTL()&&(r={dir:"rtl"});const l=j({tagName:a,attributes:r});return t.forEach(h=>l.appendChild(h)),[l]}}createContainerElement(t){const n={};let r;const a=this.attributes[t],{tagName:l,htmlAttributes:h=[]}=ht(a);if(t===0&&this.block.isRTL()&&Object.assign(n,{dir:"rtl"}),a==="attachmentGallery"){const p=this.block.getBlockBreakPosition();r="".concat(cc.attachmentGallery," ").concat(cc.attachmentGallery,"--").concat(p)}return Object.entries(this.block.htmlAttributes).forEach(p=>{let[A,R]=p;h.includes(A)&&(n[A]=R)}),j({tagName:l,className:r,attributes:n})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}}class Pr extends fn{static render(t){const n=j("div"),r=new this(t,{element:n});return r.render(),r.sync(),n}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new aA,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=j("div"),!this.document.isEmpty()){const t=ha.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(n=>{const r=this.findOrCreateCachedChildView(lh,n);Array.from(r.getNodes()).map(a=>this.shadowElement.appendChild(a))})}}isSynced(){return pA(this.shadowElement,this.element)}sync(){const t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(hc(this.element)),ua(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){const t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(n=>{t.appendChild(n.cloneNode(!0))}),Array.from(hc(t)).forEach(n=>{const r=this.elementStore.remove(n);r&&n.parentNode.replaceChild(r,n)}),t}}const hc=s=>s.querySelectorAll("[data-trix-store-key]"),pA=(s,t)=>dc(s.innerHTML)===dc(t.innerHTML),dc=s=>s.replace(/&nbsp;/g," ");function zt(s,t,n){return(t=mA(t))in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}function mA(s){var t=function(n,r){if(typeof n!="object"||n===null)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var l=a.call(n,r||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(s,"string");return typeof t=="symbol"?t:String(t)}class gn extends dn{static registerType(t,n){n.type=t,this.types[t]=n}static fromJSON(t){const n=this.types[t.type];if(n)return n.fromJSON(t)}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=jt.box(n)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}}zt(gn,"types",{});class ch extends Tr{constructor(t){super(...arguments),this.url=t}perform(t){const n=new Image;n.onload=()=>(n.width=this.width=n.naturalWidth,n.height=this.height=n.naturalHeight,t(!0,n)),n.onerror=()=>t(!1),n.src=this.url}}class Hn extends dn{static attachmentForFile(t){const n=new this(this.attributesForFile(t));return n.setFile(t),n}static attributesForFile(t){return new jt({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=jt.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.attributes.merge(t);var r,a,l,h;if(!this.attributes.isEqualTo(n))return this.attributes=n,this.didChangeAttributes(),(r=this.previewDelegate)===null||r===void 0||(a=r.attachmentDidChangeAttributes)===null||a===void 0||a.call(r,this),(l=this.delegate)===null||l===void 0||(h=l.attachmentDidChangeAttributes)===null||h===void 0?void 0:h.call(l,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):Hn.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){const t=this.attributes.get("filesize");return typeof t=="number"?$c.formatter(t):""}getExtension(){var t;return(t=this.getFilename().match(/\.(\w+)$/))===null||t===void 0?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(t){var n,r;if(this.uploadProgress!==t)return this.uploadProgress=t,(n=this.uploadProgressDelegate)===null||n===void 0||(r=n.attachmentDidChangeUploadProgress)===null||r===void 0?void 0:r.call(n,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){var n,r,a,l;if(t!==this.getPreviewURL())return this.previewURL=t,(n=this.previewDelegate)===null||n===void 0||(r=n.attachmentDidChangeAttributes)===null||r===void 0||r.call(n,this),(a=this.delegate)===null||a===void 0||(l=a.attachmentDidChangePreviewURL)===null||l===void 0?void 0:l.call(a,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,n){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new ch(t).then(r=>{let{width:a,height:l}=r;return this.getWidth()&&this.getHeight()||this.setAttributes({width:a,height:l}),this.preloadingURL=null,this.setPreviewURL(t),n==null?void 0:n()}).catch(()=>(this.preloadingURL=null,n==null?void 0:n()))}}zt(Hn,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);class Mn extends gn{static fromJSON(t){return new this(Hn.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice([t])),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){const t=this.attributes.slice(Mn.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var n;return super.isEqualTo(t)&&this.attachment.id===(t==null||(n=t.attachment)===null||n===void 0?void 0:n.id)}toString(){return"\uFFFC"}toJSON(){const t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}}zt(Mn,"permittedAttributes",["caption","presentation"]),gn.registerType("attachment",Mn);class fa extends gn{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=(n=>n.replace(/\r\n?/g,`
`))(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){const t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let n,r;return t===0?(n=null,r=this):t===this.length?(n=this,r=null):(n=new this.constructor(this.string.slice(0,t),this.attributes),r=new this.constructor(this.string.slice(t),this.attributes)),[n,r]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())}}gn.registerType("string",fa);class Dr extends dn{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new this.constructor(aa(this.objects,...n))}eachObject(t){return this.objects.map((n,r)=>t(n,r))}insertObjectAtIndex(t,n){return this.splice(n,0,t)}insertSplittableListAtIndex(t,n){return this.splice(n,0,...t.objects)}insertSplittableListAtPosition(t,n){const[r,a]=this.splitObjectAtPosition(n);return new this.constructor(r).insertSplittableListAtIndex(t,a)}editObjectAtIndex(t,n){return this.replaceObjectAtIndex(n(this.objects[t]),t)}replaceObjectAtIndex(t,n){return this.splice(n,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){const[n,r,a]=this.splitObjectsAtRange(t);return new this.constructor(n.slice(r,a+1))}selectSplittableList(t){const n=this.objects.filter(r=>t(r));return new this.constructor(n)}removeObjectsInRange(t){const[n,r,a]=this.splitObjectsAtRange(t);return new this.constructor(n).splice(r,a-r+1)}transformObjectsInRange(t,n){const[r,a,l]=this.splitObjectsAtRange(t),h=r.map((p,A)=>a<=A&&A<=l?n(p):p);return new this.constructor(h)}splitObjectsAtRange(t){let n,[r,a,l]=this.splitObjectAtPosition(bA(t));return[r,n]=new this.constructor(r).splitObjectAtPosition(AA(t)+l),[r,a,n-1]}getObjectAtPosition(t){const{index:n}=this.findIndexAndOffsetAtPosition(t);return this.objects[n]}splitObjectAtPosition(t){let n,r;const{index:a,offset:l}=this.findIndexAndOffsetAtPosition(t),h=this.objects.slice(0);if(a!=null)if(l===0)n=a,r=0;else{const p=this.getObjectAtIndex(a),[A,R]=p.splitAtOffset(l);h.splice(a,1,A,R),n=a+1,r=A.getLength()-l}else n=h.length,r=0;return[h,n,r]}consolidate(){const t=[];let n=this.objects[0];return this.objects.slice(1).forEach(r=>{var a,l;(a=(l=n).canBeConsolidatedWith)!==null&&a!==void 0&&a.call(l,r)?n=n.consolidateWith(r):(t.push(n),n=r)}),n&&t.push(n),new this.constructor(t)}consolidateFromIndexToIndex(t,n){const r=this.objects.slice(0).slice(t,n+1),a=new this.constructor(r).consolidate().toArray();return this.splice(t,r.length,...a)}findIndexAndOffsetAtPosition(t){let n,r=0;for(n=0;n<this.objects.length;n++){const a=r+this.objects[n].getLength();if(r<=t&&t<a)return{index:n,offset:t-r};r=a}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,n){let r=0;for(let a=0;a<this.objects.length;a++){const l=this.objects[a];if(a<t)r+=l.getLength();else if(a===t){r+=n;break}}return r}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||vA(this.objects,t==null?void 0:t.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}}const vA=function(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s.length!==t.length)return!1;let n=!0;for(let r=0;r<s.length;r++){const a=s[r];n&&!a.isEqualTo(t[r])&&(n=!1)}return n},bA=s=>s[0],AA=s=>s[1];class le extends dn{static textForAttachmentWithAttributes(t,n){return new this([new Mn(t,n)])}static textForStringWithAttributes(t,n){return new this([new fa(t,n)])}static fromJSON(t){return new this(Array.from(t).map(n=>gn.fromJSON(n)))}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);const n=t.filter(r=>!r.isEmpty());this.pieceList=new Dr(n)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){const n=this.getPieces().map(r=>t.find(r)||r);return new this.constructor(n)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,n){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,n))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,n){return this.removeTextAtRange(n).insertTextAtPosition(t,n[0])}moveTextFromRangeToPosition(t,n){if(t[0]<=n&&n<=t[1])return;const r=this.getTextAtRange(t),a=r.getLength();return t[0]<n&&(n-=a),this.removeTextAtRange(t).insertTextAtPosition(r,n)}addAttributeAtRange(t,n,r){const a={};return a[t]=n,this.addAttributesAtRange(a,r)}addAttributesAtRange(t,n){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(n,r=>r.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,n){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(n,r=>r.copyWithoutAttribute(t)))}setAttributesAtRange(t,n){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(n,r=>r.copyWithAttributes(t)))}getAttributesAtPosition(t){var n;return((n=this.pieceList.getObjectAtPosition(t))===null||n===void 0?void 0:n.getAttributes())||{}}getCommonAttributes(){const t=Array.from(this.pieceList.toArray()).map(n=>n.getAttributes());return jt.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,n){let r,a=r=n;const l=this.getLength();for(;a>0&&this.getCommonAttributesAtRange([a-1,r])[t];)a--;for(;r<l&&this.getCommonAttributesAtRange([n,r+1])[t];)r++;return[a,r]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){const n=this.getLength();return this.getStringAtRange([n-t.length,n])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let n=0;for(const a of this.pieceList.toArray()){var r;if(((r=a.attachment)===null||r===void 0?void 0:r.id)===t)return{attachment:a.attachment,position:n};n+=a.length}return{attachment:null,position:null}}getAttachmentById(t){const{attachment:n}=this.getAttachmentAndPositionById(t);return n}getRangeOfAttachment(t){const n=this.getAttachmentAndPositionById(t.id),r=n.position;if(t=n.attachment)return[r,r+1]}updateAttributesForAttachment(t,n){const r=this.getRangeOfAttachment(n);return r?this.addAttributesAtRange(t,r):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(t){var n;return super.isEqualTo(t)||(t==null||(n=t.pieceList)===null||n===void 0?void 0:n.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){const t=this.pieceList.selectSplittableList(n=>n.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return Y0(this.toString())}isRTL(){return this.getDirection()==="rtl"}}class pe extends dn{static fromJSON(t){return new this(le.fromJSON(t.text),t.attributes,t.htmlAttributes)}constructor(t,n,r){super(...arguments),this.text=xA(t||new le),this.attributes=n||[],this.htmlAttributes=r||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return!!super.isEqualTo(t)||this.text.isEqualTo(t==null?void 0:t.text)&&cn(this.attributes,t==null?void 0:t.attributes)&&qn(this.htmlAttributes,t==null?void 0:t.htmlAttributes)}copyWithText(t){return new pe(t,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new pe(this.text,t,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){const n=t.find(this.text);return n?this.copyWithText(n):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){const n=this.attributes.concat(fc(t));return this.copyWithAttributes(n)}addHTMLAttribute(t,n){const r=Object.assign({},this.htmlAttributes,{[t]:n});return new pe(this.text,this.attributes,r)}removeAttribute(t){const{listAttribute:n}=ht(t),r=pc(pc(this.attributes,t),n);return this.copyWithAttributes(r)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return gc(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return gc(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>ht(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){const t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){const t=this.getLastNestableAttribute();if(t){const n=this.attributes.lastIndexOf(t),r=aa(this.attributes,n+1,0,...fc(t));return this.copyWithAttributes(r)}return this}getListItemAttributes(){return this.attributes.filter(t=>ht(t).listAttribute)}isListItem(){var t;return(t=ht(this.getLastAttribute()))===null||t===void 0?void 0:t.listAttribute}isTerminalBlock(){var t;return(t=ht(this.getLastAttribute()))===null||t===void 0?void 0:t.terminal}breaksOnReturn(){var t;return(t=ht(this.getLastAttribute()))===null||t===void 0?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,n){const r=this.toString();let a;switch(t){case"forward":a=r.indexOf(`
`,n);break;case"backward":a=r.slice(0,n).lastIndexOf(`
`)}if(a!==-1)return a}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){const n=le.textForStringWithAttributes(`
`),r=this.getTextWithoutBlockBreak().appendText(n);return this.copyWithText(r.appendText(t.text))}splitAtOffset(t){let n,r;return t===0?(n=null,r=this):t===this.getLength()?(n=this,r=null):(n=this.copyWithText(this.text.getTextAtRange([0,t])),r=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[n,r]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return hh(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,n){const r=t.getAttributes(),a=r[n],l=this.attributes[n];return l===a&&!(ht(l).group===!1&&!(()=>{if(!Cr){Cr=[];for(const h in _t){const{listAttribute:p}=_t[h];p!=null&&Cr.push(p)}}return Cr})().includes(r[n+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}}const xA=function(s){return s=yA(s),s=EA(s)},yA=function(s){let t=!1;const n=s.getPieces();let r=n.slice(0,n.length-1);const a=n[n.length-1];return a?(r=r.map(l=>l.isBlockBreak()?(t=!0,RA(l)):l),t?new le([...r,a]):s):s},CA=le.textForStringWithAttributes(`
`,{blockBreak:!0}),EA=function(s){return hh(s)?s:s.appendText(CA)},hh=function(s){const t=s.getLength();return t===0?!1:s.getTextAtRange([t-1,t]).isBlockBreak()},RA=s=>s.copyWithoutAttribute("blockBreak"),fc=function(s){const{listAttribute:t}=ht(s);return t?[t,s]:[s]},gc=s=>s.slice(-1)[0],pc=function(s,t){const n=s.lastIndexOf(t);return n===-1?s:aa(s,n,1)};class ee extends dn{static fromJSON(t){return new this(Array.from(t).map(n=>pe.fromJSON(n)))}static fromString(t,n){const r=le.textForStringWithAttributes(t,n);return new this([new pe(r)])}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),t.length===0&&(t=[new pe]),this.blockList=Dr.box(t)}isEmpty(){const t=this.getBlockAtIndex(0);return this.blockList.length===1&&t.isEmpty()&&!t.hasAttributes()}copy(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(t)}copyUsingObjectsFromDocument(t){const n=new sA(t.getObjects());return this.copyUsingObjectMap(n)}copyUsingObjectMap(t){const n=this.getBlocks().map(r=>t.find(r)||r.copyUsingObjectMap(t));return new this.constructor(n)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=this.getBlocks().map(r=>{const a=t.concat(r.getAttributes());return r.copyWithAttributes(a)});return new this.constructor(n)}replaceBlock(t,n){const r=this.blockList.indexOf(t);return r===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(n,r))}insertDocumentAtRange(t,n){const{blockList:r}=t;n=X(n);let[a]=n;const{index:l,offset:h}=this.locationFromPosition(a);let p=this;const A=this.getBlockAtPosition(a);return _e(n)&&A.isEmpty()&&!A.hasAttributes()?p=new this.constructor(p.blockList.removeObjectAtIndex(l)):A.getBlockBreakPosition()===h&&a++,p=p.removeTextAtRange(n),new this.constructor(p.blockList.insertSplittableListAtPosition(r,a))}mergeDocumentAtRange(t,n){let r,a;n=X(n);const[l]=n,h=this.locationFromPosition(l),p=this.getBlockAtIndex(h.index).getAttributes(),A=t.getBaseBlockAttributes(),R=p.slice(-A.length);if(cn(A,R)){const L=p.slice(0,-A.length);r=t.copyWithBaseBlockAttributes(L)}else r=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(p);const S=r.getBlockCount(),O=r.getBlockAtIndex(0);if(cn(p,O.getAttributes())){const L=O.getTextWithoutBlockBreak();if(a=this.insertTextAtRange(L,n),S>1){r=new this.constructor(r.getBlocks().slice(1));const K=l+L.getLength();a=a.insertDocumentAtRange(r,K)}}else a=this.insertDocumentAtRange(r,n);return a}insertTextAtRange(t,n){n=X(n);const[r]=n,{index:a,offset:l}=this.locationFromPosition(r),h=this.removeTextAtRange(n);return new this.constructor(h.blockList.editObjectAtIndex(a,p=>p.copyWithText(p.text.insertTextAtPosition(t,l))))}removeTextAtRange(t){let n;t=X(t);const[r,a]=t;if(_e(t))return this;const[l,h]=Array.from(this.locationRangeFromRange(t)),p=l.index,A=l.offset,R=this.getBlockAtIndex(p),S=h.index,O=h.offset,L=this.getBlockAtIndex(S);if(a-r==1&&R.getBlockBreakPosition()===A&&L.getBlockBreakPosition()!==O&&L.text.getStringAtPosition(O)===`
`)n=this.blockList.editObjectAtIndex(S,K=>K.copyWithText(K.text.removeTextAtRange([O,O+1])));else{let K;const Tt=R.text.getTextAtRange([0,A]),ot=L.text.getTextAtRange([O,L.getLength()]),Q=Tt.appendText(ot);K=p!==S&&A===0&&R.getAttributeLevel()>=L.getAttributeLevel()?L.copyWithText(Q):R.copyWithText(Q);const ft=S+1-p;n=this.blockList.splice(p,ft,K)}return new this.constructor(n)}moveTextFromRangeToPosition(t,n){let r;t=X(t);const[a,l]=t;if(a<=n&&n<=l)return this;let h=this.getDocumentAtRange(t),p=this.removeTextAtRange(t);const A=a<n;A&&(n-=h.getLength());const[R,...S]=h.getBlocks();return S.length===0?(r=R.getTextWithoutBlockBreak(),A&&(n+=1)):r=R.text,p=p.insertTextAtRange(r,n),S.length===0?p:(h=new this.constructor(S),n+=r.getLength(),p.insertDocumentAtRange(h,n))}addAttributeAtRange(t,n,r){let{blockList:a}=this;return this.eachBlockAtRange(r,(l,h,p)=>a=a.editObjectAtIndex(p,function(){return ht(t)?l.addAttribute(t,n):h[0]===h[1]?l:l.copyWithText(l.text.addAttributeAtRange(t,n,h))})),new this.constructor(a)}addAttribute(t,n){let{blockList:r}=this;return this.eachBlock((a,l)=>r=r.editObjectAtIndex(l,()=>a.addAttribute(t,n))),new this.constructor(r)}removeAttributeAtRange(t,n){let{blockList:r}=this;return this.eachBlockAtRange(n,function(a,l,h){ht(t)?r=r.editObjectAtIndex(h,()=>a.removeAttribute(t)):l[0]!==l[1]&&(r=r.editObjectAtIndex(h,()=>a.copyWithText(a.text.removeAttributeAtRange(t,l))))}),new this.constructor(r)}updateAttributesForAttachment(t,n){const r=this.getRangeOfAttachment(n),[a]=Array.from(r),{index:l}=this.locationFromPosition(a),h=this.getTextAtIndex(l);return new this.constructor(this.blockList.editObjectAtIndex(l,p=>p.copyWithText(h.updateAttributesForAttachment(t,n))))}removeAttributeForAttachment(t,n){const r=this.getRangeOfAttachment(n);return this.removeAttributeAtRange(t,r)}setHTMLAttributeAtPosition(t,n,r){const a=this.getBlockAtPosition(t),l=a.addHTMLAttribute(n,r);return this.replaceBlock(a,l)}insertBlockBreakAtRange(t){let n;t=X(t);const[r]=t,{offset:a}=this.locationFromPosition(r),l=this.removeTextAtRange(t);return a===0&&(n=[new pe]),new this.constructor(l.blockList.insertSplittableListAtPosition(new Dr(n),r))}applyBlockAttributeAtRange(t,n,r){const a=this.expandRangeToLineBreaksAndSplitBlocks(r);let l=a.document;r=a.range;const h=ht(t);if(h.listAttribute){l=l.removeLastListAttributeAtRange(r,{exceptAttributeName:t});const p=l.convertLineBreaksToBlockBreaksInRange(r);l=p.document,r=p.range}else l=h.exclusive?l.removeBlockAttributesAtRange(r):h.terminal?l.removeLastTerminalAttributeAtRange(r):l.consolidateBlocksAtRange(r);return l.addAttributeAtRange(t,n,r)}removeLastListAttributeAtRange(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:r}=this;return this.eachBlockAtRange(t,function(a,l,h){const p=a.getLastAttribute();p&&ht(p).listAttribute&&p!==n.exceptAttributeName&&(r=r.editObjectAtIndex(h,()=>a.removeAttribute(p)))}),new this.constructor(r)}removeLastTerminalAttributeAtRange(t){let{blockList:n}=this;return this.eachBlockAtRange(t,function(r,a,l){const h=r.getLastAttribute();h&&ht(h).terminal&&(n=n.editObjectAtIndex(l,()=>r.removeAttribute(h)))}),new this.constructor(n)}removeBlockAttributesAtRange(t){let{blockList:n}=this;return this.eachBlockAtRange(t,function(r,a,l){r.hasAttributes()&&(n=n.editObjectAtIndex(l,()=>r.copyWithoutAttributes()))}),new this.constructor(n)}expandRangeToLineBreaksAndSplitBlocks(t){let n;t=X(t);let[r,a]=t;const l=this.locationFromPosition(r),h=this.locationFromPosition(a);let p=this;const A=p.getBlockAtIndex(l.index);if(l.offset=A.findLineBreakInDirectionFromPosition("backward",l.offset),l.offset!=null&&(n=p.positionFromLocation(l),p=p.insertBlockBreakAtRange([n,n+1]),h.index+=1,h.offset-=p.getBlockAtIndex(l.index).getLength(),l.index+=1),l.offset=0,h.offset===0&&h.index>l.index)h.index-=1,h.offset=p.getBlockAtIndex(h.index).getBlockBreakPosition();else{const R=p.getBlockAtIndex(h.index);R.text.getStringAtRange([h.offset-1,h.offset])===`
`?h.offset-=1:h.offset=R.findLineBreakInDirectionFromPosition("forward",h.offset),h.offset!==R.getBlockBreakPosition()&&(n=p.positionFromLocation(h),p=p.insertBlockBreakAtRange([n,n+1]))}return r=p.positionFromLocation(l),a=p.positionFromLocation(h),{document:p,range:t=X([r,a])}}convertLineBreaksToBlockBreaksInRange(t){t=X(t);let[n]=t;const r=this.getStringAtRange(t).slice(0,-1);let a=this;return r.replace(/.*?\n/g,function(l){n+=l.length,a=a.insertBlockBreakAtRange([n-1,n])}),{document:a,range:t}}consolidateBlocksAtRange(t){t=X(t);const[n,r]=t,a=this.locationFromPosition(n).index,l=this.locationFromPosition(r).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(a,l))}getDocumentAtRange(t){t=X(t);const n=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(n)}getStringAtRange(t){let n;const r=t=X(t);return r[r.length-1]!==this.getLength()&&(n=-1),this.getDocumentAtRange(t).toString().slice(0,n)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){const{index:n}=this.locationFromPosition(t);return this.getBlockAtIndex(n)}getTextAtIndex(t){var n;return(n=this.getBlockAtIndex(t))===null||n===void 0?void 0:n.text}getTextAtPosition(t){const{index:n}=this.locationFromPosition(t);return this.getTextAtIndex(n)}getPieceAtPosition(t){const{index:n,offset:r}=this.locationFromPosition(t);return this.getTextAtIndex(n).getPieceAtPosition(r)}getCharacterAtPosition(t){const{index:n,offset:r}=this.locationFromPosition(t);return this.getTextAtIndex(n).getStringAtRange([r,r+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,n){let r,a;t=X(t);const[l,h]=t,p=this.locationFromPosition(l),A=this.locationFromPosition(h);if(p.index===A.index)return r=this.getBlockAtIndex(p.index),a=[p.offset,A.offset],n(r,a,p.index);for(let R=p.index;R<=A.index;R++)if(r=this.getBlockAtIndex(R),r){switch(R){case p.index:a=[p.offset,r.text.getLength()];break;case A.index:a=[0,A.offset];break;default:a=[0,r.text.getLength()]}n(r,a,R)}}getCommonAttributesAtRange(t){t=X(t);const[n]=t;if(_e(t))return this.getCommonAttributesAtPosition(n);{const r=[],a=[];return this.eachBlockAtRange(t,function(l,h){if(h[0]!==h[1])return r.push(l.text.getCommonAttributesAtRange(h)),a.push(mc(l))}),jt.fromCommonAttributesOfObjects(r).merge(jt.fromCommonAttributesOfObjects(a)).toObject()}}getCommonAttributesAtPosition(t){let n,r;const{index:a,offset:l}=this.locationFromPosition(t),h=this.getBlockAtIndex(a);if(!h)return{};const p=mc(h),A=h.text.getAttributesAtPosition(l),R=h.text.getAttributesAtPosition(l-1),S=Object.keys(ln).filter(O=>ln[O].inheritable);for(n in R)r=R[n],(r===A[n]||S.includes(n))&&(p[n]=r);return p}getRangeOfCommonAttributeAtPosition(t,n){const{index:r,offset:a}=this.locationFromPosition(n),l=this.getTextAtIndex(r),[h,p]=Array.from(l.getExpandedRangeForAttributeAtOffset(t,a)),A=this.positionFromLocation({index:r,offset:h}),R=this.positionFromLocation({index:r,offset:p});return X([A,R])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let n=1;n<this.getBlockCount();n++){const r=this.getBlockAtIndex(n).getAttributes(),a=Math.min(t.length,r.length);t=(()=>{const l=[];for(let h=0;h<a&&r[h]===t[h];h++)l.push(r[h]);return l})()}return t}getAttachmentById(t){for(const n of this.getAttachments())if(n.id===t)return n}getAttachmentPieces(){let t=[];return this.blockList.eachObject(n=>{let{text:r}=n;return t=t.concat(r.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let n=0;const r=this.blockList.toArray();for(let a=0;a<r.length;a++){const{text:l}=r[a],h=l.getRangeOfAttachment(t);if(h)return X([n+h[0],n+h[1]]);n+=l.getLength()}}getLocationRangeOfAttachment(t){const n=this.getRangeOfAttachment(t);return this.locationRangeFromRange(n)}getAttachmentPieceForAttachment(t){for(const n of this.getAttachmentPieces())if(n.attachment===t)return n}findRangesForBlockAttribute(t){let n=0;const r=[];return this.getBlocks().forEach(a=>{const l=a.getLength();a.hasAttribute(t)&&r.push([n,n+l]),n+=l}),r}findRangesForTextAttribute(t){let{withValue:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=0,a=[];const l=[];return this.getPieces().forEach(h=>{const p=h.getLength();(function(A){return n?A.getAttribute(t)===n:A.hasAttribute(t)})(h)&&(a[1]===r?a[1]=r+p:l.push(a=[r,r+p])),r+=p}),l}locationFromPosition(t){const n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(n.index!=null)return n;{const r=this.getBlocks();return{index:r.length-1,offset:r[r.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return X(this.locationFromPosition(t))}locationRangeFromRange(t){if(!(t=X(t)))return;const[n,r]=Array.from(t),a=this.locationFromPosition(n),l=this.locationFromPosition(r);return X([a,l])}rangeFromLocationRange(t){let n;t=X(t);const r=this.positionFromLocation(t[0]);return _e(t)||(n=this.positionFromLocation(t[1])),X([r,n])}isEqualTo(t){return this.blockList.isEqualTo(t==null?void 0:t.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){const t=[];return Array.from(this.getTexts()).forEach(n=>{t.push(...Array.from(n.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){const t=[];return this.blockList.eachObject(n=>t.push(n.copyWithText(n.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(t=>JSON.parse(t.text.toConsole())))}}const mc=function(s){const t={},n=s.getLastAttribute();return n&&(t[n]=!0),t},xs=function(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:s=vi(s),attributes:t,type:"string"}},vc=(s,t)=>{try{return JSON.parse(s.getAttribute("data-trix-".concat(t)))}catch{return{}}};class wi extends dt{static parse(t,n){const r=new this(t,n);return r.parse(),r}constructor(t){let{referenceElement:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=n,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return ee.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),Ir.setHTML(this.containerElement,this.html);const t=Lr(this.containerElement,{usingFilter:SA});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=j({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return Ke(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){const n=t.parentNode;if(n===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes(`
`);if(n===this.containerElement||this.isBlockElement(n)){var r;const a=this.getBlockAttributes(n),l=this.getBlockHTMLAttributes(n);cn(a,(r=this.currentBlock)===null||r===void 0?void 0:r.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(a,n,l),this.currentBlockElement=n)}}appendBlockForElement(t){const n=this.isBlockElement(t),r=sn(this.currentBlockElement,t);if(n&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){const a=this.getBlockAttributes(t),l=this.getBlockHTMLAttributes(t);if(t.firstChild){if(r&&cn(a,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(a,t,l),this.currentBlockElement=t}}}else if(this.currentBlockElement&&!r&&!n){const a=this.findParentBlockElement(t);if(a)return this.appendBlockForElement(a);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:n}=t;for(;n&&n!==this.containerElement;){if(this.isBlockElement(n)&&this.blockElements.includes(n))return n;n=n.parentElement}return null}processTextNode(t){let n=t.data;var r;return bc(t.parentNode)||(n=ca(n),dh((r=t.previousSibling)===null||r===void 0?void 0:r.textContent)&&(n=LA(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode))}processElement(t){let n;if(un(t)){if(n=vc(t,"attachment"),Object.keys(n).length){const r=this.getTextAttributes(t);this.appendAttachmentWithAttributes(n,r),t.innerHTML=""}return this.processedElements.push(t)}switch(Lt(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(t)),this.processedElements.push(t);case"img":n={url:t.getAttribute("src"),contentType:"image"};const r=(a=>{const l=a.getAttribute("width"),h=a.getAttribute("height"),p={};return l&&(p.width=parseInt(l,10)),h&&(p.height=parseInt(h,10)),p})(t);for(const a in r){const l=r[a];n[a]=l}return this.appendAttachmentWithAttributes(n,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(Er.tableRowSeparator);break;case"td":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(Er.tableCellSeparator)}}appendBlockForAttributesWithElement(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(n);const a=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(t,r);return this.blocks.push(a),a}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,n){return this.appendPiece(xs(t,n))}appendAttachmentWithAttributes(t,n){return this.appendPiece(function(r){return{attachment:r,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(t,n))}appendPiece(t){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,n){const{text:r}=this.blocks[n],a=r[r.length-1];if((a==null?void 0:a.type)!=="string")return r.push(xs(t));a.string+=t}prependStringToTextAtIndex(t,n){const{text:r}=this.blocks[n],a=r[0];if((a==null?void 0:a.type)!=="string")return r.unshift(xs(t));a.string=t+a.string}getTextAttributes(t){let n;const r={};for(const a in ln){const l=ln[a];if(l.tagName&&Ve(t,{matchingSelector:l.tagName,untilNode:this.containerElement}))r[a]=!0;else if(l.parser){if(n=l.parser(t),n){let h=!1;for(const p of this.findBlockElementAncestors(t))if(l.parser(p)===n){h=!0;break}h||(r[a]=n)}}else l.styleProperty&&(n=t.style[l.styleProperty],n&&(r[a]=n))}if(un(t)){const a=vc(t,"attributes");for(const l in a)n=a[l],r[l]=n}return r}getBlockAttributes(t){const n=[];for(;t&&t!==this.containerElement;){for(const a in _t){const l=_t[a];var r;l.parse!==!1&&Lt(t)===l.tagName&&((r=l.test)!==null&&r!==void 0&&r.call(l,t)||!l.test)&&(n.push(a),l.listAttribute&&n.push(l.listAttribute))}t=t.parentNode}return n.reverse()}getBlockHTMLAttributes(t){const n={},r=Object.values(_t).find(a=>a.tagName===Lt(t));return((r==null?void 0:r.htmlAttributes)||[]).forEach(a=>{t.hasAttribute(a)&&(n[a]=t.getAttribute(a))}),n}findBlockElementAncestors(t){const n=[];for(;t&&t!==this.containerElement;){const r=Lt(t);Ai().includes(r)&&n.push(t),t=t.parentNode}return n}isBlockElement(t){if((t==null?void 0:t.nodeType)===Node.ELEMENT_NODE&&!un(t)&&!Ve(t,{matchingSelector:"td",untilNode:this.containerElement}))return Ai().includes(Lt(t))||window.getComputedStyle(t).display==="block"}isInsignificantTextNode(t){if((t==null?void 0:t.nodeType)!==Node.TEXT_NODE||!_A(t.data))return;const{parentNode:n,previousSibling:r,nextSibling:a}=t;return wA(n.previousSibling)&&!this.isBlockElement(n.previousSibling)||bc(n)?void 0:!r||this.isBlockElement(r)||!a||this.isBlockElement(a)}isExtraBR(t){return Lt(t)==="br"&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}needsTableSeparator(t){if(Er.removeBlankTableCells){var n;const r=(n=t.previousSibling)===null||n===void 0?void 0:n.textContent;return r&&/\S/.test(r)}return t.previousSibling}translateBlockElementMarginsToNewlines(){const t=this.getMarginOfDefaultBlockElement();for(let n=0;n<this.blocks.length;n++){const r=this.getMarginOfBlockElementAtIndex(n);r&&(r.top>2*t.top&&this.prependStringToTextAtIndex(`
`,n),r.bottom>2*t.bottom&&this.appendStringToTextAtIndex(`
`,n))}}getMarginOfBlockElementAtIndex(t){const n=this.blockElements[t];if(n&&n.textContent&&!Ai().includes(Lt(n))&&!this.processedElements.includes(n))return Ac(n)}getMarginOfDefaultBlockElement(){const t=j(_t.default.tagName);return this.containerElement.appendChild(t),Ac(t)}}const bc=function(s){const{whiteSpace:t}=window.getComputedStyle(s);return["pre","pre-wrap","pre-line"].includes(t)},wA=s=>s&&!dh(s.textContent),Ac=function(s){const t=window.getComputedStyle(s);if(t.display==="block")return{top:parseInt(t.marginTop),bottom:parseInt(t.marginBottom)}},SA=function(s){return Lt(s)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},LA=s=>s.replace(new RegExp("^".concat(la.source,"+")),""),_A=s=>new RegExp("^".concat(la.source,"*$")).test(s),dh=s=>/\s$/.test(s),TA=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],Gs="data-trix-serialized-attributes",DA="[".concat(Gs,"]"),kA=new RegExp("<!--block-->","g"),OA={"application/json":function(s){let t;if(s instanceof ee)t=s;else{if(!(s instanceof HTMLElement))throw new Error("unserializable object");t=wi.parse(s.innerHTML).getDocument()}return t.toSerializableDocument().toJSONString()},"text/html":function(s){let t;if(s instanceof ee)t=Pr.render(s);else{if(!(s instanceof HTMLElement))throw new Error("unserializable object");t=s.cloneNode(!0)}return Array.from(t.querySelectorAll("[data-trix-serialize=false]")).forEach(n=>{Ke(n)}),TA.forEach(n=>{Array.from(t.querySelectorAll("[".concat(n,"]"))).forEach(r=>{r.removeAttribute(n)})}),Array.from(t.querySelectorAll(DA)).forEach(n=>{try{const r=JSON.parse(n.getAttribute(Gs));n.removeAttribute(Gs);for(const a in r){const l=r[a];n.setAttribute(a,l)}}catch{}}),t.innerHTML.replace(kA,"")}};var IA=Object.freeze({__proto__:null});class ct extends dt{constructor(t,n){super(...arguments),this.attachmentManager=t,this.attachment=n,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}}ct.proxyMethod("attachment.getAttribute"),ct.proxyMethod("attachment.hasAttribute"),ct.proxyMethod("attachment.setAttribute"),ct.proxyMethod("attachment.getAttributes"),ct.proxyMethod("attachment.setAttributes"),ct.proxyMethod("attachment.isPending"),ct.proxyMethod("attachment.isPreviewable"),ct.proxyMethod("attachment.getURL"),ct.proxyMethod("attachment.getHref"),ct.proxyMethod("attachment.getFilename"),ct.proxyMethod("attachment.getFilesize"),ct.proxyMethod("attachment.getFormattedFilesize"),ct.proxyMethod("attachment.getExtension"),ct.proxyMethod("attachment.getContentType"),ct.proxyMethod("attachment.getFile"),ct.proxyMethod("attachment.setFile"),ct.proxyMethod("attachment.releaseFile"),ct.proxyMethod("attachment.getUploadProgress"),ct.proxyMethod("attachment.setUploadProgress");class fh extends dt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(n=>{this.manageAttachment(n)})}getAttachments(){const t=[];for(const n in this.managedAttachments){const r=this.managedAttachments[n];t.push(r)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new ct(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){var n,r;if(this.attachmentIsManaged(t))return(n=this.delegate)===null||n===void 0||(r=n.attachmentManagerDidRequestRemovalOfAttachment)===null||r===void 0?void 0:r.call(n,t)}unmanageAttachment(t){const n=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],n}}class gh{constructor(t){this.composition=t,this.document=this.composition.document;const n=this.composition.getSelectedRange();this.startPosition=n[0],this.endPosition=n[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}}class He extends dt{constructor(){super(...arguments),this.document=new ee,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){var n,r;if(!t.isEqualTo(this.document))return this.document=t,this.refreshAttachments(),this.revision++,(n=this.delegate)===null||n===void 0||(r=n.compositionDidChangeDocument)===null||r===void 0?void 0:r.call(n,t)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var n,r,a,l;let{document:h,selectedRange:p}=t;return(n=this.delegate)===null||n===void 0||(r=n.compositionWillLoadSnapshot)===null||r===void 0||r.call(n),this.setDocument(h!=null?h:new ee),this.setSelection(p!=null?p:[0,0]),(a=this.delegate)===null||a===void 0||(l=a.compositionDidLoadSnapshot)===null||l===void 0?void 0:l.call(a)}insertText(t){let{updatePosition:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0};const r=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,r));const a=r[0],l=a+t.getLength();return n&&this.setSelection(l),this.notifyDelegateOfInsertionAtRange([a,l])}insertBlock(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new pe;const n=new ee([t]);return this.insertDocument(n)}insertDocument(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ee;const n=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,n));const r=n[0],a=r+t.getLength();return this.setSelection(a),this.notifyDelegateOfInsertionAtRange([r,a])}insertString(t,n){const r=this.getCurrentTextAttributes(),a=le.textForStringWithAttributes(t,r);return this.insertText(a,n)}insertBlockBreak(){const t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));const n=t[0],r=n+1;return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}insertLineBreak(){const t=new gh(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){const n=new ee([t.block.copyWithoutText()]);return this.insertDocument(n)}return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString(`
`)}insertHTML(t){const n=wi.parse(t).getDocument(),r=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(n,r));const a=r[0],l=a+n.getLength()-1;return this.setSelection(l),this.notifyDelegateOfInsertionAtRange([a,l])}replaceHTML(t){const n=wi.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),r=this.getLocationRange({strict:!1}),a=this.document.rangeFromLocationRange(r);return this.setDocument(n),this.setSelection(a)}insertFile(t){return this.insertFiles([t])}insertFiles(t){const n=[];return Array.from(t).forEach(r=>{var a;if((a=this.delegate)!==null&&a!==void 0&&a.compositionShouldAcceptFile(r)){const l=Hn.attachmentForFile(r);n.push(l)}}),this.insertAttachments(n)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let n=new le;return Array.from(t).forEach(r=>{var a;const l=r.getType(),h=(a=ia[l])===null||a===void 0?void 0:a.presentation,p=this.getCurrentTextAttributes();h&&(p.presentation=h);const A=le.textForAttachmentWithAttributes(r,p);n=n.appendText(A)}),this.insertText(n)}shouldManageDeletingInDirection(t){const n=this.getLocationRange();if(_e(n)){if(t==="backward"&&n[0].offset===0||this.shouldManageMovingCursorInDirection(t))return!0}else if(n[0].index!==n[1].index)return!0;return!1}deleteInDirection(t){let n,r,a,{length:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=this.getLocationRange();let p=this.getSelectedRange();const A=_e(p);if(A?r=t==="backward"&&h[0].offset===0:a=h[0].index!==h[1].index,r&&this.canDecreaseBlockAttributeLevel()){const R=this.getBlock();if(R.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(p[0]),R.isEmpty())return!1}return A&&(p=this.getExpandedRangeInDirection(t,{length:l}),t==="backward"&&(n=this.getAttachmentAtRange(p))),n?(this.editAttachment(n),!1):(this.setDocument(this.document.removeTextAtRange(p)),this.setSelection(p[0]),!r&&!a&&void 0)}moveTextFromRange(t){const[n]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,n)),this.setSelection(n)}removeAttachment(t){const n=this.document.getRangeOfAttachment(t);if(n)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(n)),this.setSelection(n[0])}removeLastBlockAttribute(){const[t,n]=Array.from(this.getSelectedRange()),r=this.document.getBlockAtPosition(n);return this.removeCurrentAttribute(r.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){const n=this.currentAttributes[t];return n!=null&&n!==!1}toggleCurrentAttribute(t){const n=!this.currentAttributes[t];return n?this.setCurrentAttribute(t,n):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return ht(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){const n=this.getSelectedDocument();if(n){for(const r of Array.from(n.getAttachments()))if(!r.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){const n=this.getBlock();if(n)return!n.isTerminalBlock()}setCurrentAttribute(t,n){return ht(t)?this.setBlockAttribute(t,n):(this.setTextAttribute(t,n),this.currentAttributes[t]=n,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(t,n,r){var a;const l=this.document.getBlockAtPosition(t),h=(a=ht(l.getLastAttribute()))===null||a===void 0?void 0:a.htmlAttributes;if(l&&h!=null&&h.includes(n)){const p=this.document.setHTMLAttributeAtPosition(t,n,r);this.setDocument(p)}}setTextAttribute(t,n){const r=this.getSelectedRange();if(!r)return;const[a,l]=Array.from(r);if(a!==l)return this.setDocument(this.document.addAttributeAtRange(t,n,r));if(t==="href"){const h=le.textForStringWithAttributes(n,{href:n});return this.insertText(h)}}setBlockAttribute(t,n){const r=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,n,r)),this.setSelection(r)}removeCurrentAttribute(t){return ht(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){const n=this.getSelectedRange();if(n)return this.setDocument(this.document.removeAttributeAtRange(t,n))}removeBlockAttribute(t){const n=this.getSelectedRange();if(n)return this.setDocument(this.document.removeAttributeAtRange(t,n))}canDecreaseNestingLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;const n=this.getBlock();if(n){if((t=ht(n.getLastNestableAttribute()))===null||t===void 0||!t.listAttribute)return n.getNestingLevel()>0;{const r=this.getPreviousBlock();if(r)return function(){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return cn((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,a.length),a)}(r.getListItemAttributes(),n.getListItemAttributes())}}}decreaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;const n=(t=this.getBlock())===null||t===void 0?void 0:t.getLastAttribute();if(n)return this.removeCurrentAttribute(n)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange());const{index:n}=this.document.locationFromPosition(t);let r=n;const a=this.getBlock().getAttributeLevel();let l=this.document.getBlockAtIndex(r+1);for(;l&&l.isListItem()&&!(l.getAttributeLevel()<=a);)r++,l=this.document.getBlockAtIndex(r+1);t=this.document.positionFromLocation({index:n,offset:0});const h=this.document.positionFromLocation({index:r,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,h]))}updateCurrentAttributes(){const t=this.getSelectedRange({ignoreLock:!0});if(t){const n=this.document.getCommonAttributesAtRange(t);if(Array.from(Ks()).forEach(r=>{n[r]||this.canSetCurrentAttribute(r)||(n[r]=!1)}),!qn(n,this.currentAttributes))return this.currentAttributes=n,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return Gc.call({},this.currentAttributes)}getCurrentTextAttributes(){const t={};for(const n in this.currentAttributes){const r=this.currentAttributes[n];r!==!1&&Js(n)&&(t[n]=r)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var n;const r=this.document.locationRangeFromRange(t);return(n=this.delegate)===null||n===void 0?void 0:n.compositionDidRequestChangingSelectionToLocationRange(r)}getSelectedRange(){const t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){const n=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(n)}getPosition(){const t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||X({index:0,offset:0})}withTargetLocationRange(t,n){let r;this.targetLocationRange=t;try{r=n()}finally{this.targetLocationRange=null}return r}withTargetRange(t,n){const r=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(r,n)}withTargetDOMRange(t,n){const r=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(r,n)}getExpandedRangeInDirection(t){let{length:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[r,a]=Array.from(this.getSelectedRange());return t==="backward"?n?r-=n:r=this.translateUTF16PositionFromOffset(r,-1):n?a+=n:a=this.translateUTF16PositionFromOffset(a,1),X([r,a])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;const n=this.getExpandedRangeInDirection(t);return this.getAttachmentAtRange(n)!=null}moveCursorInDirection(t){let n,r;if(this.editingAttachment)r=this.document.getRangeOfAttachment(this.editingAttachment);else{const a=this.getSelectedRange();r=this.getExpandedRangeInDirection(t),n=!_r(a,r)}if(t==="backward"?this.setSelectedRange(r[0]):this.setSelectedRange(r[1]),n){const a=this.getAttachmentAtRange(r);if(a)return this.editAttachment(a)}}expandSelectionInDirection(t){let{length:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getExpandedRangeInDirection(t,{length:n});return this.setSelectedRange(r)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){const n=this.getPosition(),r=this.document.getRangeOfCommonAttributeAtPosition(t,n);return this.setSelectedRange(r)}selectionContainsAttachments(){var t;return((t=this.getSelectedAttachments())===null||t===void 0?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){const n=this.document.locationFromPosition(t);if(n)return this.locationIsCursorTarget(n)}positionIsBlockBreak(t){var n;return(n=this.document.getPieceAtPosition(t))===null||n===void 0?void 0:n.isBlockBreak()}getSelectedDocument(){const t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return(t=this.getSelectedDocument())===null||t===void 0?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){const t=this.document.getAttachments(),{added:n,removed:r}=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const h=[],p=[],A=new Set;a.forEach(S=>{A.add(S)});const R=new Set;return l.forEach(S=>{R.add(S),A.has(S)||h.push(S)}),a.forEach(S=>{R.has(S)||p.push(S)}),{added:h,removed:p}}(this.attachments,t);return this.attachments=t,Array.from(r).forEach(a=>{var l,h;a.delegate=null,(l=this.delegate)===null||l===void 0||(h=l.compositionDidRemoveAttachment)===null||h===void 0||h.call(l,a)}),(()=>{const a=[];return Array.from(n).forEach(l=>{var h,p;l.delegate=this,a.push((h=this.delegate)===null||h===void 0||(p=h.compositionDidAddAttachment)===null||p===void 0?void 0:p.call(h,l))}),a})()}attachmentDidChangeAttributes(t){var n,r;return this.revision++,(n=this.delegate)===null||n===void 0||(r=n.compositionDidEditAttachment)===null||r===void 0?void 0:r.call(n,t)}attachmentDidChangePreviewURL(t){var n,r;return this.revision++,(n=this.delegate)===null||n===void 0||(r=n.compositionDidChangeAttachmentPreviewURL)===null||r===void 0?void 0:r.call(n,t)}editAttachment(t,n){var r,a;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,(r=this.delegate)===null||r===void 0||(a=r.compositionDidStartEditingAttachment)===null||a===void 0?void 0:a.call(r,this.editingAttachment,n)}stopEditingAttachment(){var t,n;this.editingAttachment&&((t=this.delegate)===null||t===void 0||(n=t.compositionDidStopEditingAttachment)===null||n===void 0||n.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,n){return this.setDocument(this.document.updateAttributesForAttachment(t,n))}removeAttributeForAttachment(t,n){return this.setDocument(this.document.removeAttributeForAttachment(t,n))}breakFormattedBlock(t){let{document:n}=t;const{block:r}=t;let a=t.startPosition,l=[a-1,a];r.getBlockBreakPosition()===t.startLocation.offset?(r.breaksOnReturn()&&t.nextCharacter===`
`?a+=1:n=n.removeTextAtRange(l),l=[a,a]):t.nextCharacter===`
`?t.previousCharacter===`
`?l=[a-1,a+1]:(l=[a,a+1],a+=1):t.startLocation.offset-1!=0&&(a+=1);const h=new ee([r.removeLastAttribute().copyWithoutText()]);return this.setDocument(n.insertDocumentAtRange(h,l)),this.setSelection(a)}getPreviousBlock(){const t=this.getLocationRange();if(t){const{index:n}=t[0];if(n>0)return this.document.getBlockAtIndex(n-1)}}getBlock(){const t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){const n=this.document.getDocumentAtRange(t);if(n.toString()==="".concat("\uFFFC",`
`))return n.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.compositionDidChangeCurrentAttributes)===null||n===void 0?void 0:n.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionDidPerformInsertionAtRange)===null||r===void 0?void 0:r.call(n,t)}translateUTF16PositionFromOffset(t,n){const r=this.document.toUTF16String(),a=r.offsetFromUCS2Offset(t);return r.offsetToUCS2Offset(a+n)}}He.proxyMethod("getSelectionManager().getPointRange"),He.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),He.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),He.proxyMethod("getSelectionManager().locationIsCursorTarget"),He.proxyMethod("getSelectionManager().selectionIsExpanded"),He.proxyMethod("delegate?.getSelectionManager");class Xs extends dt{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:n,consolidatable:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.undoEntries.slice(-1)[0];if(!r||!PA(a,t,n)){const l=this.createEntry({description:t,context:n});this.undoEntries.push(l),this.redoEntries=[]}}undo(){const t=this.undoEntries.pop();if(t){const n=this.createEntry(t);return this.redoEntries.push(n),this.composition.loadSnapshot(t.snapshot)}}redo(){const t=this.redoEntries.pop();if(t){const n=this.createEntry(t);return this.undoEntries.push(n),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:t==null?void 0:t.toString(),context:JSON.stringify(n),snapshot:this.composition.getSnapshot()}}}const PA=(s,t,n)=>(s==null?void 0:s.description)===(t==null?void 0:t.toString())&&(s==null?void 0:s.context)===JSON.stringify(n),ys="attachmentGallery";class ph{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(ys,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(n=>{n[1]-n[0]>1&&(n[0]+=t,n[1]+=t,this.document.getCharacterAtPosition(n[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(n[1]),n[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),n[1]++,t++),n[0]!==0&&this.document.getCharacterAtPosition(n[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(n[0]),n[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),n[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(ys,!0,n))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(ys)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}}const mh=function(s){const t=new ph(s);return t.perform(),t.getSnapshot()},BA=[mh];class vh{constructor(t,n,r){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=n,this.element=r,this.undoManager=new Xs(this.composition),this.filters=BA.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=wi.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(n)}loadJSON(t){let{document:n,selectedRange:r}=t;return n=ee.fromJSON(n),this.loadSnapshot({document:n,selectedRange:r})}loadSnapshot(t){return this.undoManager=new Xs(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){const n=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(n)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(t,n)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}setHTMLAtributeAtPosition(t,n,r){this.composition.setHTMLAtributeAtPosition(t,n,r)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:n,consolidatable:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:n,consolidatable:r})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}}class bh{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,n){let{strict:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},a=0,l=!1;const h={index:0,offset:0},p=this.findAttachmentElementParentForNode(t);p&&(t=p.parentNode,n=hs(p));const A=Lr(this.element,{usingFilter:Ah});for(;A.nextNode();){const R=A.currentNode;if(R===t&&xi(t)){Nn(R)||(h.offset+=n);break}if(R.parentNode===t){if(a++===n)break}else if(!sn(t,R)&&a>0)break;ec(R,{strict:r})?(l&&h.index++,h.offset=0,l=!0):h.offset+=Cs(R)}return h}findContainerAndOffsetFromLocation(t){let n,r;if(t.index===0&&t.offset===0){for(n=this.element,r=0;n.firstChild;)if(n=n.firstChild,ds(n)){r=1;break}return[n,r]}let[a,l]=this.findNodeAndOffsetFromLocation(t);if(a){if(xi(a))Cs(a)===0?(n=a.parentNode.parentNode,r=hs(a.parentNode),Nn(a,{name:"right"})&&r++):(n=a,r=t.offset-l);else{if(n=a.parentNode,!ec(a.previousSibling)&&!ds(n))for(;a===n.lastChild&&(a=n,n=n.parentNode,!ds(n)););r=hs(a),t.offset!==0&&r++}return[n,r]}}findNodeAndOffsetFromLocation(t){let n,r,a=0;for(const l of this.getSignificantNodesForIndex(t.index)){const h=Cs(l);if(t.offset<=a+h)if(xi(l)){if(n=l,r=a,t.offset===r&&Nn(n))break}else n||(n=l,r=a);if(a+=h,a>t.offset)break}return[n,r]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(un(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){const n=[],r=Lr(this.element,{usingFilter:FA});let a=!1;for(;r.nextNode();){const h=r.currentNode;var l;if(Fn(h)){if(l!=null?l++:l=0,l===t)a=!0;else if(a)break}else a&&n.push(h)}return n}}const Cs=function(s){return s.nodeType===Node.TEXT_NODE?Nn(s)?0:s.textContent.length:Lt(s)==="br"||un(s)?1:0},FA=function(s){return NA(s)===NodeFilter.FILTER_ACCEPT?Ah(s):NodeFilter.FILTER_REJECT},NA=function(s){return Yc(s)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Ah=function(s){return un(s.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};class xh{createDOMRangeFromPoint(t){let n,{x:r,y:a}=t;if(document.caretPositionFromPoint){const{offsetNode:l,offset:h}=document.caretPositionFromPoint(r,a);return n=document.createRange(),n.setStart(l,h),n}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(r,a);if(document.body.createTextRange){const l=yi();try{const h=document.body.createTextRange();h.moveToPoint(r,a),h.select()}catch{}return n=yi(),oh(l),n}}getClientRectsForDOMRange(t){const n=Array.from(t.getClientRects());return[n[0],n[n.length-1]]}}class on extends dt{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new bh(this.element),this.pointMapper=new xh,this.lockCount=0,it("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.strict===!1?this.createLocationRangeFromDOMRange(yi()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=X(t);const n=this.createDOMRangeFromLocationRange(t);n&&(oh(n),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=X(t);const n=this.getLocationAtPoint(t[0]),r=this.getLocationAtPoint(t[1]);this.setLocationRange([n,r])}getClientRectAtLocationRange(t){const n=this.createDOMRangeFromLocationRange(t);if(n)return this.getClientRectsForDOMRange(n)[1]}locationIsCursorTarget(t){const n=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return Nn(n)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){const{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,t!=null)return this.setLocationRange(t)}}clearSelection(){var t;return(t=rh())===null||t===void 0?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return((t=yi())===null||t===void 0?void 0:t.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,n){if(t==null||!this.domRangeWithinElement(t))return;const r=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,n);if(!r)return;const a=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,n);return X([r,a])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;const n=()=>{if(this.paused=!1,clearTimeout(r),Array.from(t).forEach(a=>{a.destroy()}),sn(document,this.element))return this.selectionDidChange()},r=setTimeout(n,200);t=["mousemove","keydown"].map(a=>it(a,{onElement:document,withCallback:n}))}selectionDidChange(){if(!this.paused&&!oa(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){var n,r;if((t!=null?t:t=this.createLocationRangeFromDOMRange(yi()))&&!_r(t,this.currentLocationRange))return this.currentLocationRange=t,(n=this.delegate)===null||n===void 0||(r=n.locationRangeDidChange)===null||r===void 0?void 0:r.call(n,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(t){const n=this.findContainerAndOffsetFromLocation(t[0]),r=_e(t)?n:this.findContainerAndOffsetFromLocation(t[1])||n;if(n!=null&&r!=null){const a=document.createRange();return a.setStart(...Array.from(n||[])),a.setEnd(...Array.from(r||[])),a}}getLocationAtPoint(t){const n=this.createDOMRangeFromPoint(t);var r;if(n)return(r=this.createLocationRangeFromDOMRange(n))===null||r===void 0?void 0:r[0]}domRangeWithinElement(t){return t.collapsed?sn(this.element,t.startContainer):sn(this.element,t.startContainer)&&sn(this.element,t.endContainer)}}on.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),on.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),on.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),on.proxyMethod("pointMapper.createDOMRangeFromPoint"),on.proxyMethod("pointMapper.getClientRectsForDOMRange");var yh=Object.freeze({__proto__:null,Attachment:Hn,AttachmentManager:fh,AttachmentPiece:Mn,Block:pe,Composition:He,Document:ee,Editor:vh,HTMLParser:wi,HTMLSanitizer:Ir,LineBreakInsertion:gh,LocationMapper:bh,ManagedAttachment:ct,Piece:gn,PointMapper:xh,SelectionManager:on,SplittableList:Dr,StringPiece:fa,Text:le,UndoManager:Xs}),MA=Object.freeze({__proto__:null,ObjectView:fn,AttachmentView:da,BlockView:lh,DocumentView:Pr,PieceView:ah,PreviewableAttachmentView:sh,TextView:uh});const{lang:Es,css:rn,keyNames:WA}=Li,Rs=function(s){return function(){const t=s.apply(this,arguments);t.do(),this.undos||(this.undos=[]),this.undos.push(t.undo)}};class Ch extends dt{constructor(t,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),zt(this,"makeElementMutable",Rs(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),zt(this,"addToolbar",Rs(()=>{const l=j({tagName:"div",className:rn.attachmentToolbar,data:{trixMutable:!0},childNodes:j({tagName:"div",className:"trix-button-row",childNodes:j({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:j({tagName:"button",className:"trix-button trix-button--remove",textContent:Es.remove,attributes:{title:Es.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&l.appendChild(j({tagName:"div",className:rn.attachmentMetadataContainer,childNodes:j({tagName:"span",className:rn.attachmentMetadata,childNodes:[j({tagName:"span",className:rn.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),j({tagName:"span",className:rn.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),it("click",{onElement:l,withCallback:this.didClickToolbar}),it("click",{onElement:l,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),bi("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:l,attachment:this.attachment}}),{do:()=>this.element.appendChild(l),undo:()=>Ke(l)}})),zt(this,"installCaptionEditor",Rs(()=>{const l=j({tagName:"textarea",className:rn.attachmentCaptionEditor,attributes:{placeholder:Es.captionPlaceholder},data:{trixMutable:!0}});l.value=this.attachmentPiece.getCaption();const h=l.cloneNode();h.classList.add("trix-autoresize-clone"),h.tabIndex=-1;const p=function(){h.value=l.value,l.style.height=h.scrollHeight+"px"};it("input",{onElement:l,withCallback:p}),it("input",{onElement:l,withCallback:this.didInputCaption}),it("keydown",{onElement:l,withCallback:this.didKeyDownCaption}),it("change",{onElement:l,withCallback:this.didChangeCaption}),it("blur",{onElement:l,withCallback:this.didBlurCaption});const A=this.element.querySelector("figcaption"),R=A.cloneNode();return{do:()=>{if(A.style.display="none",R.appendChild(l),R.appendChild(h),R.classList.add("".concat(rn.attachmentCaption,"--editing")),A.parentElement.insertBefore(R,A),p(),this.options.editCaption)return ua(()=>l.focus())},undo(){Ke(R),A.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=n,this.container=r,this.options=a,this.attachment=this.attachmentPiece.attachment,Lt(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let n=this.undos.pop();for(this.savePendingCaption();n;)n(),n=this.undos.pop();(t=this.delegate)===null||t===void 0||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){const l=this.pendingCaption;var t,n,r,a;this.pendingCaption=null,l?(t=this.delegate)===null||t===void 0||(n=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||n===void 0||n.call(t,{caption:l},this.attachment):(r=this.delegate)===null||r===void 0||(a=r.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||a===void 0||a.call(r,"caption",this.attachment)}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var n;if(t.target.getAttribute("data-trix-action")==="remove")return(n=this.delegate)===null||n===void 0?void 0:n.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(t){var n,r;if(WA[t.keyCode]==="return")return t.preventDefault(),this.savePendingCaption(),(n=this.delegate)===null||n===void 0||(r=n.attachmentEditorDidRequestDeselectingAttachment)===null||r===void 0?void 0:r.call(n,this.attachment)}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}}class Eh extends dt{constructor(t,n){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=n,this.documentView=new Pr(this.composition.document,{element:this.element}),it("focus",{onElement:this.element,withCallback:this.didFocus}),it("blur",{onElement:this.element,withCallback:this.didBlur}),it("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),it("mousedown",{onElement:this.element,matchingSelector:an,withCallback:this.didClickAttachment}),it("click",{onElement:this.element,matchingSelector:"a".concat(an),preventDefault:!0})}didFocus(t){var n;const r=()=>{var a,l;if(!this.focused)return this.focused=!0,(a=this.delegate)===null||a===void 0||(l=a.compositionControllerDidFocus)===null||l===void 0?void 0:l.call(a)};return((n=this.blurPromise)===null||n===void 0?void 0:n.then(r))||r()}didBlur(t){this.blurPromise=new Promise(n=>ua(()=>{var r,a;return oa(this.element)||(this.focused=null,(r=this.delegate)===null||r===void 0||(a=r.compositionControllerDidBlur)===null||a===void 0||a.call(r)),this.blurPromise=null,n()}))}didClickAttachment(t,n){var r,a;const l=this.findAttachmentForElement(n),h=!!Ve(t.target,{matchingSelector:"figcaption"});return(r=this.delegate)===null||r===void 0||(a=r.compositionControllerDidSelectAttachment)===null||a===void 0?void 0:a.call(r,l,{editCaption:h})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,n,r,a,l,h;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((r=this.delegate)===null||r===void 0||(a=r.compositionControllerWillSyncDocumentView)===null||a===void 0||a.call(r),this.documentView.sync(),(l=this.delegate)===null||l===void 0||(h=l.compositionControllerDidSyncDocumentView)===null||h===void 0||h.call(l)),(t=this.delegate)===null||t===void 0||(n=t.compositionControllerDidRender)===null||n===void 0?void 0:n.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,n){var r;if(((r=this.attachmentEditor)===null||r===void 0?void 0:r.attachment)===t)return;const a=this.documentView.findElementForObject(t);if(!a)return;this.uninstallAttachmentEditor();const l=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new Ch(l,a,this.element,n),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return(t=this.attachmentEditor)===null||t===void 0?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,n){var r,a;return(r=this.delegate)===null||r===void 0||(a=r.compositionControllerWillUpdateAttachment)===null||a===void 0||a.call(r,n),this.composition.updateAttributesForAttachment(t,n)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,n){var r,a;return(r=this.delegate)===null||r===void 0||(a=r.compositionControllerWillUpdateAttachment)===null||a===void 0||a.call(r,n),this.composition.removeAttributeForAttachment(t,n)}attachmentEditorDidRequestRemovalOfAttachment(t){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidRequestRemovalOfAttachment)===null||r===void 0?void 0:r.call(n,t)}attachmentEditorDidRequestDeselectingAttachment(t){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidRequestDeselectingAttachment)===null||r===void 0?void 0:r.call(n,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}}class Rh extends dt{}const wh="data-trix-mutable",UA="[".concat(wh,"]"),qA={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};class Sh extends dt{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,qA)}stop(){return this.observer.disconnect()}didMutate(t){var n,r;if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length)return(n=this.delegate)===null||n===void 0||(r=n.elementDidMutate)===null||r===void 0||r.call(n,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(n=>this.mutationIsSignificant(n))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(const n of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(n))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!Yc(t)}nodeIsMutable(t){return Ve(t,{matchingSelector:UA})}nodesModifiedByMutation(t){const n=[];switch(t.type){case"attributes":t.attributeName!==wh&&n.push(t.target);break;case"characterData":n.push(t.target.parentNode),n.push(t.target);break;case"childList":n.push(...Array.from(t.addedNodes||[])),n.push(...Array.from(t.removedNodes||[]))}return n}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){const{additions:t,deletions:n}=this.getTextChangesFromCharacterData(),r=this.getTextChangesFromChildList();Array.from(r.additions).forEach(p=>{Array.from(t).includes(p)||t.push(p)}),n.push(...Array.from(r.deletions||[]));const a={},l=t.join("");l&&(a.textAdded=l);const h=n.join("");return h&&(a.textDeleted=h),a}getMutationsByType(t){return Array.from(this.mutations).filter(n=>n.type===t)}getTextChangesFromChildList(){let t,n;const r=[],a=[];return Array.from(this.getMutationsByType("childList")).forEach(l=>{r.push(...Array.from(l.addedNodes||[])),a.push(...Array.from(l.removedNodes||[]))}),r.length===0&&a.length===1&&Fn(a[0])?(t=[],n=[`
`]):(t=Ys(r),n=Ys(a)),{additions:t.filter((l,h)=>l!==n[h]).map(vi),deletions:n.filter((l,h)=>l!==t[h]).map(vi)}}getTextChangesFromCharacterData(){let t,n;const r=this.getMutationsByType("characterData");if(r.length){const a=r[0],l=r[r.length-1],h=function(p,A){let R,S;return p=Ri.box(p),(A=Ri.box(A)).length<p.length?[S,R]=ac(p,A):[R,S]=ac(A,p),{added:R,removed:S}}(vi(a.oldValue),vi(l.target.data));t=h.added,n=h.removed}return{additions:t?[t]:[],deletions:n?[n]:[]}}}const Ys=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];for(const n of Array.from(s))switch(n.nodeType){case Node.TEXT_NODE:t.push(n.data);break;case Node.ELEMENT_NODE:Lt(n)==="br"?t.push(`
`):t.push(...Array.from(Ys(n.childNodes)||[]))}return t};class Lh extends Tr{constructor(t){super(...arguments),this.file=t}perform(t){const n=new FileReader;return n.onerror=()=>t(!1),n.onload=()=>{n.onerror=null;try{n.abort()}catch{}return t(!0,this.file)},n.readAsArrayBuffer(this.file)}}class HA{constructor(t){this.element=t}shouldIgnore(t){return!!Si.samsungAndroid&&(this.previousEvent=this.event,this.event=t,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&jA(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var t;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((t=this.event.data)===null||t===void 0?void 0:t.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var t,n;return((t=this.previousEvent)===null||t===void 0?void 0:t.type)==="keydown"&&((n=this.previousEvent)===null||n===void 0?void 0:n.key)==="Unidentified"}}const jA=(s,t)=>xc(s)===xc(t),zA=new RegExp("(".concat("\uFFFC","|").concat(Or,"|").concat(ze,"|\\s)+"),"g"),xc=s=>s.replace(zA," ").trim();class Br extends dt{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new Sh(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new HA(this.element);for(const n in this.constructor.events)it(n,{onElement:this.element,withCallback:this.handlerFor(n)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidRequestRender)===null||n===void 0?void 0:n.call(t)}requestReparse(){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidRequestReparse)===null||n===void 0||n.call(t),this.requestRender()}attachFiles(t){const n=Array.from(t).map(r=>new Lh(r));return Promise.all(n).then(r=>{this.handleInput(function(){var a,l;return(a=this.delegate)===null||a===void 0||a.inputControllerWillAttachFiles(),(l=this.responder)===null||l===void 0||l.insertFiles(r),this.requestRender()})})}handlerFor(t){return n=>{n.defaultPrevented||this.handleInput(()=>{if(!oa(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(n))return;this.eventName=t,this.constructor.events[t].call(this,n)}})}}handleInput(t){try{var n;(n=this.delegate)===null||n===void 0||n.inputControllerWillHandleInput(),t.call(this)}finally{var r;(r=this.delegate)===null||r===void 0||r.inputControllerDidHandleInput()}}createLinkHTML(t,n){const r=document.createElement("a");return r.href=t,r.textContent=n||t,r.outerHTML}}var ws;zt(Br,"events",{});const{browser:VA,keyNames:_h}=Li;let KA=0;class Le extends Br{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(const n in t){const r=t[n];this.inputSummary[n]=r}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),hn.reset()}elementDidMutate(t){var n,r;return this.isComposing()?(n=this.delegate)===null||n===void 0||(r=n.inputControllerDidAllowUnhandledInput)===null||r===void 0?void 0:r.call(n):this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:n,textDeleted:r}=t;if(this.inputSummary.preferDocument)return!0;const a=n!=null?n===this.inputSummary.textAdded:!this.inputSummary.textAdded,l=r!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,h=[`
`,` 
`].includes(n)&&!a,p=r===`
`&&!l;if(h&&!p||p&&!h){const R=this.getSelectedRange();if(R){var A;const S=h?n.replace(/\n$/,"").length||-1:(n==null?void 0:n.length)||1;if((A=this.responder)!==null&&A!==void 0&&A.positionIsBlockBreak(R[1]+S))return!0}}return a&&l}mutationIsSignificant(t){var n;const r=Object.keys(t).length>0,a=((n=this.compositionInput)===null||n===void 0?void 0:n.getEndData())==="";return r||!a}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new qe(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,n){var r;return((r=this.responder)===null||r===void 0?void 0:r.deleteInDirection(t))!==!1?this.setInputSummary({didDelete:!0}):n?(n.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(t){var n;if(!function(a){if(a==null||!a.setData)return!1;for(const l in rc){const h=rc[l];try{if(a.setData(l,h),!a.getData(l)===h)return!1}catch{return!1}}return!0}(t))return;const r=(n=this.responder)===null||n===void 0?void 0:n.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(r)),t.setData("text/html",Pr.render(r).innerHTML),t.setData("text/plain",r.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){const n={};return Array.from((t==null?void 0:t.types)||[]).forEach(r=>{n[r]=!0}),n.Files||n["application/x-trix-document"]||n["text/html"]||n["text/plain"]}getPastedHTMLUsingHiddenElement(t){const n=this.getSelectedRange(),r={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},a=j({style:r,tagName:"div",editable:!0});return document.body.appendChild(a),a.focus(),requestAnimationFrame(()=>{const l=a.innerHTML;return Ke(a),this.setSelectedRange(n),t(l)})}}zt(Le,"events",{keydown(s){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;const t=_h[s.keyCode];if(t){var n;let a=this.keys;["ctrl","alt","shift","meta"].forEach(l=>{var h;s["".concat(l,"Key")]&&(l==="ctrl"&&(l="control"),a=(h=a)===null||h===void 0?void 0:h[l])}),((n=a)===null||n===void 0?void 0:n[t])!=null&&(this.setInputSummary({keyName:t}),hn.reset(),a[t].call(this,s))}if(eh(s)){const a=String.fromCharCode(s.keyCode).toLowerCase();if(a){var r;const l=["alt","shift"].map(h=>{if(s["".concat(h,"Key")])return h}).filter(h=>h);l.push(a),(r=this.delegate)!==null&&r!==void 0&&r.inputControllerDidReceiveKeyboardCommand(l)&&s.preventDefault()}}},keypress(s){if(this.inputSummary.eventName!=null||s.metaKey||s.ctrlKey&&!s.altKey)return;const t=GA(s);var n,r;return t?((n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping(),(r=this.responder)===null||r===void 0||r.insertString(t),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()})):void 0},textInput(s){const{data:t}=s,{textAdded:n}=this.inputSummary;if(n&&n!==t&&n.toUpperCase()===t){var r;const a=this.getSelectedRange();return this.setSelectedRange([a[0],a[1]+n.length]),(r=this.responder)===null||r===void 0||r.insertString(t),this.setInputSummary({textAdded:t}),this.setSelectedRange(a)}},dragenter(s){s.preventDefault()},dragstart(s){var t,n;return this.serializeSelectionToDataTransfer(s.dataTransfer),this.draggedRange=this.getSelectedRange(),(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidStartDrag)===null||n===void 0?void 0:n.call(t)},dragover(s){if(this.draggedRange||this.canAcceptDataTransfer(s.dataTransfer)){s.preventDefault();const r={x:s.clientX,y:s.clientY};var t,n;if(!qn(r,this.draggingPoint))return this.draggingPoint=r,(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidReceiveDragOverPoint)===null||n===void 0?void 0:n.call(t,this.draggingPoint)}},dragend(s){var t,n;(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidCancelDrag)===null||n===void 0||n.call(t),this.draggedRange=null,this.draggingPoint=null},drop(s){var t,n;s.preventDefault();const r=(t=s.dataTransfer)===null||t===void 0?void 0:t.files,a=s.dataTransfer.getData("application/x-trix-document"),l={x:s.clientX,y:s.clientY};if((n=this.responder)===null||n===void 0||n.setLocationRangeFromPointRange(l),r!=null&&r.length)this.attachFiles(r);else if(this.draggedRange){var h,p;(h=this.delegate)===null||h===void 0||h.inputControllerWillMoveText(),(p=this.responder)===null||p===void 0||p.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(a){var A;const R=ee.fromJSONString(a);(A=this.responder)===null||A===void 0||A.insertDocument(R),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(s){var t,n;if((t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(s.clipboardData)&&s.preventDefault(),(n=this.delegate)===null||n===void 0||n.inputControllerWillCutText(),this.deleteInDirection("backward"),s.defaultPrevented))return this.requestRender()},copy(s){var t;(t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(s.clipboardData)&&s.preventDefault()},paste(s){const t=s.clipboardData||s.testClipboardData,n={clipboard:t};if(!t||XA(s))return void this.getPastedHTMLUsingHiddenElement(at=>{var k,Kt,Et;return n.type="text/html",n.html=at,(k=this.delegate)===null||k===void 0||k.inputControllerWillPaste(n),(Kt=this.responder)===null||Kt===void 0||Kt.insertHTML(n.html),this.requestRender(),(Et=this.delegate)===null||Et===void 0?void 0:Et.inputControllerDidPaste(n)});const r=t.getData("URL"),a=t.getData("text/html"),l=t.getData("public.url-name");if(r){var h,p,A;let at;n.type="text/html",at=l?ca(l).trim():r,n.html=this.createLinkHTML(r,at),(h=this.delegate)===null||h===void 0||h.inputControllerWillPaste(n),this.setInputSummary({textAdded:at,didDelete:this.selectionIsExpanded()}),(p=this.responder)===null||p===void 0||p.insertHTML(n.html),this.requestRender(),(A=this.delegate)===null||A===void 0||A.inputControllerDidPaste(n)}else if(th(t)){var R,S,O;n.type="text/plain",n.string=t.getData("text/plain"),(R=this.delegate)===null||R===void 0||R.inputControllerWillPaste(n),this.setInputSummary({textAdded:n.string,didDelete:this.selectionIsExpanded()}),(S=this.responder)===null||S===void 0||S.insertString(n.string),this.requestRender(),(O=this.delegate)===null||O===void 0||O.inputControllerDidPaste(n)}else if(a){var L,K,Tt;n.type="text/html",n.html=a,(L=this.delegate)===null||L===void 0||L.inputControllerWillPaste(n),(K=this.responder)===null||K===void 0||K.insertHTML(n.html),this.requestRender(),(Tt=this.delegate)===null||Tt===void 0||Tt.inputControllerDidPaste(n)}else if(Array.from(t.types).includes("Files")){var ot,Q;const at=(ot=t.items)===null||ot===void 0||(ot=ot[0])===null||ot===void 0||(Q=ot.getAsFile)===null||Q===void 0?void 0:Q.call(ot);if(at){var ft,Vt,st;const k=JA(at);!at.name&&k&&(at.name="pasted-file-".concat(++KA,".").concat(k)),n.type="File",n.file=at,(ft=this.delegate)===null||ft===void 0||ft.inputControllerWillAttachFiles(),(Vt=this.responder)===null||Vt===void 0||Vt.insertFile(n.file),this.requestRender(),(st=this.delegate)===null||st===void 0||st.inputControllerDidPaste(n)}}s.preventDefault()},compositionstart(s){return this.getCompositionInput().start(s.data)},compositionupdate(s){return this.getCompositionInput().update(s.data)},compositionend(s){return this.getCompositionInput().end(s.data)},beforeinput(s){this.inputSummary.didInput=!0},input(s){return this.inputSummary.didInput=!0,s.stopPropagation()}}),zt(Le,"keys",{backspace(s){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",s)},delete(s){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",s)},return(s){var t,n;return this.setInputSummary({preferDocument:!0}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0?void 0:n.insertLineBreak()},tab(s){var t,n;(t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel()&&((n=this.responder)===null||n===void 0||n.increaseNestingLevel(),this.requestRender(),s.preventDefault())},left(s){var t;if(this.selectionIsInCursorTarget())return s.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},right(s){var t;if(this.selectionIsInCursorTarget())return s.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},control:{d(s){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",s)},h(s){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",s)},o(s){var t,n;return s.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(s){var t,n;(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(`
`),this.requestRender(),s.preventDefault()},tab(s){var t,n;(t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel()&&((n=this.responder)===null||n===void 0||n.decreaseNestingLevel(),this.requestRender(),s.preventDefault())},left(s){if(this.selectionIsInCursorTarget())return s.preventDefault(),this.expandSelectionInDirection("backward")},right(s){if(this.selectionIsInCursorTarget())return s.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(s){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}},meta:{backspace(s){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}}}),Le.proxyMethod("responder?.getSelectedRange"),Le.proxyMethod("responder?.setSelectedRange"),Le.proxyMethod("responder?.expandSelectionInDirection"),Le.proxyMethod("responder?.selectionIsInCursorTarget"),Le.proxyMethod("responder?.selectionIsExpanded");const JA=s=>{var t;return(t=s.type)===null||t===void 0||(t=t.match(/\/(\w+)$/))===null||t===void 0?void 0:t[1]},$A=!((ws=" ".codePointAt)===null||ws===void 0||!ws.call(" ",0)),GA=function(s){if(s.key&&$A&&s.key.codePointAt(0)===s.keyCode)return s.key;{let t;if(s.which===null?t=s.keyCode:s.which!==0&&s.charCode!==0&&(t=s.charCode),t!=null&&_h[t]!=="escape")return Ri.fromCodepoints([t]).toString()}},XA=function(s){const t=s.clipboardData;if(t){if(t.types.includes("text/html")){for(const n of t.types){const r=/^CorePasteboardFlavorType/.test(n),a=/^dyn\./.test(n)&&t.getData(n);if(r||a)return!0}return!1}{const n=t.types.includes("com.apple.webarchive"),r=t.types.includes("com.apple.flat-rtfd");return n||r}}};class qe extends dt{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){if(this.data.start=t,this.isSignificant()){var n,r;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((r=this.responder)===null||r===void 0||r.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(n=this.responder)===null||n===void 0?void 0:n.getSelectedRange()}}update(t){if(this.data.update=t,this.isSignificant()){const n=this.selectPlaceholder();n&&(this.forgetPlaceholder(),this.range=n)}}end(t){return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping(),(r=this.responder)===null||r===void 0||r.setSelectedRange(this.range),(a=this.responder)===null||a===void 0||a.insertString(this.data.end),(l=this.responder)===null||l===void 0?void 0:l.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var n,r,a,l}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!VA.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var t,n;return((t=this.data.start)===null||t===void 0?void 0:t.length)===0&&((n=this.data.end)===null||n===void 0?void 0:n.length)>0&&this.range}}qe.proxyMethod("inputController.setInputSummary"),qe.proxyMethod("inputController.requestRender"),qe.proxyMethod("inputController.requestReparse"),qe.proxyMethod("responder?.selectionIsExpanded"),qe.proxyMethod("responder?.insertPlaceholder"),qe.proxyMethod("responder?.selectPlaceholder"),qe.proxyMethod("responder?.forgetPlaceholder");class Ci extends Br{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidAllowUnhandledInput)===null||n===void 0?void 0:n.call(t):void 0:this.reparse();var t,n}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t,n;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(n=this.delegate)===null||n===void 0||n.render(),(t=this.afterRender)===null||t===void 0||t.call(this),this.afterRender=null}reparse(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.reparse()}insertString(){var t;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var a;return(a=this.responder)===null||a===void 0?void 0:a.insertString(n,r)})}toggleAttributeIfSupported(t){var n;if(Ks().includes(t))return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.toggleCurrentAttribute(t)})}activateAttributeIfSupported(t,n){var r;if(Ks().includes(t))return(r=this.delegate)===null||r===void 0||r.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var a;return(a=this.responder)===null||a===void 0?void 0:a.setCurrentAttribute(t,n)})}deleteInDirection(t){let{recordUndoEntry:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var r;n&&((r=this.delegate)===null||r===void 0||r.inputControllerWillPerformTyping());const a=()=>{var h;return(h=this.responder)===null||h===void 0?void 0:h.deleteInDirection(t)},l=this.getTargetDOMRange({minLength:this.composing?1:2});return l?this.withTargetDOMRange(l,a):a()}withTargetDOMRange(t,n){var r;return typeof t=="function"&&(n=t,t=this.getTargetDOMRange()),t?(r=this.responder)===null||r===void 0?void 0:r.withTargetDOMRange(t,n.bind(this)):(hn.reset(),n.call(this))}getTargetDOMRange(){var t,n;let{minLength:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0};const a=(t=(n=this.event).getTargetRanges)===null||t===void 0?void 0:t.call(n);if(a&&a.length){const l=YA(a[0]);if(r===0||l.toString().length>=r)return l}}withEvent(t,n){let r;this.event=t;try{r=n.call(this)}finally{this.event=null}return r}}zt(Ci,"events",{keydown(s){if(eh(s)){var t;const n=tx(s);(t=this.delegate)!==null&&t!==void 0&&t.inputControllerDidReceiveKeyboardCommand(n)&&s.preventDefault()}else{let n=s.key;s.altKey&&(n+="+Alt"),s.shiftKey&&(n+="+Shift");const r=this.constructor.keys[n];if(r)return this.withEvent(s,r)}},paste(s){var t;let n;const r=(t=s.clipboardData)===null||t===void 0?void 0:t.getData("URL");return Th(s)?(s.preventDefault(),this.attachFiles(s.clipboardData.files)):QA(s)?(s.preventDefault(),n={type:"text/plain",string:s.clipboardData.getData("text/plain")},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(n),(l=this.responder)===null||l===void 0||l.insertString(n.string),this.render(),(h=this.delegate)===null||h===void 0?void 0:h.inputControllerDidPaste(n)):r?(s.preventDefault(),n={type:"text/html",html:this.createLinkHTML(r)},(p=this.delegate)===null||p===void 0||p.inputControllerWillPaste(n),(A=this.responder)===null||A===void 0||A.insertHTML(n.html),this.render(),(R=this.delegate)===null||R===void 0?void 0:R.inputControllerDidPaste(n)):void 0;var a,l,h,p,A,R},beforeinput(s){const t=this.constructor.inputTypes[s.inputType];t&&(this.withEvent(s,t),this.scheduleRender())},input(s){hn.reset()},dragstart(s){var t,n;(t=this.responder)!==null&&t!==void 0&&t.selectionContainsAttachments()&&(s.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(n=this.responder)===null||n===void 0?void 0:n.getSelectedRange(),point:Ls(s)})},dragenter(s){Ss(s)&&s.preventDefault()},dragover(s){if(this.dragging){s.preventDefault();const n=Ls(s);var t;if(!qn(n,this.dragging.point))return this.dragging.point=n,(t=this.responder)===null||t===void 0?void 0:t.setLocationRangeFromPointRange(n)}else Ss(s)&&s.preventDefault()},drop(s){var t,n;if(this.dragging)return s.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),(n=this.responder)===null||n===void 0||n.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(Ss(s)){var r;s.preventDefault();const a=Ls(s);return(r=this.responder)===null||r===void 0||r.setLocationRangeFromPointRange(a),this.attachFiles(s.dataTransfer.files)}},dragend(){var s;this.dragging&&((s=this.responder)===null||s===void 0||s.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(s){this.composing&&(this.composing=!1,Si.recentAndroid||this.scheduleRender())}}),zt(Ci,"keys",{ArrowLeft(){var s,t;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},ArrowRight(){var s,t;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},Backspace(){var s,t,n;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.deleteInDirection("backward"),this.render()},Tab(){var s,t;if((s=this.responder)!==null&&s!==void 0&&s.canIncreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.render()},"Tab+Shift"(){var s,t;if((s=this.responder)!==null&&s!==void 0&&s.canDecreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.render()}}),zt(Ci,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var s;this.deleteByDragRange=(s=this.responder)===null||s===void 0?void 0:s.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var s;if((s=this.responder)!==null&&s!==void 0&&s.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var s;if((s=this.responder)!==null&&s!==void 0&&s.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(const n in(s=this.responder)===null||s===void 0?void 0:s.getCurrentAttributes()){var s,t;(t=this.responder)===null||t===void 0||t.removeCurrentAttribute(n)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var s;return(s=this.delegate)===null||s===void 0?void 0:s.inputControllerWillPerformRedo()},historyUndo(){var s;return(s=this.delegate)===null||s===void 0?void 0:s.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){const s=this.deleteByDragRange;var t;if(s)return this.deleteByDragRange=null,(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.moveTextFromRange(s)})},insertFromPaste(){const{dataTransfer:s}=this.event,t={dataTransfer:s},n=s.getData("URL"),r=s.getData("text/html");if(n){var a;let A;this.event.preventDefault(),t.type="text/html";const R=s.getData("public.url-name");A=R?ca(R).trim():n,t.html=this.createLinkHTML(n,A),(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var S;return(S=this.responder)===null||S===void 0?void 0:S.insertHTML(t.html)}),this.afterRender=()=>{var S;return(S=this.delegate)===null||S===void 0?void 0:S.inputControllerDidPaste(t)}}else if(th(s)){var l;t.type="text/plain",t.string=s.getData("text/plain"),(l=this.delegate)===null||l===void 0||l.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var A;return(A=this.responder)===null||A===void 0?void 0:A.insertString(t.string)}),this.afterRender=()=>{var A;return(A=this.delegate)===null||A===void 0?void 0:A.inputControllerDidPaste(t)}}else if(ZA(this.event)){var h;t.type="File",t.file=s.files[0],(h=this.delegate)===null||h===void 0||h.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var A;return(A=this.responder)===null||A===void 0?void 0:A.insertFile(t.file)}),this.afterRender=()=>{var A;return(A=this.delegate)===null||A===void 0?void 0:A.inputControllerDidPaste(t)}}else if(r){var p;this.event.preventDefault(),t.type="text/html",t.html=r,(p=this.delegate)===null||p===void 0||p.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var A;return(A=this.responder)===null||A===void 0?void 0:A.insertHTML(t.html)}),this.afterRender=()=>{var A;return(A=this.delegate)===null||A===void 0?void 0:A.inputControllerDidPaste(t)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var s;return(s=this.delegate)===null||s===void 0||s.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()})},insertReplacementText(){const s=this.event.dataTransfer.getData("text/plain"),t=this.event.getTargetRanges()[0];this.withTargetDOMRange(t,()=>{this.insertString(s,{updatePosition:!1})})},insertText(){var s;return this.insertString(this.event.data||((s=this.event.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});const YA=function(s){const t=document.createRange();return t.setStart(s.startContainer,s.startOffset),t.setEnd(s.endContainer,s.endOffset),t},Ss=s=>{var t;return Array.from(((t=s.dataTransfer)===null||t===void 0?void 0:t.types)||[]).includes("Files")},ZA=s=>{var t;return((t=s.dataTransfer.files)===null||t===void 0?void 0:t[0])&&!Th(s)&&!(n=>{let{dataTransfer:r}=n;return r.types.includes("Files")&&r.types.includes("text/html")&&r.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(s)},Th=function(s){const t=s.clipboardData;if(t)return Array.from(t.types).filter(n=>n.match(/file/i)).length===t.types.length&&t.files.length>=1},QA=function(s){const t=s.clipboardData;if(t)return t.types.includes("text/plain")&&t.types.length===1},tx=function(s){const t=[];return s.altKey&&t.push("alt"),s.shiftKey&&t.push("shift"),t.push(s.key),t},Ls=s=>({x:s.clientX,y:s.clientY}),Zs="[data-trix-attribute]",Qs="[data-trix-action]",ex="".concat(Zs,", ").concat(Qs),Fr="[data-trix-dialog]",nx="".concat(Fr,"[data-trix-active]"),ix="".concat(Fr," [data-trix-method]"),yc="".concat(Fr," [data-trix-input]"),Cc=(s,t)=>(t||(t=Bn(s)),s.querySelector("[data-trix-input][name='".concat(t,"']"))),Ec=s=>s.getAttribute("data-trix-action"),Bn=s=>s.getAttribute("data-trix-attribute")||s.getAttribute("data-trix-dialog-attribute");class Dh extends dt{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),it("mousedown",{onElement:this.element,matchingSelector:Qs,withCallback:this.didClickActionButton}),it("mousedown",{onElement:this.element,matchingSelector:Zs,withCallback:this.didClickAttributeButton}),it("click",{onElement:this.element,matchingSelector:ex,preventDefault:!0}),it("click",{onElement:this.element,matchingSelector:ix,withCallback:this.didClickDialogButton}),it("keydown",{onElement:this.element,matchingSelector:yc,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,n){var r;(r=this.delegate)===null||r===void 0||r.toolbarDidClickButton(),t.preventDefault();const a=Ec(n);return this.getDialog(a)?this.toggleDialog(a):(l=this.delegate)===null||l===void 0?void 0:l.toolbarDidInvokeAction(a,n);var l}didClickAttributeButton(t,n){var r;(r=this.delegate)===null||r===void 0||r.toolbarDidClickButton(),t.preventDefault();const a=Bn(n);var l;return this.getDialog(a)?this.toggleDialog(a):(l=this.delegate)===null||l===void 0||l.toolbarDidToggleAttribute(a),this.refreshAttributeButtons()}didClickDialogButton(t,n){const r=Ve(n,{matchingSelector:Fr});return this[n.getAttribute("data-trix-method")].call(this,r)}didKeyDownDialogInput(t,n){if(t.keyCode===13){t.preventDefault();const r=n.getAttribute("name"),a=this.getDialog(r);this.setAttribute(a)}if(t.keyCode===27)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,n)=>{t.disabled=this.actions[n]===!1})}eachActionButton(t){return Array.from(this.element.querySelectorAll(Qs)).map(n=>t(n,Ec(n)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,n)=>(t.disabled=this.attributes[n]===!1,this.attributes[n]||this.dialogIsVisible(n)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(Zs)).map(n=>t(n,Bn(n)))}applyKeyboardCommand(t){const n=JSON.stringify(t.sort());for(const r of Array.from(this.element.querySelectorAll("[data-trix-key]"))){const a=r.getAttribute("data-trix-key").split("+");if(JSON.stringify(a.sort())===n)return bi("mousedown",{onElement:r}),!0}return!1}dialogIsVisible(t){const n=this.getDialog(t);if(n)return n.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var n,r;this.hideDialog(),(n=this.delegate)===null||n===void 0||n.toolbarWillShowDialog();const a=this.getDialog(t);a.setAttribute("data-trix-active",""),a.classList.add("trix-active"),Array.from(a.querySelectorAll("input[disabled]")).forEach(h=>{h.removeAttribute("disabled")});const l=Bn(a);if(l){const h=Cc(a,t);h&&(h.value=this.attributes[l]||"",h.select())}return(r=this.delegate)===null||r===void 0?void 0:r.toolbarDidShowDialog(t)}setAttribute(t){const n=Bn(t),r=Cc(t,n);return r.willValidate&&!r.checkValidity()?(r.setAttribute("data-trix-validate",""),r.classList.add("trix-validate"),r.focus()):((a=this.delegate)===null||a===void 0||a.toolbarDidUpdateAttribute(n,r.value),this.hideDialog());var a}removeAttribute(t){var n;const r=Bn(t);return(n=this.delegate)===null||n===void 0||n.toolbarDidRemoveAttribute(r),this.hideDialog()}hideDialog(){const t=this.element.querySelector(nx);var n;if(t)return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidHideDialog((r=>r.getAttribute("data-trix-dialog"))(t))}resetDialogInputs(){Array.from(this.element.querySelectorAll(yc)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}}class Ei extends Rh{constructor(t){let{editorElement:n,document:r,html:a}=t;super(...arguments),this.editorElement=n,this.selectionManager=new on(this.editorElement),this.selectionManager.delegate=this,this.composition=new He,this.composition.delegate=this,this.attachmentManager=new fh(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=sa.getLevel()===2?new Ci(this.editorElement):new Le(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Eh(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Dh(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new vh(this.composition,this.selectionManager,this.editorElement),r?this.editor.loadDocument(r):this.editor.loadHTML(a)}registerSelectionManager(){return hn.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return hn.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){const n=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:n})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);const n=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:n}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){const n=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:n})}compositionDidStartEditingAttachment(t,n){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,n),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,n){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,n)}compositionControllerDidRequestDeselectingAttachment(t){const n=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(n[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!_r(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t,n){return this.invokeAction(t,n)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,n){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,n),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){return!!this.actionIsExternal(t)||!((n=this.actions[t])===null||n===void 0||(n=n.test)===null||n===void 0||!n.call(this));var n}invokeAction(t,n){return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t,invokingElement:n}):(r=this.actions[t])===null||r===void 0||(r=r.perform)===null||r===void 0?void 0:r.call(this);var r}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){const t={};for(const n in this.actions)t[n]=this.canInvokeAction(n);return t}updateCurrentActions(){const t=this.getCurrentActions();if(!qn(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(a=>{const{document:l,selectedRange:h}=t;t=a.call(this.editor,t)||{},t.document||(t.document=l),t.selectedRange||(t.selectedRange=h)}),n=t,r=this.composition.getSnapshot(),!_r(n.selectedRange,r.selectedRange)||!n.document.isEqualTo(r.document))return this.composition.loadSnapshot(t);var n,r}updateInputElement(){const t=function(n,r){const a=OA[r];if(a)return a(n);throw new Error("unknown content type: ".concat(r))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setInputElementValue(t)}notifyEditorElement(t,n){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,n)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){const n=ht(t),r=this.selectionManager.getLocationRange();if(n||!_e(r))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return[this.getLocationContext(),this.getTimeContext(),...Array.from(n)]}getLocationContext(){const t=this.selectionManager.getLocationRange();return _e(t)?t[0].index:t}getTimeContext(){return js.interval>0?Math.floor(new Date().getTime()/js.interval):0}isFocused(){var t;return this.editorElement===((t=this.editorElement.ownerDocument)===null||t===void 0?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}}zt(Ei,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return sa.pickFiles(this.editor.insertFiles)}}}),Ei.proxyMethod("getSelectionManager().setLocationRange"),Ei.proxyMethod("getSelectionManager().getLocationRange");var rx=Object.freeze({__proto__:null,AttachmentEditorController:Ch,CompositionController:Eh,Controller:Rh,EditorController:Ei,InputController:Br,Level0InputController:Le,Level2InputController:Ci,ToolbarController:Dh}),ox=Object.freeze({__proto__:null,MutationObserver:Sh,SelectionChangeObserver:ih}),sx=Object.freeze({__proto__:null,FileVerificationOperation:Lh,ImagePreloadOperation:ch});Qc("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);class kh extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=Zc.getDefaultHTML())}}let ax=0;const ux=function(s){if(!s.hasAttribute("contenteditable"))return s.setAttribute("contenteditable",""),function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.times=1,it(t,n)}("focus",{onElement:s,withCallback:()=>lx(s)})},lx=function(s){return cx(s),hx()},cx=function(s){var t,n;if((t=(n=document).queryCommandSupported)!==null&&t!==void 0&&t.call(n,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),it("mscontrolselect",{onElement:s,preventDefault:!0})},hx=function(s){var t,n;if((t=(n=document).queryCommandSupported)!==null&&t!==void 0&&t.call(n,"DefaultParagraphSeparator")){const{tagName:r}=_t.default;if(["div","p"].includes(r))return document.execCommand("DefaultParagraphSeparator",!1,r)}},Rc=Si.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};Qc("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(an,` figcaption textarea {
    resize: none;
}

%t `).concat(an,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(an,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(Rc.display,` !important;
    width: `).concat(Rc.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));class Oh extends HTMLElement{get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++ax),this.trixId)}get labels(){const t=[];this.id&&this.ownerDocument&&t.push(...Array.from(this.ownerDocument.querySelectorAll("label[for='".concat(this.id,"']"))||[]));const n=Ve(this,{matchingSelector:"label"});return n&&[this,null].includes(n.control)&&t.push(n),t}get toolbarElement(){var t;if(this.hasAttribute("toolbar"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("toolbar"));if(this.parentNode){const n="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",n);const r=j("trix-toolbar",{id:n});return this.parentNode.insertBefore(r,this),r}}get form(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.form}get inputElement(){var t;if(this.hasAttribute("input"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("input"));if(this.parentNode){const n="trix-input-".concat(this.trixId);this.setAttribute("input",n);const r=j("input",{type:"hidden",id:n});return this.parentNode.insertBefore(r,this.nextElementSibling),r}}get editor(){var t;return(t=this.editorController)===null||t===void 0?void 0:t.editor}get name(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.name}get value(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.value}set value(t){var n;this.defaultValue=t,(n=this.editor)===null||n===void 0||n.loadHTML(this.defaultValue)}notify(t,n){if(this.editorController)return bi("trix-".concat(t),{onElement:this,attributes:n})}setInputElementValue(t){this.inputElement&&(this.inputElement.value=t)}connectedCallback(){this.hasAttribute("data-trix-internal")||(ux(this),function(t){t.hasAttribute("role")||t.setAttribute("role","textbox")}(this),function(t){if(t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"))return;const n=function(){const r=Array.from(t.labels).map(l=>{if(!l.contains(t))return l.textContent}).filter(l=>l),a=r.join(" ");return a?t.setAttribute("aria-label",a):t.removeAttribute("aria-label")};n(),it("focus",{onElement:t,withCallback:n})}(this),this.editorController||(bi("trix-before-initialize",{onElement:this}),this.editorController=new Ei({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>bi("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),this.registerResetListener(),this.registerClickListener(),function(t){!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t&&t.focus()}(this))}disconnectedCallback(){var t;return(t=this.editorController)===null||t===void 0||t.unregisterSelectionManager(),this.unregisterResetListener(),this.unregisterClickListener()}registerResetListener(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)}unregisterResetListener(){return window.removeEventListener("reset",this.resetListener,!1)}registerClickListener(){return this.clickListener=this.clickBubbled.bind(this),window.addEventListener("click",this.clickListener,!1)}unregisterClickListener(){return window.removeEventListener("click",this.clickListener,!1)}resetBubbled(t){if(!t.defaultPrevented&&t.target===this.form)return this.reset()}clickBubbled(t){if(t.defaultPrevented||this.contains(t.target))return;const n=Ve(t.target,{matchingSelector:"label"});return n&&Array.from(this.labels).includes(n)?this.focus():void 0}reset(){this.value=this.defaultValue}}const ta={VERSION:U0,config:Li,core:IA,models:yh,views:MA,controllers:rx,observers:ox,operations:sx,elements:Object.freeze({__proto__:null,TrixEditorElement:Oh,TrixToolbarElement:kh}),filters:Object.freeze({__proto__:null,Filter:ph,attachmentGalleryFilter:mh})};Object.assign(ta,yh),window.Trix=ta,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",kh),customElements.get("trix-editor")||customElements.define("trix-editor",Oh)},0);window.Trix=ta;var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ea={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(s,t){(function(){var n,r="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",p="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",R=500,S="__lodash_placeholder__",O=1,L=2,K=4,Tt=1,ot=2,Q=1,ft=2,Vt=4,st=8,at=16,k=32,Kt=64,Et=128,me=256,mn=512,_i=30,zn="...",Bt=800,Te=16,ce=1,qr=2,Vn=3,Je=1/0,De=9007199254740991,Xh=17976931348623157e292,Ti=0/0,he=4294967295,Yh=he-1,Zh=he>>>1,Qh=[["ary",Et],["bind",Q],["bindKey",ft],["curry",st],["curryRight",at],["flip",mn],["partial",k],["partialRight",Kt],["rearg",me]],vn="[object Arguments]",Di="[object Array]",td="[object AsyncFunction]",Kn="[object Boolean]",Jn="[object Date]",ed="[object DOMException]",ki="[object Error]",Oi="[object Function]",Ca="[object GeneratorFunction]",ne="[object Map]",$n="[object Number]",nd="[object Null]",ve="[object Object]",Ea="[object Promise]",id="[object Proxy]",Gn="[object RegExp]",ie="[object Set]",Xn="[object String]",Ii="[object Symbol]",rd="[object Undefined]",Yn="[object WeakMap]",od="[object WeakSet]",Zn="[object ArrayBuffer]",bn="[object DataView]",Hr="[object Float32Array]",jr="[object Float64Array]",zr="[object Int8Array]",Vr="[object Int16Array]",Kr="[object Int32Array]",Jr="[object Uint8Array]",$r="[object Uint8ClampedArray]",Gr="[object Uint16Array]",Xr="[object Uint32Array]",sd=/\b__p \+= '';/g,ad=/\b(__p \+=) '' \+/g,ud=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ra=/&(?:amp|lt|gt|quot|#39);/g,wa=/[&<>"']/g,ld=RegExp(Ra.source),cd=RegExp(wa.source),hd=/<%-([\s\S]+?)%>/g,dd=/<%([\s\S]+?)%>/g,Sa=/<%=([\s\S]+?)%>/g,fd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gd=/^\w*$/,pd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yr=/[\\^$.*+?()[\]{}|]/g,md=RegExp(Yr.source),Zr=/^\s+/,vd=/\s/,bd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ad=/\{\n\/\* \[wrapped with (.+)\] \*/,xd=/,? & /,yd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cd=/[()=,{}\[\]\/\s]/,Ed=/\\(\\)?/g,Rd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,La=/\w*$/,wd=/^[-+]0x[0-9a-f]+$/i,Sd=/^0b[01]+$/i,Ld=/^\[object .+?Constructor\]$/,_d=/^0o[0-7]+$/i,Td=/^(?:0|[1-9]\d*)$/,Dd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pi=/($^)/,kd=/['\n\r\u2028\u2029\\]/g,Bi="\\ud800-\\udfff",Od="\\u0300-\\u036f",Id="\\ufe20-\\ufe2f",Pd="\\u20d0-\\u20ff",_a=Od+Id+Pd,Ta="\\u2700-\\u27bf",Da="a-z\\xdf-\\xf6\\xf8-\\xff",Bd="\\xac\\xb1\\xd7\\xf7",Fd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nd="\\u2000-\\u206f",Md=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ka="A-Z\\xc0-\\xd6\\xd8-\\xde",Oa="\\ufe0e\\ufe0f",Ia=Bd+Fd+Nd+Md,Qr="['\u2019]",Wd="["+Bi+"]",Pa="["+Ia+"]",Fi="["+_a+"]",Ba="\\d+",Ud="["+Ta+"]",Fa="["+Da+"]",Na="[^"+Bi+Ia+Ba+Ta+Da+ka+"]",to="\\ud83c[\\udffb-\\udfff]",qd="(?:"+Fi+"|"+to+")",Ma="[^"+Bi+"]",eo="(?:\\ud83c[\\udde6-\\uddff]){2}",no="[\\ud800-\\udbff][\\udc00-\\udfff]",An="["+ka+"]",Wa="\\u200d",Ua="(?:"+Fa+"|"+Na+")",Hd="(?:"+An+"|"+Na+")",qa="(?:"+Qr+"(?:d|ll|m|re|s|t|ve))?",Ha="(?:"+Qr+"(?:D|LL|M|RE|S|T|VE))?",ja=qd+"?",za="["+Oa+"]?",jd="(?:"+Wa+"(?:"+[Ma,eo,no].join("|")+")"+za+ja+")*",zd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Va=za+ja+jd,Kd="(?:"+[Ud,eo,no].join("|")+")"+Va,Jd="(?:"+[Ma+Fi+"?",Fi,eo,no,Wd].join("|")+")",$d=RegExp(Qr,"g"),Gd=RegExp(Fi,"g"),io=RegExp(to+"(?="+to+")|"+Jd+Va,"g"),Xd=RegExp([An+"?"+Fa+"+"+qa+"(?="+[Pa,An,"$"].join("|")+")",Hd+"+"+Ha+"(?="+[Pa,An+Ua,"$"].join("|")+")",An+"?"+Ua+"+"+qa,An+"+"+Ha,Vd,zd,Ba,Kd].join("|"),"g"),Yd=RegExp("["+Wa+Bi+_a+Oa+"]"),Zd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tf=-1,tt={};tt[Hr]=tt[jr]=tt[zr]=tt[Vr]=tt[Kr]=tt[Jr]=tt[$r]=tt[Gr]=tt[Xr]=!0,tt[vn]=tt[Di]=tt[Zn]=tt[Kn]=tt[bn]=tt[Jn]=tt[ki]=tt[Oi]=tt[ne]=tt[$n]=tt[ve]=tt[Gn]=tt[ie]=tt[Xn]=tt[Yn]=!1;var Z={};Z[vn]=Z[Di]=Z[Zn]=Z[bn]=Z[Kn]=Z[Jn]=Z[Hr]=Z[jr]=Z[zr]=Z[Vr]=Z[Kr]=Z[ne]=Z[$n]=Z[ve]=Z[Gn]=Z[ie]=Z[Xn]=Z[Ii]=Z[Jr]=Z[$r]=Z[Gr]=Z[Xr]=!0,Z[ki]=Z[Oi]=Z[Yn]=!1;var ef={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},nf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},of={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sf=parseFloat,af=parseInt,Ka=typeof mi=="object"&&mi&&mi.Object===Object&&mi,uf=typeof self=="object"&&self&&self.Object===Object&&self,bt=Ka||uf||Function("return this")(),ro=t&&!t.nodeType&&t,$e=ro&&!0&&s&&!s.nodeType&&s,Ja=$e&&$e.exports===ro,oo=Ja&&Ka.process,Jt=function(){try{var v=$e&&$e.require&&$e.require("util").types;return v||oo&&oo.binding&&oo.binding("util")}catch{}}(),$a=Jt&&Jt.isArrayBuffer,Ga=Jt&&Jt.isDate,Xa=Jt&&Jt.isMap,Ya=Jt&&Jt.isRegExp,Za=Jt&&Jt.isSet,Qa=Jt&&Jt.isTypedArray;function Ft(v,y,x){switch(x.length){case 0:return v.call(y);case 1:return v.call(y,x[0]);case 2:return v.call(y,x[0],x[1]);case 3:return v.call(y,x[0],x[1],x[2])}return v.apply(y,x)}function lf(v,y,x,T){for(var F=-1,J=v==null?0:v.length;++F<J;){var gt=v[F];y(T,gt,x(gt),v)}return T}function $t(v,y){for(var x=-1,T=v==null?0:v.length;++x<T&&y(v[x],x,v)!==!1;);return v}function cf(v,y){for(var x=v==null?0:v.length;x--&&y(v[x],x,v)!==!1;);return v}function tu(v,y){for(var x=-1,T=v==null?0:v.length;++x<T;)if(!y(v[x],x,v))return!1;return!0}function ke(v,y){for(var x=-1,T=v==null?0:v.length,F=0,J=[];++x<T;){var gt=v[x];y(gt,x,v)&&(J[F++]=gt)}return J}function Ni(v,y){var x=v==null?0:v.length;return!!x&&xn(v,y,0)>-1}function so(v,y,x){for(var T=-1,F=v==null?0:v.length;++T<F;)if(x(y,v[T]))return!0;return!1}function et(v,y){for(var x=-1,T=v==null?0:v.length,F=Array(T);++x<T;)F[x]=y(v[x],x,v);return F}function Oe(v,y){for(var x=-1,T=y.length,F=v.length;++x<T;)v[F+x]=y[x];return v}function ao(v,y,x,T){var F=-1,J=v==null?0:v.length;for(T&&J&&(x=v[++F]);++F<J;)x=y(x,v[F],F,v);return x}function hf(v,y,x,T){var F=v==null?0:v.length;for(T&&F&&(x=v[--F]);F--;)x=y(x,v[F],F,v);return x}function uo(v,y){for(var x=-1,T=v==null?0:v.length;++x<T;)if(y(v[x],x,v))return!0;return!1}var df=lo("length");function ff(v){return v.split("")}function gf(v){return v.match(yd)||[]}function eu(v,y,x){var T;return x(v,function(F,J,gt){if(y(F,J,gt))return T=J,!1}),T}function Mi(v,y,x,T){for(var F=v.length,J=x+(T?1:-1);T?J--:++J<F;)if(y(v[J],J,v))return J;return-1}function xn(v,y,x){return y===y?Sf(v,y,x):Mi(v,nu,x)}function pf(v,y,x,T){for(var F=x-1,J=v.length;++F<J;)if(T(v[F],y))return F;return-1}function nu(v){return v!==v}function iu(v,y){var x=v==null?0:v.length;return x?ho(v,y)/x:Ti}function lo(v){return function(y){return y==null?n:y[v]}}function co(v){return function(y){return v==null?n:v[y]}}function ru(v,y,x,T,F){return F(v,function(J,gt,Y){x=T?(T=!1,J):y(x,J,gt,Y)}),x}function mf(v,y){var x=v.length;for(v.sort(y);x--;)v[x]=v[x].value;return v}function ho(v,y){for(var x,T=-1,F=v.length;++T<F;){var J=y(v[T]);J!==n&&(x=x===n?J:x+J)}return x}function fo(v,y){for(var x=-1,T=Array(v);++x<v;)T[x]=y(x);return T}function vf(v,y){return et(y,function(x){return[x,v[x]]})}function ou(v){return v&&v.slice(0,lu(v)+1).replace(Zr,"")}function Nt(v){return function(y){return v(y)}}function go(v,y){return et(y,function(x){return v[x]})}function Qn(v,y){return v.has(y)}function su(v,y){for(var x=-1,T=v.length;++x<T&&xn(y,v[x],0)>-1;);return x}function au(v,y){for(var x=v.length;x--&&xn(y,v[x],0)>-1;);return x}function bf(v,y){for(var x=v.length,T=0;x--;)v[x]===y&&++T;return T}var Af=co(ef),xf=co(nf);function yf(v){return"\\"+of[v]}function Cf(v,y){return v==null?n:v[y]}function yn(v){return Yd.test(v)}function Ef(v){return Zd.test(v)}function Rf(v){for(var y,x=[];!(y=v.next()).done;)x.push(y.value);return x}function po(v){var y=-1,x=Array(v.size);return v.forEach(function(T,F){x[++y]=[F,T]}),x}function uu(v,y){return function(x){return v(y(x))}}function Ie(v,y){for(var x=-1,T=v.length,F=0,J=[];++x<T;){var gt=v[x];(gt===y||gt===S)&&(v[x]=S,J[F++]=x)}return J}function Wi(v){var y=-1,x=Array(v.size);return v.forEach(function(T){x[++y]=T}),x}function wf(v){var y=-1,x=Array(v.size);return v.forEach(function(T){x[++y]=[T,T]}),x}function Sf(v,y,x){for(var T=x-1,F=v.length;++T<F;)if(v[T]===y)return T;return-1}function Lf(v,y,x){for(var T=x+1;T--;)if(v[T]===y)return T;return T}function Cn(v){return yn(v)?Tf(v):df(v)}function re(v){return yn(v)?Df(v):ff(v)}function lu(v){for(var y=v.length;y--&&vd.test(v.charAt(y)););return y}var _f=co(rf);function Tf(v){for(var y=io.lastIndex=0;io.test(v);)++y;return y}function Df(v){return v.match(io)||[]}function kf(v){return v.match(Xd)||[]}var Of=function v(y){y=y==null?bt:En.defaults(bt.Object(),y,En.pick(bt,Qd));var x=y.Array,T=y.Date,F=y.Error,J=y.Function,gt=y.Math,Y=y.Object,mo=y.RegExp,If=y.String,Gt=y.TypeError,Ui=x.prototype,Pf=J.prototype,Rn=Y.prototype,qi=y["__core-js_shared__"],Hi=Pf.toString,G=Rn.hasOwnProperty,Bf=0,cu=function(){var e=/[^.]+$/.exec(qi&&qi.keys&&qi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ji=Rn.toString,Ff=Hi.call(Y),Nf=bt._,Mf=mo("^"+Hi.call(G).replace(Yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zi=Ja?y.Buffer:n,Pe=y.Symbol,Vi=y.Uint8Array,hu=zi?zi.allocUnsafe:n,Ki=uu(Y.getPrototypeOf,Y),du=Y.create,fu=Rn.propertyIsEnumerable,Ji=Ui.splice,gu=Pe?Pe.isConcatSpreadable:n,ti=Pe?Pe.iterator:n,Ge=Pe?Pe.toStringTag:n,$i=function(){try{var e=tn(Y,"defineProperty");return e({},"",{}),e}catch{}}(),Wf=y.clearTimeout!==bt.clearTimeout&&y.clearTimeout,Uf=T&&T.now!==bt.Date.now&&T.now,qf=y.setTimeout!==bt.setTimeout&&y.setTimeout,Gi=gt.ceil,Xi=gt.floor,vo=Y.getOwnPropertySymbols,Hf=zi?zi.isBuffer:n,pu=y.isFinite,jf=Ui.join,zf=uu(Y.keys,Y),pt=gt.max,yt=gt.min,Vf=T.now,Kf=y.parseInt,mu=gt.random,Jf=Ui.reverse,bo=tn(y,"DataView"),ei=tn(y,"Map"),Ao=tn(y,"Promise"),wn=tn(y,"Set"),ni=tn(y,"WeakMap"),ii=tn(Y,"create"),Yi=ni&&new ni,Sn={},$f=en(bo),Gf=en(ei),Xf=en(Ao),Yf=en(wn),Zf=en(ni),Zi=Pe?Pe.prototype:n,ri=Zi?Zi.valueOf:n,vu=Zi?Zi.toString:n;function d(e){if(rt(e)&&!N(e)&&!(e instanceof z)){if(e instanceof Xt)return e;if(G.call(e,"__wrapped__"))return bl(e)}return new Xt(e)}var Ln=function(){function e(){}return function(i){if(!nt(i))return{};if(du)return du(i);e.prototype=i;var o=new e;return e.prototype=n,o}}();function Qi(){}function Xt(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}d.templateSettings={escape:hd,evaluate:dd,interpolate:Sa,variable:"",imports:{_:d}},d.prototype=Qi.prototype,d.prototype.constructor=d,Xt.prototype=Ln(Qi.prototype),Xt.prototype.constructor=Xt;function z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=he,this.__views__=[]}function Qf(){var e=new z(this.__wrapped__);return e.__actions__=Dt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Dt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Dt(this.__views__),e}function tg(){if(this.__filtered__){var e=new z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function eg(){var e=this.__wrapped__.value(),i=this.__dir__,o=N(e),u=i<0,c=o?e.length:0,f=fp(0,c,this.__views__),g=f.start,m=f.end,b=m-g,C=u?m:g-1,E=this.__iteratees__,w=E.length,_=0,D=yt(b,this.__takeCount__);if(!o||!u&&c==b&&D==b)return qu(e,this.__actions__);var P=[];t:for(;b--&&_<D;){C+=i;for(var U=-1,B=e[C];++U<w;){var H=E[U],V=H.iteratee,Ut=H.type,St=V(B);if(Ut==qr)B=St;else if(!St){if(Ut==ce)continue t;break t}}P[_++]=B}return P}z.prototype=Ln(Qi.prototype),z.prototype.constructor=z;function Xe(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var u=e[i];this.set(u[0],u[1])}}function ng(){this.__data__=ii?ii(null):{},this.size=0}function ig(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function rg(e){var i=this.__data__;if(ii){var o=i[e];return o===A?n:o}return G.call(i,e)?i[e]:n}function og(e){var i=this.__data__;return ii?i[e]!==n:G.call(i,e)}function sg(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=ii&&i===n?A:i,this}Xe.prototype.clear=ng,Xe.prototype.delete=ig,Xe.prototype.get=rg,Xe.prototype.has=og,Xe.prototype.set=sg;function be(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var u=e[i];this.set(u[0],u[1])}}function ag(){this.__data__=[],this.size=0}function ug(e){var i=this.__data__,o=tr(i,e);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():Ji.call(i,o,1),--this.size,!0}function lg(e){var i=this.__data__,o=tr(i,e);return o<0?n:i[o][1]}function cg(e){return tr(this.__data__,e)>-1}function hg(e,i){var o=this.__data__,u=tr(o,e);return u<0?(++this.size,o.push([e,i])):o[u][1]=i,this}be.prototype.clear=ag,be.prototype.delete=ug,be.prototype.get=lg,be.prototype.has=cg,be.prototype.set=hg;function Ae(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var u=e[i];this.set(u[0],u[1])}}function dg(){this.size=0,this.__data__={hash:new Xe,map:new(ei||be),string:new Xe}}function fg(e){var i=dr(this,e).delete(e);return this.size-=i?1:0,i}function gg(e){return dr(this,e).get(e)}function pg(e){return dr(this,e).has(e)}function mg(e,i){var o=dr(this,e),u=o.size;return o.set(e,i),this.size+=o.size==u?0:1,this}Ae.prototype.clear=dg,Ae.prototype.delete=fg,Ae.prototype.get=gg,Ae.prototype.has=pg,Ae.prototype.set=mg;function Ye(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new Ae;++i<o;)this.add(e[i])}function vg(e){return this.__data__.set(e,A),this}function bg(e){return this.__data__.has(e)}Ye.prototype.add=Ye.prototype.push=vg,Ye.prototype.has=bg;function oe(e){var i=this.__data__=new be(e);this.size=i.size}function Ag(){this.__data__=new be,this.size=0}function xg(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function yg(e){return this.__data__.get(e)}function Cg(e){return this.__data__.has(e)}function Eg(e,i){var o=this.__data__;if(o instanceof be){var u=o.__data__;if(!ei||u.length<a-1)return u.push([e,i]),this.size=++o.size,this;o=this.__data__=new Ae(u)}return o.set(e,i),this.size=o.size,this}oe.prototype.clear=Ag,oe.prototype.delete=xg,oe.prototype.get=yg,oe.prototype.has=Cg,oe.prototype.set=Eg;function bu(e,i){var o=N(e),u=!o&&nn(e),c=!o&&!u&&We(e),f=!o&&!u&&!c&&kn(e),g=o||u||c||f,m=g?fo(e.length,If):[],b=m.length;for(var C in e)(i||G.call(e,C))&&!(g&&(C=="length"||c&&(C=="offset"||C=="parent")||f&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||Ee(C,b)))&&m.push(C);return m}function Au(e){var i=e.length;return i?e[Do(0,i-1)]:n}function Rg(e,i){return fr(Dt(e),Ze(i,0,e.length))}function wg(e){return fr(Dt(e))}function xo(e,i,o){(o!==n&&!se(e[i],o)||o===n&&!(i in e))&&xe(e,i,o)}function oi(e,i,o){var u=e[i];(!(G.call(e,i)&&se(u,o))||o===n&&!(i in e))&&xe(e,i,o)}function tr(e,i){for(var o=e.length;o--;)if(se(e[o][0],i))return o;return-1}function Sg(e,i,o,u){return Be(e,function(c,f,g){i(u,c,o(c),g)}),u}function xu(e,i){return e&&fe(i,mt(i),e)}function Lg(e,i){return e&&fe(i,Ot(i),e)}function xe(e,i,o){i=="__proto__"&&$i?$i(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function yo(e,i){for(var o=-1,u=i.length,c=x(u),f=e==null;++o<u;)c[o]=f?n:es(e,i[o]);return c}function Ze(e,i,o){return e===e&&(o!==n&&(e=e<=o?e:o),i!==n&&(e=e>=i?e:i)),e}function Yt(e,i,o,u,c,f){var g,m=i&O,b=i&L,C=i&K;if(o&&(g=c?o(e,u,c,f):o(e)),g!==n)return g;if(!nt(e))return e;var E=N(e);if(E){if(g=pp(e),!m)return Dt(e,g)}else{var w=Ct(e),_=w==Oi||w==Ca;if(We(e))return zu(e,m);if(w==ve||w==vn||_&&!c){if(g=b||_?{}:ll(e),!m)return b?rp(e,Lg(g,e)):ip(e,xu(g,e))}else{if(!Z[w])return c?e:{};g=mp(e,w,m)}}f||(f=new oe);var D=f.get(e);if(D)return D;f.set(e,g),Ml(e)?e.forEach(function(B){g.add(Yt(B,i,o,B,e,f))}):Fl(e)&&e.forEach(function(B,H){g.set(H,Yt(B,i,o,H,e,f))});var P=C?b?qo:Uo:b?Ot:mt,U=E?n:P(e);return $t(U||e,function(B,H){U&&(H=B,B=e[H]),oi(g,H,Yt(B,i,o,H,e,f))}),g}function _g(e){var i=mt(e);return function(o){return yu(o,e,i)}}function yu(e,i,o){var u=o.length;if(e==null)return!u;for(e=Y(e);u--;){var c=o[u],f=i[c],g=e[c];if(g===n&&!(c in e)||!f(g))return!1}return!0}function Cu(e,i,o){if(typeof e!="function")throw new Gt(h);return di(function(){e.apply(n,o)},i)}function si(e,i,o,u){var c=-1,f=Ni,g=!0,m=e.length,b=[],C=i.length;if(!m)return b;o&&(i=et(i,Nt(o))),u?(f=so,g=!1):i.length>=a&&(f=Qn,g=!1,i=new Ye(i));t:for(;++c<m;){var E=e[c],w=o==null?E:o(E);if(E=u||E!==0?E:0,g&&w===w){for(var _=C;_--;)if(i[_]===w)continue t;b.push(E)}else f(i,w,u)||b.push(E)}return b}var Be=Gu(de),Eu=Gu(Eo,!0);function Tg(e,i){var o=!0;return Be(e,function(u,c,f){return o=!!i(u,c,f),o}),o}function er(e,i,o){for(var u=-1,c=e.length;++u<c;){var f=e[u],g=i(f);if(g!=null&&(m===n?g===g&&!Wt(g):o(g,m)))var m=g,b=f}return b}function Dg(e,i,o,u){var c=e.length;for(o=W(o),o<0&&(o=-o>c?0:c+o),u=u===n||u>c?c:W(u),u<0&&(u+=c),u=o>u?0:Ul(u);o<u;)e[o++]=i;return e}function Ru(e,i){var o=[];return Be(e,function(u,c,f){i(u,c,f)&&o.push(u)}),o}function At(e,i,o,u,c){var f=-1,g=e.length;for(o||(o=bp),c||(c=[]);++f<g;){var m=e[f];i>0&&o(m)?i>1?At(m,i-1,o,u,c):Oe(c,m):u||(c[c.length]=m)}return c}var Co=Xu(),wu=Xu(!0);function de(e,i){return e&&Co(e,i,mt)}function Eo(e,i){return e&&wu(e,i,mt)}function nr(e,i){return ke(i,function(o){return Re(e[o])})}function Qe(e,i){i=Ne(i,e);for(var o=0,u=i.length;e!=null&&o<u;)e=e[ge(i[o++])];return o&&o==u?e:n}function Su(e,i,o){var u=i(e);return N(e)?u:Oe(u,o(e))}function Rt(e){return e==null?e===n?rd:nd:Ge&&Ge in Y(e)?dp(e):wp(e)}function Ro(e,i){return e>i}function kg(e,i){return e!=null&&G.call(e,i)}function Og(e,i){return e!=null&&i in Y(e)}function Ig(e,i,o){return e>=yt(i,o)&&e<pt(i,o)}function wo(e,i,o){for(var u=o?so:Ni,c=e[0].length,f=e.length,g=f,m=x(f),b=1/0,C=[];g--;){var E=e[g];g&&i&&(E=et(E,Nt(i))),b=yt(E.length,b),m[g]=!o&&(i||c>=120&&E.length>=120)?new Ye(g&&E):n}E=e[0];var w=-1,_=m[0];t:for(;++w<c&&C.length<b;){var D=E[w],P=i?i(D):D;if(D=o||D!==0?D:0,!(_?Qn(_,P):u(C,P,o))){for(g=f;--g;){var U=m[g];if(!(U?Qn(U,P):u(e[g],P,o)))continue t}_&&_.push(P),C.push(D)}}return C}function Pg(e,i,o,u){return de(e,function(c,f,g){i(u,o(c),f,g)}),u}function ai(e,i,o){i=Ne(i,e),e=fl(e,i);var u=e==null?e:e[ge(Qt(i))];return u==null?n:Ft(u,e,o)}function Lu(e){return rt(e)&&Rt(e)==vn}function Bg(e){return rt(e)&&Rt(e)==Zn}function Fg(e){return rt(e)&&Rt(e)==Jn}function ui(e,i,o,u,c){return e===i?!0:e==null||i==null||!rt(e)&&!rt(i)?e!==e&&i!==i:Ng(e,i,o,u,ui,c)}function Ng(e,i,o,u,c,f){var g=N(e),m=N(i),b=g?Di:Ct(e),C=m?Di:Ct(i);b=b==vn?ve:b,C=C==vn?ve:C;var E=b==ve,w=C==ve,_=b==C;if(_&&We(e)){if(!We(i))return!1;g=!0,E=!1}if(_&&!E)return f||(f=new oe),g||kn(e)?sl(e,i,o,u,c,f):cp(e,i,b,o,u,c,f);if(!(o&Tt)){var D=E&&G.call(e,"__wrapped__"),P=w&&G.call(i,"__wrapped__");if(D||P){var U=D?e.value():e,B=P?i.value():i;return f||(f=new oe),c(U,B,o,u,f)}}return _?(f||(f=new oe),hp(e,i,o,u,c,f)):!1}function Mg(e){return rt(e)&&Ct(e)==ne}function So(e,i,o,u){var c=o.length,f=c,g=!u;if(e==null)return!f;for(e=Y(e);c--;){var m=o[c];if(g&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++c<f;){m=o[c];var b=m[0],C=e[b],E=m[1];if(g&&m[2]){if(C===n&&!(b in e))return!1}else{var w=new oe;if(u)var _=u(C,E,b,e,i,w);if(!(_===n?ui(E,C,Tt|ot,u,w):_))return!1}}return!0}function _u(e){if(!nt(e)||xp(e))return!1;var i=Re(e)?Mf:Ld;return i.test(en(e))}function Wg(e){return rt(e)&&Rt(e)==Gn}function Ug(e){return rt(e)&&Ct(e)==ie}function qg(e){return rt(e)&&Ar(e.length)&&!!tt[Rt(e)]}function Tu(e){return typeof e=="function"?e:e==null?It:typeof e=="object"?N(e)?Ou(e[0],e[1]):ku(e):Yl(e)}function Lo(e){if(!hi(e))return zf(e);var i=[];for(var o in Y(e))G.call(e,o)&&o!="constructor"&&i.push(o);return i}function Hg(e){if(!nt(e))return Rp(e);var i=hi(e),o=[];for(var u in e)u=="constructor"&&(i||!G.call(e,u))||o.push(u);return o}function _o(e,i){return e<i}function Du(e,i){var o=-1,u=kt(e)?x(e.length):[];return Be(e,function(c,f,g){u[++o]=i(c,f,g)}),u}function ku(e){var i=jo(e);return i.length==1&&i[0][2]?hl(i[0][0],i[0][1]):function(o){return o===e||So(o,e,i)}}function Ou(e,i){return Vo(e)&&cl(i)?hl(ge(e),i):function(o){var u=es(o,e);return u===n&&u===i?ns(o,e):ui(i,u,Tt|ot)}}function ir(e,i,o,u,c){e!==i&&Co(i,function(f,g){if(c||(c=new oe),nt(f))jg(e,i,g,o,ir,u,c);else{var m=u?u(Jo(e,g),f,g+"",e,i,c):n;m===n&&(m=f),xo(e,g,m)}},Ot)}function jg(e,i,o,u,c,f,g){var m=Jo(e,o),b=Jo(i,o),C=g.get(b);if(C){xo(e,o,C);return}var E=f?f(m,b,o+"",e,i,g):n,w=E===n;if(w){var _=N(b),D=!_&&We(b),P=!_&&!D&&kn(b);E=b,_||D||P?N(m)?E=m:ut(m)?E=Dt(m):D?(w=!1,E=zu(b,!0)):P?(w=!1,E=Vu(b,!0)):E=[]:fi(b)||nn(b)?(E=m,nn(m)?E=ql(m):(!nt(m)||Re(m))&&(E=ll(b))):w=!1}w&&(g.set(b,E),c(E,b,u,f,g),g.delete(b)),xo(e,o,E)}function Iu(e,i){var o=e.length;if(!!o)return i+=i<0?o:0,Ee(i,o)?e[i]:n}function Pu(e,i,o){i.length?i=et(i,function(f){return N(f)?function(g){return Qe(g,f.length===1?f[0]:f)}:f}):i=[It];var u=-1;i=et(i,Nt(I()));var c=Du(e,function(f,g,m){var b=et(i,function(C){return C(f)});return{criteria:b,index:++u,value:f}});return mf(c,function(f,g){return np(f,g,o)})}function zg(e,i){return Bu(e,i,function(o,u){return ns(e,u)})}function Bu(e,i,o){for(var u=-1,c=i.length,f={};++u<c;){var g=i[u],m=Qe(e,g);o(m,g)&&li(f,Ne(g,e),m)}return f}function Vg(e){return function(i){return Qe(i,e)}}function To(e,i,o,u){var c=u?pf:xn,f=-1,g=i.length,m=e;for(e===i&&(i=Dt(i)),o&&(m=et(e,Nt(o)));++f<g;)for(var b=0,C=i[f],E=o?o(C):C;(b=c(m,E,b,u))>-1;)m!==e&&Ji.call(m,b,1),Ji.call(e,b,1);return e}function Fu(e,i){for(var o=e?i.length:0,u=o-1;o--;){var c=i[o];if(o==u||c!==f){var f=c;Ee(c)?Ji.call(e,c,1):Io(e,c)}}return e}function Do(e,i){return e+Xi(mu()*(i-e+1))}function Kg(e,i,o,u){for(var c=-1,f=pt(Gi((i-e)/(o||1)),0),g=x(f);f--;)g[u?f:++c]=e,e+=o;return g}function ko(e,i){var o="";if(!e||i<1||i>De)return o;do i%2&&(o+=e),i=Xi(i/2),i&&(e+=e);while(i);return o}function q(e,i){return $o(dl(e,i,It),e+"")}function Jg(e){return Au(On(e))}function $g(e,i){var o=On(e);return fr(o,Ze(i,0,o.length))}function li(e,i,o,u){if(!nt(e))return e;i=Ne(i,e);for(var c=-1,f=i.length,g=f-1,m=e;m!=null&&++c<f;){var b=ge(i[c]),C=o;if(b==="__proto__"||b==="constructor"||b==="prototype")return e;if(c!=g){var E=m[b];C=u?u(E,b,m):n,C===n&&(C=nt(E)?E:Ee(i[c+1])?[]:{})}oi(m,b,C),m=m[b]}return e}var Nu=Yi?function(e,i){return Yi.set(e,i),e}:It,Gg=$i?function(e,i){return $i(e,"toString",{configurable:!0,enumerable:!1,value:rs(i),writable:!0})}:It;function Xg(e){return fr(On(e))}function Zt(e,i,o){var u=-1,c=e.length;i<0&&(i=-i>c?0:c+i),o=o>c?c:o,o<0&&(o+=c),c=i>o?0:o-i>>>0,i>>>=0;for(var f=x(c);++u<c;)f[u]=e[u+i];return f}function Yg(e,i){var o;return Be(e,function(u,c,f){return o=i(u,c,f),!o}),!!o}function rr(e,i,o){var u=0,c=e==null?u:e.length;if(typeof i=="number"&&i===i&&c<=Zh){for(;u<c;){var f=u+c>>>1,g=e[f];g!==null&&!Wt(g)&&(o?g<=i:g<i)?u=f+1:c=f}return c}return Oo(e,i,It,o)}function Oo(e,i,o,u){var c=0,f=e==null?0:e.length;if(f===0)return 0;i=o(i);for(var g=i!==i,m=i===null,b=Wt(i),C=i===n;c<f;){var E=Xi((c+f)/2),w=o(e[E]),_=w!==n,D=w===null,P=w===w,U=Wt(w);if(g)var B=u||P;else C?B=P&&(u||_):m?B=P&&_&&(u||!D):b?B=P&&_&&!D&&(u||!U):D||U?B=!1:B=u?w<=i:w<i;B?c=E+1:f=E}return yt(f,Yh)}function Mu(e,i){for(var o=-1,u=e.length,c=0,f=[];++o<u;){var g=e[o],m=i?i(g):g;if(!o||!se(m,b)){var b=m;f[c++]=g===0?0:g}}return f}function Wu(e){return typeof e=="number"?e:Wt(e)?Ti:+e}function Mt(e){if(typeof e=="string")return e;if(N(e))return et(e,Mt)+"";if(Wt(e))return vu?vu.call(e):"";var i=e+"";return i=="0"&&1/e==-Je?"-0":i}function Fe(e,i,o){var u=-1,c=Ni,f=e.length,g=!0,m=[],b=m;if(o)g=!1,c=so;else if(f>=a){var C=i?null:up(e);if(C)return Wi(C);g=!1,c=Qn,b=new Ye}else b=i?[]:m;t:for(;++u<f;){var E=e[u],w=i?i(E):E;if(E=o||E!==0?E:0,g&&w===w){for(var _=b.length;_--;)if(b[_]===w)continue t;i&&b.push(w),m.push(E)}else c(b,w,o)||(b!==m&&b.push(w),m.push(E))}return m}function Io(e,i){return i=Ne(i,e),e=fl(e,i),e==null||delete e[ge(Qt(i))]}function Uu(e,i,o,u){return li(e,i,o(Qe(e,i)),u)}function or(e,i,o,u){for(var c=e.length,f=u?c:-1;(u?f--:++f<c)&&i(e[f],f,e););return o?Zt(e,u?0:f,u?f+1:c):Zt(e,u?f+1:0,u?c:f)}function qu(e,i){var o=e;return o instanceof z&&(o=o.value()),ao(i,function(u,c){return c.func.apply(c.thisArg,Oe([u],c.args))},o)}function Po(e,i,o){var u=e.length;if(u<2)return u?Fe(e[0]):[];for(var c=-1,f=x(u);++c<u;)for(var g=e[c],m=-1;++m<u;)m!=c&&(f[c]=si(f[c]||g,e[m],i,o));return Fe(At(f,1),i,o)}function Hu(e,i,o){for(var u=-1,c=e.length,f=i.length,g={};++u<c;){var m=u<f?i[u]:n;o(g,e[u],m)}return g}function Bo(e){return ut(e)?e:[]}function Fo(e){return typeof e=="function"?e:It}function Ne(e,i){return N(e)?e:Vo(e,i)?[e]:vl($(e))}var Zg=q;function Me(e,i,o){var u=e.length;return o=o===n?u:o,!i&&o>=u?e:Zt(e,i,o)}var ju=Wf||function(e){return bt.clearTimeout(e)};function zu(e,i){if(i)return e.slice();var o=e.length,u=hu?hu(o):new e.constructor(o);return e.copy(u),u}function No(e){var i=new e.constructor(e.byteLength);return new Vi(i).set(new Vi(e)),i}function Qg(e,i){var o=i?No(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function tp(e){var i=new e.constructor(e.source,La.exec(e));return i.lastIndex=e.lastIndex,i}function ep(e){return ri?Y(ri.call(e)):{}}function Vu(e,i){var o=i?No(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function Ku(e,i){if(e!==i){var o=e!==n,u=e===null,c=e===e,f=Wt(e),g=i!==n,m=i===null,b=i===i,C=Wt(i);if(!m&&!C&&!f&&e>i||f&&g&&b&&!m&&!C||u&&g&&b||!o&&b||!c)return 1;if(!u&&!f&&!C&&e<i||C&&o&&c&&!u&&!f||m&&o&&c||!g&&c||!b)return-1}return 0}function np(e,i,o){for(var u=-1,c=e.criteria,f=i.criteria,g=c.length,m=o.length;++u<g;){var b=Ku(c[u],f[u]);if(b){if(u>=m)return b;var C=o[u];return b*(C=="desc"?-1:1)}}return e.index-i.index}function Ju(e,i,o,u){for(var c=-1,f=e.length,g=o.length,m=-1,b=i.length,C=pt(f-g,0),E=x(b+C),w=!u;++m<b;)E[m]=i[m];for(;++c<g;)(w||c<f)&&(E[o[c]]=e[c]);for(;C--;)E[m++]=e[c++];return E}function $u(e,i,o,u){for(var c=-1,f=e.length,g=-1,m=o.length,b=-1,C=i.length,E=pt(f-m,0),w=x(E+C),_=!u;++c<E;)w[c]=e[c];for(var D=c;++b<C;)w[D+b]=i[b];for(;++g<m;)(_||c<f)&&(w[D+o[g]]=e[c++]);return w}function Dt(e,i){var o=-1,u=e.length;for(i||(i=x(u));++o<u;)i[o]=e[o];return i}function fe(e,i,o,u){var c=!o;o||(o={});for(var f=-1,g=i.length;++f<g;){var m=i[f],b=u?u(o[m],e[m],m,o,e):n;b===n&&(b=e[m]),c?xe(o,m,b):oi(o,m,b)}return o}function ip(e,i){return fe(e,zo(e),i)}function rp(e,i){return fe(e,al(e),i)}function sr(e,i){return function(o,u){var c=N(o)?lf:Sg,f=i?i():{};return c(o,e,I(u,2),f)}}function _n(e){return q(function(i,o){var u=-1,c=o.length,f=c>1?o[c-1]:n,g=c>2?o[2]:n;for(f=e.length>3&&typeof f=="function"?(c--,f):n,g&&wt(o[0],o[1],g)&&(f=c<3?n:f,c=1),i=Y(i);++u<c;){var m=o[u];m&&e(i,m,u,f)}return i})}function Gu(e,i){return function(o,u){if(o==null)return o;if(!kt(o))return e(o,u);for(var c=o.length,f=i?c:-1,g=Y(o);(i?f--:++f<c)&&u(g[f],f,g)!==!1;);return o}}function Xu(e){return function(i,o,u){for(var c=-1,f=Y(i),g=u(i),m=g.length;m--;){var b=g[e?m:++c];if(o(f[b],b,f)===!1)break}return i}}function op(e,i,o){var u=i&Q,c=ci(e);function f(){var g=this&&this!==bt&&this instanceof f?c:e;return g.apply(u?o:this,arguments)}return f}function Yu(e){return function(i){i=$(i);var o=yn(i)?re(i):n,u=o?o[0]:i.charAt(0),c=o?Me(o,1).join(""):i.slice(1);return u[e]()+c}}function Tn(e){return function(i){return ao(Gl($l(i).replace($d,"")),e,"")}}function ci(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=Ln(e.prototype),u=e.apply(o,i);return nt(u)?u:o}}function sp(e,i,o){var u=ci(e);function c(){for(var f=arguments.length,g=x(f),m=f,b=Dn(c);m--;)g[m]=arguments[m];var C=f<3&&g[0]!==b&&g[f-1]!==b?[]:Ie(g,b);if(f-=C.length,f<o)return nl(e,i,ar,c.placeholder,n,g,C,n,n,o-f);var E=this&&this!==bt&&this instanceof c?u:e;return Ft(E,this,g)}return c}function Zu(e){return function(i,o,u){var c=Y(i);if(!kt(i)){var f=I(o,3);i=mt(i),o=function(m){return f(c[m],m,c)}}var g=e(i,o,u);return g>-1?c[f?i[g]:g]:n}}function Qu(e){return Ce(function(i){var o=i.length,u=o,c=Xt.prototype.thru;for(e&&i.reverse();u--;){var f=i[u];if(typeof f!="function")throw new Gt(h);if(c&&!g&&hr(f)=="wrapper")var g=new Xt([],!0)}for(u=g?u:o;++u<o;){f=i[u];var m=hr(f),b=m=="wrapper"?Ho(f):n;b&&Ko(b[0])&&b[1]==(Et|st|k|me)&&!b[4].length&&b[9]==1?g=g[hr(b[0])].apply(g,b[3]):g=f.length==1&&Ko(f)?g[m]():g.thru(f)}return function(){var C=arguments,E=C[0];if(g&&C.length==1&&N(E))return g.plant(E).value();for(var w=0,_=o?i[w].apply(this,C):E;++w<o;)_=i[w].call(this,_);return _}})}function ar(e,i,o,u,c,f,g,m,b,C){var E=i&Et,w=i&Q,_=i&ft,D=i&(st|at),P=i&mn,U=_?n:ci(e);function B(){for(var H=arguments.length,V=x(H),Ut=H;Ut--;)V[Ut]=arguments[Ut];if(D)var St=Dn(B),qt=bf(V,St);if(u&&(V=Ju(V,u,c,D)),f&&(V=$u(V,f,g,D)),H-=qt,D&&H<C){var lt=Ie(V,St);return nl(e,i,ar,B.placeholder,o,V,lt,m,b,C-H)}var ae=w?o:this,Se=_?ae[e]:e;return H=V.length,m?V=Sp(V,m):P&&H>1&&V.reverse(),E&&b<H&&(V.length=b),this&&this!==bt&&this instanceof B&&(Se=U||ci(Se)),Se.apply(ae,V)}return B}function tl(e,i){return function(o,u){return Pg(o,e,i(u),{})}}function ur(e,i){return function(o,u){var c;if(o===n&&u===n)return i;if(o!==n&&(c=o),u!==n){if(c===n)return u;typeof o=="string"||typeof u=="string"?(o=Mt(o),u=Mt(u)):(o=Wu(o),u=Wu(u)),c=e(o,u)}return c}}function Mo(e){return Ce(function(i){return i=et(i,Nt(I())),q(function(o){var u=this;return e(i,function(c){return Ft(c,u,o)})})})}function lr(e,i){i=i===n?" ":Mt(i);var o=i.length;if(o<2)return o?ko(i,e):i;var u=ko(i,Gi(e/Cn(i)));return yn(i)?Me(re(u),0,e).join(""):u.slice(0,e)}function ap(e,i,o,u){var c=i&Q,f=ci(e);function g(){for(var m=-1,b=arguments.length,C=-1,E=u.length,w=x(E+b),_=this&&this!==bt&&this instanceof g?f:e;++C<E;)w[C]=u[C];for(;b--;)w[C++]=arguments[++m];return Ft(_,c?o:this,w)}return g}function el(e){return function(i,o,u){return u&&typeof u!="number"&&wt(i,o,u)&&(o=u=n),i=we(i),o===n?(o=i,i=0):o=we(o),u=u===n?i<o?1:-1:we(u),Kg(i,o,u,e)}}function cr(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=te(i),o=te(o)),e(i,o)}}function nl(e,i,o,u,c,f,g,m,b,C){var E=i&st,w=E?g:n,_=E?n:g,D=E?f:n,P=E?n:f;i|=E?k:Kt,i&=~(E?Kt:k),i&Vt||(i&=~(Q|ft));var U=[e,i,c,D,w,P,_,m,b,C],B=o.apply(n,U);return Ko(e)&&gl(B,U),B.placeholder=u,pl(B,e,i)}function Wo(e){var i=gt[e];return function(o,u){if(o=te(o),u=u==null?0:yt(W(u),292),u&&pu(o)){var c=($(o)+"e").split("e"),f=i(c[0]+"e"+(+c[1]+u));return c=($(f)+"e").split("e"),+(c[0]+"e"+(+c[1]-u))}return i(o)}}var up=wn&&1/Wi(new wn([,-0]))[1]==Je?function(e){return new wn(e)}:as;function il(e){return function(i){var o=Ct(i);return o==ne?po(i):o==ie?wf(i):vf(i,e(i))}}function ye(e,i,o,u,c,f,g,m){var b=i&ft;if(!b&&typeof e!="function")throw new Gt(h);var C=u?u.length:0;if(C||(i&=~(k|Kt),u=c=n),g=g===n?g:pt(W(g),0),m=m===n?m:W(m),C-=c?c.length:0,i&Kt){var E=u,w=c;u=c=n}var _=b?n:Ho(e),D=[e,i,o,u,c,E,w,f,g,m];if(_&&Ep(D,_),e=D[0],i=D[1],o=D[2],u=D[3],c=D[4],m=D[9]=D[9]===n?b?0:e.length:pt(D[9]-C,0),!m&&i&(st|at)&&(i&=~(st|at)),!i||i==Q)var P=op(e,i,o);else i==st||i==at?P=sp(e,i,m):(i==k||i==(Q|k))&&!c.length?P=ap(e,i,o,u):P=ar.apply(n,D);var U=_?Nu:gl;return pl(U(P,D),e,i)}function rl(e,i,o,u){return e===n||se(e,Rn[o])&&!G.call(u,o)?i:e}function ol(e,i,o,u,c,f){return nt(e)&&nt(i)&&(f.set(i,e),ir(e,i,n,ol,f),f.delete(i)),e}function lp(e){return fi(e)?n:e}function sl(e,i,o,u,c,f){var g=o&Tt,m=e.length,b=i.length;if(m!=b&&!(g&&b>m))return!1;var C=f.get(e),E=f.get(i);if(C&&E)return C==i&&E==e;var w=-1,_=!0,D=o&ot?new Ye:n;for(f.set(e,i),f.set(i,e);++w<m;){var P=e[w],U=i[w];if(u)var B=g?u(U,P,w,i,e,f):u(P,U,w,e,i,f);if(B!==n){if(B)continue;_=!1;break}if(D){if(!uo(i,function(H,V){if(!Qn(D,V)&&(P===H||c(P,H,o,u,f)))return D.push(V)})){_=!1;break}}else if(!(P===U||c(P,U,o,u,f))){_=!1;break}}return f.delete(e),f.delete(i),_}function cp(e,i,o,u,c,f,g){switch(o){case bn:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Zn:return!(e.byteLength!=i.byteLength||!f(new Vi(e),new Vi(i)));case Kn:case Jn:case $n:return se(+e,+i);case ki:return e.name==i.name&&e.message==i.message;case Gn:case Xn:return e==i+"";case ne:var m=po;case ie:var b=u&Tt;if(m||(m=Wi),e.size!=i.size&&!b)return!1;var C=g.get(e);if(C)return C==i;u|=ot,g.set(e,i);var E=sl(m(e),m(i),u,c,f,g);return g.delete(e),E;case Ii:if(ri)return ri.call(e)==ri.call(i)}return!1}function hp(e,i,o,u,c,f){var g=o&Tt,m=Uo(e),b=m.length,C=Uo(i),E=C.length;if(b!=E&&!g)return!1;for(var w=b;w--;){var _=m[w];if(!(g?_ in i:G.call(i,_)))return!1}var D=f.get(e),P=f.get(i);if(D&&P)return D==i&&P==e;var U=!0;f.set(e,i),f.set(i,e);for(var B=g;++w<b;){_=m[w];var H=e[_],V=i[_];if(u)var Ut=g?u(V,H,_,i,e,f):u(H,V,_,e,i,f);if(!(Ut===n?H===V||c(H,V,o,u,f):Ut)){U=!1;break}B||(B=_=="constructor")}if(U&&!B){var St=e.constructor,qt=i.constructor;St!=qt&&"constructor"in e&&"constructor"in i&&!(typeof St=="function"&&St instanceof St&&typeof qt=="function"&&qt instanceof qt)&&(U=!1)}return f.delete(e),f.delete(i),U}function Ce(e){return $o(dl(e,n,yl),e+"")}function Uo(e){return Su(e,mt,zo)}function qo(e){return Su(e,Ot,al)}var Ho=Yi?function(e){return Yi.get(e)}:as;function hr(e){for(var i=e.name+"",o=Sn[i],u=G.call(Sn,i)?o.length:0;u--;){var c=o[u],f=c.func;if(f==null||f==e)return c.name}return i}function Dn(e){var i=G.call(d,"placeholder")?d:e;return i.placeholder}function I(){var e=d.iteratee||os;return e=e===os?Tu:e,arguments.length?e(arguments[0],arguments[1]):e}function dr(e,i){var o=e.__data__;return Ap(i)?o[typeof i=="string"?"string":"hash"]:o.map}function jo(e){for(var i=mt(e),o=i.length;o--;){var u=i[o],c=e[u];i[o]=[u,c,cl(c)]}return i}function tn(e,i){var o=Cf(e,i);return _u(o)?o:n}function dp(e){var i=G.call(e,Ge),o=e[Ge];try{e[Ge]=n;var u=!0}catch{}var c=ji.call(e);return u&&(i?e[Ge]=o:delete e[Ge]),c}var zo=vo?function(e){return e==null?[]:(e=Y(e),ke(vo(e),function(i){return fu.call(e,i)}))}:us,al=vo?function(e){for(var i=[];e;)Oe(i,zo(e)),e=Ki(e);return i}:us,Ct=Rt;(bo&&Ct(new bo(new ArrayBuffer(1)))!=bn||ei&&Ct(new ei)!=ne||Ao&&Ct(Ao.resolve())!=Ea||wn&&Ct(new wn)!=ie||ni&&Ct(new ni)!=Yn)&&(Ct=function(e){var i=Rt(e),o=i==ve?e.constructor:n,u=o?en(o):"";if(u)switch(u){case $f:return bn;case Gf:return ne;case Xf:return Ea;case Yf:return ie;case Zf:return Yn}return i});function fp(e,i,o){for(var u=-1,c=o.length;++u<c;){var f=o[u],g=f.size;switch(f.type){case"drop":e+=g;break;case"dropRight":i-=g;break;case"take":i=yt(i,e+g);break;case"takeRight":e=pt(e,i-g);break}}return{start:e,end:i}}function gp(e){var i=e.match(Ad);return i?i[1].split(xd):[]}function ul(e,i,o){i=Ne(i,e);for(var u=-1,c=i.length,f=!1;++u<c;){var g=ge(i[u]);if(!(f=e!=null&&o(e,g)))break;e=e[g]}return f||++u!=c?f:(c=e==null?0:e.length,!!c&&Ar(c)&&Ee(g,c)&&(N(e)||nn(e)))}function pp(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&G.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function ll(e){return typeof e.constructor=="function"&&!hi(e)?Ln(Ki(e)):{}}function mp(e,i,o){var u=e.constructor;switch(i){case Zn:return No(e);case Kn:case Jn:return new u(+e);case bn:return Qg(e,o);case Hr:case jr:case zr:case Vr:case Kr:case Jr:case $r:case Gr:case Xr:return Vu(e,o);case ne:return new u;case $n:case Xn:return new u(e);case Gn:return tp(e);case ie:return new u;case Ii:return ep(e)}}function vp(e,i){var o=i.length;if(!o)return e;var u=o-1;return i[u]=(o>1?"& ":"")+i[u],i=i.join(o>2?", ":" "),e.replace(bd,`{
/* [wrapped with `+i+`] */
`)}function bp(e){return N(e)||nn(e)||!!(gu&&e&&e[gu])}function Ee(e,i){var o=typeof e;return i=i==null?De:i,!!i&&(o=="number"||o!="symbol"&&Td.test(e))&&e>-1&&e%1==0&&e<i}function wt(e,i,o){if(!nt(o))return!1;var u=typeof i;return(u=="number"?kt(o)&&Ee(i,o.length):u=="string"&&i in o)?se(o[i],e):!1}function Vo(e,i){if(N(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||Wt(e)?!0:gd.test(e)||!fd.test(e)||i!=null&&e in Y(i)}function Ap(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Ko(e){var i=hr(e),o=d[i];if(typeof o!="function"||!(i in z.prototype))return!1;if(e===o)return!0;var u=Ho(o);return!!u&&e===u[0]}function xp(e){return!!cu&&cu in e}var yp=qi?Re:ls;function hi(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||Rn;return e===o}function cl(e){return e===e&&!nt(e)}function hl(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==n||e in Y(o))}}function Cp(e){var i=vr(e,function(u){return o.size===R&&o.clear(),u}),o=i.cache;return i}function Ep(e,i){var o=e[1],u=i[1],c=o|u,f=c<(Q|ft|Et),g=u==Et&&o==st||u==Et&&o==me&&e[7].length<=i[8]||u==(Et|me)&&i[7].length<=i[8]&&o==st;if(!(f||g))return e;u&Q&&(e[2]=i[2],c|=o&Q?0:Vt);var m=i[3];if(m){var b=e[3];e[3]=b?Ju(b,m,i[4]):m,e[4]=b?Ie(e[3],S):i[4]}return m=i[5],m&&(b=e[5],e[5]=b?$u(b,m,i[6]):m,e[6]=b?Ie(e[5],S):i[6]),m=i[7],m&&(e[7]=m),u&Et&&(e[8]=e[8]==null?i[8]:yt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=c,e}function Rp(e){var i=[];if(e!=null)for(var o in Y(e))i.push(o);return i}function wp(e){return ji.call(e)}function dl(e,i,o){return i=pt(i===n?e.length-1:i,0),function(){for(var u=arguments,c=-1,f=pt(u.length-i,0),g=x(f);++c<f;)g[c]=u[i+c];c=-1;for(var m=x(i+1);++c<i;)m[c]=u[c];return m[i]=o(g),Ft(e,this,m)}}function fl(e,i){return i.length<2?e:Qe(e,Zt(i,0,-1))}function Sp(e,i){for(var o=e.length,u=yt(i.length,o),c=Dt(e);u--;){var f=i[u];e[u]=Ee(f,o)?c[f]:n}return e}function Jo(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var gl=ml(Nu),di=qf||function(e,i){return bt.setTimeout(e,i)},$o=ml(Gg);function pl(e,i,o){var u=i+"";return $o(e,vp(u,Lp(gp(u),o)))}function ml(e){var i=0,o=0;return function(){var u=Vf(),c=Te-(u-o);if(o=u,c>0){if(++i>=Bt)return arguments[0]}else i=0;return e.apply(n,arguments)}}function fr(e,i){var o=-1,u=e.length,c=u-1;for(i=i===n?u:i;++o<i;){var f=Do(o,c),g=e[f];e[f]=e[o],e[o]=g}return e.length=i,e}var vl=Cp(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(pd,function(o,u,c,f){i.push(c?f.replace(Ed,"$1"):u||o)}),i});function ge(e){if(typeof e=="string"||Wt(e))return e;var i=e+"";return i=="0"&&1/e==-Je?"-0":i}function en(e){if(e!=null){try{return Hi.call(e)}catch{}try{return e+""}catch{}}return""}function Lp(e,i){return $t(Qh,function(o){var u="_."+o[0];i&o[1]&&!Ni(e,u)&&e.push(u)}),e.sort()}function bl(e){if(e instanceof z)return e.clone();var i=new Xt(e.__wrapped__,e.__chain__);return i.__actions__=Dt(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function _p(e,i,o){(o?wt(e,i,o):i===n)?i=1:i=pt(W(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var c=0,f=0,g=x(Gi(u/i));c<u;)g[f++]=Zt(e,c,c+=i);return g}function Tp(e){for(var i=-1,o=e==null?0:e.length,u=0,c=[];++i<o;){var f=e[i];f&&(c[u++]=f)}return c}function Dp(){var e=arguments.length;if(!e)return[];for(var i=x(e-1),o=arguments[0],u=e;u--;)i[u-1]=arguments[u];return Oe(N(o)?Dt(o):[o],At(i,1))}var kp=q(function(e,i){return ut(e)?si(e,At(i,1,ut,!0)):[]}),Op=q(function(e,i){var o=Qt(i);return ut(o)&&(o=n),ut(e)?si(e,At(i,1,ut,!0),I(o,2)):[]}),Ip=q(function(e,i){var o=Qt(i);return ut(o)&&(o=n),ut(e)?si(e,At(i,1,ut,!0),n,o):[]});function Pp(e,i,o){var u=e==null?0:e.length;return u?(i=o||i===n?1:W(i),Zt(e,i<0?0:i,u)):[]}function Bp(e,i,o){var u=e==null?0:e.length;return u?(i=o||i===n?1:W(i),i=u-i,Zt(e,0,i<0?0:i)):[]}function Fp(e,i){return e&&e.length?or(e,I(i,3),!0,!0):[]}function Np(e,i){return e&&e.length?or(e,I(i,3),!0):[]}function Mp(e,i,o,u){var c=e==null?0:e.length;return c?(o&&typeof o!="number"&&wt(e,i,o)&&(o=0,u=c),Dg(e,i,o,u)):[]}function Al(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var c=o==null?0:W(o);return c<0&&(c=pt(u+c,0)),Mi(e,I(i,3),c)}function xl(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var c=u-1;return o!==n&&(c=W(o),c=o<0?pt(u+c,0):yt(c,u-1)),Mi(e,I(i,3),c,!0)}function yl(e){var i=e==null?0:e.length;return i?At(e,1):[]}function Wp(e){var i=e==null?0:e.length;return i?At(e,Je):[]}function Up(e,i){var o=e==null?0:e.length;return o?(i=i===n?1:W(i),At(e,i)):[]}function qp(e){for(var i=-1,o=e==null?0:e.length,u={};++i<o;){var c=e[i];u[c[0]]=c[1]}return u}function Cl(e){return e&&e.length?e[0]:n}function Hp(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var c=o==null?0:W(o);return c<0&&(c=pt(u+c,0)),xn(e,i,c)}function jp(e){var i=e==null?0:e.length;return i?Zt(e,0,-1):[]}var zp=q(function(e){var i=et(e,Bo);return i.length&&i[0]===e[0]?wo(i):[]}),Vp=q(function(e){var i=Qt(e),o=et(e,Bo);return i===Qt(o)?i=n:o.pop(),o.length&&o[0]===e[0]?wo(o,I(i,2)):[]}),Kp=q(function(e){var i=Qt(e),o=et(e,Bo);return i=typeof i=="function"?i:n,i&&o.pop(),o.length&&o[0]===e[0]?wo(o,n,i):[]});function Jp(e,i){return e==null?"":jf.call(e,i)}function Qt(e){var i=e==null?0:e.length;return i?e[i-1]:n}function $p(e,i,o){var u=e==null?0:e.length;if(!u)return-1;var c=u;return o!==n&&(c=W(o),c=c<0?pt(u+c,0):yt(c,u-1)),i===i?Lf(e,i,c):Mi(e,nu,c,!0)}function Gp(e,i){return e&&e.length?Iu(e,W(i)):n}var Xp=q(El);function El(e,i){return e&&e.length&&i&&i.length?To(e,i):e}function Yp(e,i,o){return e&&e.length&&i&&i.length?To(e,i,I(o,2)):e}function Zp(e,i,o){return e&&e.length&&i&&i.length?To(e,i,n,o):e}var Qp=Ce(function(e,i){var o=e==null?0:e.length,u=yo(e,i);return Fu(e,et(i,function(c){return Ee(c,o)?+c:c}).sort(Ku)),u});function tm(e,i){var o=[];if(!(e&&e.length))return o;var u=-1,c=[],f=e.length;for(i=I(i,3);++u<f;){var g=e[u];i(g,u,e)&&(o.push(g),c.push(u))}return Fu(e,c),o}function Go(e){return e==null?e:Jf.call(e)}function em(e,i,o){var u=e==null?0:e.length;return u?(o&&typeof o!="number"&&wt(e,i,o)?(i=0,o=u):(i=i==null?0:W(i),o=o===n?u:W(o)),Zt(e,i,o)):[]}function nm(e,i){return rr(e,i)}function im(e,i,o){return Oo(e,i,I(o,2))}function rm(e,i){var o=e==null?0:e.length;if(o){var u=rr(e,i);if(u<o&&se(e[u],i))return u}return-1}function om(e,i){return rr(e,i,!0)}function sm(e,i,o){return Oo(e,i,I(o,2),!0)}function am(e,i){var o=e==null?0:e.length;if(o){var u=rr(e,i,!0)-1;if(se(e[u],i))return u}return-1}function um(e){return e&&e.length?Mu(e):[]}function lm(e,i){return e&&e.length?Mu(e,I(i,2)):[]}function cm(e){var i=e==null?0:e.length;return i?Zt(e,1,i):[]}function hm(e,i,o){return e&&e.length?(i=o||i===n?1:W(i),Zt(e,0,i<0?0:i)):[]}function dm(e,i,o){var u=e==null?0:e.length;return u?(i=o||i===n?1:W(i),i=u-i,Zt(e,i<0?0:i,u)):[]}function fm(e,i){return e&&e.length?or(e,I(i,3),!1,!0):[]}function gm(e,i){return e&&e.length?or(e,I(i,3)):[]}var pm=q(function(e){return Fe(At(e,1,ut,!0))}),mm=q(function(e){var i=Qt(e);return ut(i)&&(i=n),Fe(At(e,1,ut,!0),I(i,2))}),vm=q(function(e){var i=Qt(e);return i=typeof i=="function"?i:n,Fe(At(e,1,ut,!0),n,i)});function bm(e){return e&&e.length?Fe(e):[]}function Am(e,i){return e&&e.length?Fe(e,I(i,2)):[]}function xm(e,i){return i=typeof i=="function"?i:n,e&&e.length?Fe(e,n,i):[]}function Xo(e){if(!(e&&e.length))return[];var i=0;return e=ke(e,function(o){if(ut(o))return i=pt(o.length,i),!0}),fo(i,function(o){return et(e,lo(o))})}function Rl(e,i){if(!(e&&e.length))return[];var o=Xo(e);return i==null?o:et(o,function(u){return Ft(i,n,u)})}var ym=q(function(e,i){return ut(e)?si(e,i):[]}),Cm=q(function(e){return Po(ke(e,ut))}),Em=q(function(e){var i=Qt(e);return ut(i)&&(i=n),Po(ke(e,ut),I(i,2))}),Rm=q(function(e){var i=Qt(e);return i=typeof i=="function"?i:n,Po(ke(e,ut),n,i)}),wm=q(Xo);function Sm(e,i){return Hu(e||[],i||[],oi)}function Lm(e,i){return Hu(e||[],i||[],li)}var _m=q(function(e){var i=e.length,o=i>1?e[i-1]:n;return o=typeof o=="function"?(e.pop(),o):n,Rl(e,o)});function wl(e){var i=d(e);return i.__chain__=!0,i}function Tm(e,i){return i(e),e}function gr(e,i){return i(e)}var Dm=Ce(function(e){var i=e.length,o=i?e[0]:0,u=this.__wrapped__,c=function(f){return yo(f,e)};return i>1||this.__actions__.length||!(u instanceof z)||!Ee(o)?this.thru(c):(u=u.slice(o,+o+(i?1:0)),u.__actions__.push({func:gr,args:[c],thisArg:n}),new Xt(u,this.__chain__).thru(function(f){return i&&!f.length&&f.push(n),f}))});function km(){return wl(this)}function Om(){return new Xt(this.value(),this.__chain__)}function Im(){this.__values__===n&&(this.__values__=Wl(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function Pm(){return this}function Bm(e){for(var i,o=this;o instanceof Qi;){var u=bl(o);u.__index__=0,u.__values__=n,i?c.__wrapped__=u:i=u;var c=u;o=o.__wrapped__}return c.__wrapped__=e,i}function Fm(){var e=this.__wrapped__;if(e instanceof z){var i=e;return this.__actions__.length&&(i=new z(this)),i=i.reverse(),i.__actions__.push({func:gr,args:[Go],thisArg:n}),new Xt(i,this.__chain__)}return this.thru(Go)}function Nm(){return qu(this.__wrapped__,this.__actions__)}var Mm=sr(function(e,i,o){G.call(e,o)?++e[o]:xe(e,o,1)});function Wm(e,i,o){var u=N(e)?tu:Tg;return o&&wt(e,i,o)&&(i=n),u(e,I(i,3))}function Um(e,i){var o=N(e)?ke:Ru;return o(e,I(i,3))}var qm=Zu(Al),Hm=Zu(xl);function jm(e,i){return At(pr(e,i),1)}function zm(e,i){return At(pr(e,i),Je)}function Vm(e,i,o){return o=o===n?1:W(o),At(pr(e,i),o)}function Sl(e,i){var o=N(e)?$t:Be;return o(e,I(i,3))}function Ll(e,i){var o=N(e)?cf:Eu;return o(e,I(i,3))}var Km=sr(function(e,i,o){G.call(e,o)?e[o].push(i):xe(e,o,[i])});function Jm(e,i,o,u){e=kt(e)?e:On(e),o=o&&!u?W(o):0;var c=e.length;return o<0&&(o=pt(c+o,0)),xr(e)?o<=c&&e.indexOf(i,o)>-1:!!c&&xn(e,i,o)>-1}var $m=q(function(e,i,o){var u=-1,c=typeof i=="function",f=kt(e)?x(e.length):[];return Be(e,function(g){f[++u]=c?Ft(i,g,o):ai(g,i,o)}),f}),Gm=sr(function(e,i,o){xe(e,o,i)});function pr(e,i){var o=N(e)?et:Du;return o(e,I(i,3))}function Xm(e,i,o,u){return e==null?[]:(N(i)||(i=i==null?[]:[i]),o=u?n:o,N(o)||(o=o==null?[]:[o]),Pu(e,i,o))}var Ym=sr(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function Zm(e,i,o){var u=N(e)?ao:ru,c=arguments.length<3;return u(e,I(i,4),o,c,Be)}function Qm(e,i,o){var u=N(e)?hf:ru,c=arguments.length<3;return u(e,I(i,4),o,c,Eu)}function tv(e,i){var o=N(e)?ke:Ru;return o(e,br(I(i,3)))}function ev(e){var i=N(e)?Au:Jg;return i(e)}function nv(e,i,o){(o?wt(e,i,o):i===n)?i=1:i=W(i);var u=N(e)?Rg:$g;return u(e,i)}function iv(e){var i=N(e)?wg:Xg;return i(e)}function rv(e){if(e==null)return 0;if(kt(e))return xr(e)?Cn(e):e.length;var i=Ct(e);return i==ne||i==ie?e.size:Lo(e).length}function ov(e,i,o){var u=N(e)?uo:Yg;return o&&wt(e,i,o)&&(i=n),u(e,I(i,3))}var sv=q(function(e,i){if(e==null)return[];var o=i.length;return o>1&&wt(e,i[0],i[1])?i=[]:o>2&&wt(i[0],i[1],i[2])&&(i=[i[0]]),Pu(e,At(i,1),[])}),mr=Uf||function(){return bt.Date.now()};function av(e,i){if(typeof i!="function")throw new Gt(h);return e=W(e),function(){if(--e<1)return i.apply(this,arguments)}}function _l(e,i,o){return i=o?n:i,i=e&&i==null?e.length:i,ye(e,Et,n,n,n,n,i)}function Tl(e,i){var o;if(typeof i!="function")throw new Gt(h);return e=W(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=n),o}}var Yo=q(function(e,i,o){var u=Q;if(o.length){var c=Ie(o,Dn(Yo));u|=k}return ye(e,u,i,o,c)}),Dl=q(function(e,i,o){var u=Q|ft;if(o.length){var c=Ie(o,Dn(Dl));u|=k}return ye(i,u,e,o,c)});function kl(e,i,o){i=o?n:i;var u=ye(e,st,n,n,n,n,n,i);return u.placeholder=kl.placeholder,u}function Ol(e,i,o){i=o?n:i;var u=ye(e,at,n,n,n,n,n,i);return u.placeholder=Ol.placeholder,u}function Il(e,i,o){var u,c,f,g,m,b,C=0,E=!1,w=!1,_=!0;if(typeof e!="function")throw new Gt(h);i=te(i)||0,nt(o)&&(E=!!o.leading,w="maxWait"in o,f=w?pt(te(o.maxWait)||0,i):f,_="trailing"in o?!!o.trailing:_);function D(lt){var ae=u,Se=c;return u=c=n,C=lt,g=e.apply(Se,ae),g}function P(lt){return C=lt,m=di(H,i),E?D(lt):g}function U(lt){var ae=lt-b,Se=lt-C,Zl=i-ae;return w?yt(Zl,f-Se):Zl}function B(lt){var ae=lt-b,Se=lt-C;return b===n||ae>=i||ae<0||w&&Se>=f}function H(){var lt=mr();if(B(lt))return V(lt);m=di(H,U(lt))}function V(lt){return m=n,_&&u?D(lt):(u=c=n,g)}function Ut(){m!==n&&ju(m),C=0,u=b=c=m=n}function St(){return m===n?g:V(mr())}function qt(){var lt=mr(),ae=B(lt);if(u=arguments,c=this,b=lt,ae){if(m===n)return P(b);if(w)return ju(m),m=di(H,i),D(b)}return m===n&&(m=di(H,i)),g}return qt.cancel=Ut,qt.flush=St,qt}var uv=q(function(e,i){return Cu(e,1,i)}),lv=q(function(e,i,o){return Cu(e,te(i)||0,o)});function cv(e){return ye(e,mn)}function vr(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Gt(h);var o=function(){var u=arguments,c=i?i.apply(this,u):u[0],f=o.cache;if(f.has(c))return f.get(c);var g=e.apply(this,u);return o.cache=f.set(c,g)||f,g};return o.cache=new(vr.Cache||Ae),o}vr.Cache=Ae;function br(e){if(typeof e!="function")throw new Gt(h);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function hv(e){return Tl(2,e)}var dv=Zg(function(e,i){i=i.length==1&&N(i[0])?et(i[0],Nt(I())):et(At(i,1),Nt(I()));var o=i.length;return q(function(u){for(var c=-1,f=yt(u.length,o);++c<f;)u[c]=i[c].call(this,u[c]);return Ft(e,this,u)})}),Zo=q(function(e,i){var o=Ie(i,Dn(Zo));return ye(e,k,n,i,o)}),Pl=q(function(e,i){var o=Ie(i,Dn(Pl));return ye(e,Kt,n,i,o)}),fv=Ce(function(e,i){return ye(e,me,n,n,n,i)});function gv(e,i){if(typeof e!="function")throw new Gt(h);return i=i===n?i:W(i),q(e,i)}function pv(e,i){if(typeof e!="function")throw new Gt(h);return i=i==null?0:pt(W(i),0),q(function(o){var u=o[i],c=Me(o,0,i);return u&&Oe(c,u),Ft(e,this,c)})}function mv(e,i,o){var u=!0,c=!0;if(typeof e!="function")throw new Gt(h);return nt(o)&&(u="leading"in o?!!o.leading:u,c="trailing"in o?!!o.trailing:c),Il(e,i,{leading:u,maxWait:i,trailing:c})}function vv(e){return _l(e,1)}function bv(e,i){return Zo(Fo(i),e)}function Av(){if(!arguments.length)return[];var e=arguments[0];return N(e)?e:[e]}function xv(e){return Yt(e,K)}function yv(e,i){return i=typeof i=="function"?i:n,Yt(e,K,i)}function Cv(e){return Yt(e,O|K)}function Ev(e,i){return i=typeof i=="function"?i:n,Yt(e,O|K,i)}function Rv(e,i){return i==null||yu(e,i,mt(i))}function se(e,i){return e===i||e!==e&&i!==i}var wv=cr(Ro),Sv=cr(function(e,i){return e>=i}),nn=Lu(function(){return arguments}())?Lu:function(e){return rt(e)&&G.call(e,"callee")&&!fu.call(e,"callee")},N=x.isArray,Lv=$a?Nt($a):Bg;function kt(e){return e!=null&&Ar(e.length)&&!Re(e)}function ut(e){return rt(e)&&kt(e)}function _v(e){return e===!0||e===!1||rt(e)&&Rt(e)==Kn}var We=Hf||ls,Tv=Ga?Nt(Ga):Fg;function Dv(e){return rt(e)&&e.nodeType===1&&!fi(e)}function kv(e){if(e==null)return!0;if(kt(e)&&(N(e)||typeof e=="string"||typeof e.splice=="function"||We(e)||kn(e)||nn(e)))return!e.length;var i=Ct(e);if(i==ne||i==ie)return!e.size;if(hi(e))return!Lo(e).length;for(var o in e)if(G.call(e,o))return!1;return!0}function Ov(e,i){return ui(e,i)}function Iv(e,i,o){o=typeof o=="function"?o:n;var u=o?o(e,i):n;return u===n?ui(e,i,n,o):!!u}function Qo(e){if(!rt(e))return!1;var i=Rt(e);return i==ki||i==ed||typeof e.message=="string"&&typeof e.name=="string"&&!fi(e)}function Pv(e){return typeof e=="number"&&pu(e)}function Re(e){if(!nt(e))return!1;var i=Rt(e);return i==Oi||i==Ca||i==td||i==id}function Bl(e){return typeof e=="number"&&e==W(e)}function Ar(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=De}function nt(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function rt(e){return e!=null&&typeof e=="object"}var Fl=Xa?Nt(Xa):Mg;function Bv(e,i){return e===i||So(e,i,jo(i))}function Fv(e,i,o){return o=typeof o=="function"?o:n,So(e,i,jo(i),o)}function Nv(e){return Nl(e)&&e!=+e}function Mv(e){if(yp(e))throw new F(l);return _u(e)}function Wv(e){return e===null}function Uv(e){return e==null}function Nl(e){return typeof e=="number"||rt(e)&&Rt(e)==$n}function fi(e){if(!rt(e)||Rt(e)!=ve)return!1;var i=Ki(e);if(i===null)return!0;var o=G.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&Hi.call(o)==Ff}var ts=Ya?Nt(Ya):Wg;function qv(e){return Bl(e)&&e>=-De&&e<=De}var Ml=Za?Nt(Za):Ug;function xr(e){return typeof e=="string"||!N(e)&&rt(e)&&Rt(e)==Xn}function Wt(e){return typeof e=="symbol"||rt(e)&&Rt(e)==Ii}var kn=Qa?Nt(Qa):qg;function Hv(e){return e===n}function jv(e){return rt(e)&&Ct(e)==Yn}function zv(e){return rt(e)&&Rt(e)==od}var Vv=cr(_o),Kv=cr(function(e,i){return e<=i});function Wl(e){if(!e)return[];if(kt(e))return xr(e)?re(e):Dt(e);if(ti&&e[ti])return Rf(e[ti]());var i=Ct(e),o=i==ne?po:i==ie?Wi:On;return o(e)}function we(e){if(!e)return e===0?e:0;if(e=te(e),e===Je||e===-Je){var i=e<0?-1:1;return i*Xh}return e===e?e:0}function W(e){var i=we(e),o=i%1;return i===i?o?i-o:i:0}function Ul(e){return e?Ze(W(e),0,he):0}function te(e){if(typeof e=="number")return e;if(Wt(e))return Ti;if(nt(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=nt(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=ou(e);var o=Sd.test(e);return o||_d.test(e)?af(e.slice(2),o?2:8):wd.test(e)?Ti:+e}function ql(e){return fe(e,Ot(e))}function Jv(e){return e?Ze(W(e),-De,De):e===0?e:0}function $(e){return e==null?"":Mt(e)}var $v=_n(function(e,i){if(hi(i)||kt(i)){fe(i,mt(i),e);return}for(var o in i)G.call(i,o)&&oi(e,o,i[o])}),Hl=_n(function(e,i){fe(i,Ot(i),e)}),yr=_n(function(e,i,o,u){fe(i,Ot(i),e,u)}),Gv=_n(function(e,i,o,u){fe(i,mt(i),e,u)}),Xv=Ce(yo);function Yv(e,i){var o=Ln(e);return i==null?o:xu(o,i)}var Zv=q(function(e,i){e=Y(e);var o=-1,u=i.length,c=u>2?i[2]:n;for(c&&wt(i[0],i[1],c)&&(u=1);++o<u;)for(var f=i[o],g=Ot(f),m=-1,b=g.length;++m<b;){var C=g[m],E=e[C];(E===n||se(E,Rn[C])&&!G.call(e,C))&&(e[C]=f[C])}return e}),Qv=q(function(e){return e.push(n,ol),Ft(jl,n,e)});function tb(e,i){return eu(e,I(i,3),de)}function eb(e,i){return eu(e,I(i,3),Eo)}function nb(e,i){return e==null?e:Co(e,I(i,3),Ot)}function ib(e,i){return e==null?e:wu(e,I(i,3),Ot)}function rb(e,i){return e&&de(e,I(i,3))}function ob(e,i){return e&&Eo(e,I(i,3))}function sb(e){return e==null?[]:nr(e,mt(e))}function ab(e){return e==null?[]:nr(e,Ot(e))}function es(e,i,o){var u=e==null?n:Qe(e,i);return u===n?o:u}function ub(e,i){return e!=null&&ul(e,i,kg)}function ns(e,i){return e!=null&&ul(e,i,Og)}var lb=tl(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=ji.call(i)),e[i]=o},rs(It)),cb=tl(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=ji.call(i)),G.call(e,i)?e[i].push(o):e[i]=[o]},I),hb=q(ai);function mt(e){return kt(e)?bu(e):Lo(e)}function Ot(e){return kt(e)?bu(e,!0):Hg(e)}function db(e,i){var o={};return i=I(i,3),de(e,function(u,c,f){xe(o,i(u,c,f),u)}),o}function fb(e,i){var o={};return i=I(i,3),de(e,function(u,c,f){xe(o,c,i(u,c,f))}),o}var gb=_n(function(e,i,o){ir(e,i,o)}),jl=_n(function(e,i,o,u){ir(e,i,o,u)}),pb=Ce(function(e,i){var o={};if(e==null)return o;var u=!1;i=et(i,function(f){return f=Ne(f,e),u||(u=f.length>1),f}),fe(e,qo(e),o),u&&(o=Yt(o,O|L|K,lp));for(var c=i.length;c--;)Io(o,i[c]);return o});function mb(e,i){return zl(e,br(I(i)))}var vb=Ce(function(e,i){return e==null?{}:zg(e,i)});function zl(e,i){if(e==null)return{};var o=et(qo(e),function(u){return[u]});return i=I(i),Bu(e,o,function(u,c){return i(u,c[0])})}function bb(e,i,o){i=Ne(i,e);var u=-1,c=i.length;for(c||(c=1,e=n);++u<c;){var f=e==null?n:e[ge(i[u])];f===n&&(u=c,f=o),e=Re(f)?f.call(e):f}return e}function Ab(e,i,o){return e==null?e:li(e,i,o)}function xb(e,i,o,u){return u=typeof u=="function"?u:n,e==null?e:li(e,i,o,u)}var Vl=il(mt),Kl=il(Ot);function yb(e,i,o){var u=N(e),c=u||We(e)||kn(e);if(i=I(i,4),o==null){var f=e&&e.constructor;c?o=u?new f:[]:nt(e)?o=Re(f)?Ln(Ki(e)):{}:o={}}return(c?$t:de)(e,function(g,m,b){return i(o,g,m,b)}),o}function Cb(e,i){return e==null?!0:Io(e,i)}function Eb(e,i,o){return e==null?e:Uu(e,i,Fo(o))}function Rb(e,i,o,u){return u=typeof u=="function"?u:n,e==null?e:Uu(e,i,Fo(o),u)}function On(e){return e==null?[]:go(e,mt(e))}function wb(e){return e==null?[]:go(e,Ot(e))}function Sb(e,i,o){return o===n&&(o=i,i=n),o!==n&&(o=te(o),o=o===o?o:0),i!==n&&(i=te(i),i=i===i?i:0),Ze(te(e),i,o)}function Lb(e,i,o){return i=we(i),o===n?(o=i,i=0):o=we(o),e=te(e),Ig(e,i,o)}function _b(e,i,o){if(o&&typeof o!="boolean"&&wt(e,i,o)&&(i=o=n),o===n&&(typeof i=="boolean"?(o=i,i=n):typeof e=="boolean"&&(o=e,e=n)),e===n&&i===n?(e=0,i=1):(e=we(e),i===n?(i=e,e=0):i=we(i)),e>i){var u=e;e=i,i=u}if(o||e%1||i%1){var c=mu();return yt(e+c*(i-e+sf("1e-"+((c+"").length-1))),i)}return Do(e,i)}var Tb=Tn(function(e,i,o){return i=i.toLowerCase(),e+(o?Jl(i):i)});function Jl(e){return is($(e).toLowerCase())}function $l(e){return e=$(e),e&&e.replace(Dd,Af).replace(Gd,"")}function Db(e,i,o){e=$(e),i=Mt(i);var u=e.length;o=o===n?u:Ze(W(o),0,u);var c=o;return o-=i.length,o>=0&&e.slice(o,c)==i}function kb(e){return e=$(e),e&&cd.test(e)?e.replace(wa,xf):e}function Ob(e){return e=$(e),e&&md.test(e)?e.replace(Yr,"\\$&"):e}var Ib=Tn(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),Pb=Tn(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),Bb=Yu("toLowerCase");function Fb(e,i,o){e=$(e),i=W(i);var u=i?Cn(e):0;if(!i||u>=i)return e;var c=(i-u)/2;return lr(Xi(c),o)+e+lr(Gi(c),o)}function Nb(e,i,o){e=$(e),i=W(i);var u=i?Cn(e):0;return i&&u<i?e+lr(i-u,o):e}function Mb(e,i,o){e=$(e),i=W(i);var u=i?Cn(e):0;return i&&u<i?lr(i-u,o)+e:e}function Wb(e,i,o){return o||i==null?i=0:i&&(i=+i),Kf($(e).replace(Zr,""),i||0)}function Ub(e,i,o){return(o?wt(e,i,o):i===n)?i=1:i=W(i),ko($(e),i)}function qb(){var e=arguments,i=$(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var Hb=Tn(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function jb(e,i,o){return o&&typeof o!="number"&&wt(e,i,o)&&(i=o=n),o=o===n?he:o>>>0,o?(e=$(e),e&&(typeof i=="string"||i!=null&&!ts(i))&&(i=Mt(i),!i&&yn(e))?Me(re(e),0,o):e.split(i,o)):[]}var zb=Tn(function(e,i,o){return e+(o?" ":"")+is(i)});function Vb(e,i,o){return e=$(e),o=o==null?0:Ze(W(o),0,e.length),i=Mt(i),e.slice(o,o+i.length)==i}function Kb(e,i,o){var u=d.templateSettings;o&&wt(e,i,o)&&(i=n),e=$(e),i=yr({},i,u,rl);var c=yr({},i.imports,u.imports,rl),f=mt(c),g=go(c,f),m,b,C=0,E=i.interpolate||Pi,w="__p += '",_=mo((i.escape||Pi).source+"|"+E.source+"|"+(E===Sa?Rd:Pi).source+"|"+(i.evaluate||Pi).source+"|$","g"),D="//# sourceURL="+(G.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tf+"]")+`
`;e.replace(_,function(B,H,V,Ut,St,qt){return V||(V=Ut),w+=e.slice(C,qt).replace(kd,yf),H&&(m=!0,w+=`' +
__e(`+H+`) +
'`),St&&(b=!0,w+=`';
`+St+`;
__p += '`),V&&(w+=`' +
((__t = (`+V+`)) == null ? '' : __t) +
'`),C=qt+B.length,B}),w+=`';
`;var P=G.call(i,"variable")&&i.variable;if(!P)w=`with (obj) {
`+w+`
}
`;else if(Cd.test(P))throw new F(p);w=(b?w.replace(sd,""):w).replace(ad,"$1").replace(ud,"$1;"),w="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(m?", __e = _.escape":"")+(b?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var U=Xl(function(){return J(f,D+"return "+w).apply(n,g)});if(U.source=w,Qo(U))throw U;return U}function Jb(e){return $(e).toLowerCase()}function $b(e){return $(e).toUpperCase()}function Gb(e,i,o){if(e=$(e),e&&(o||i===n))return ou(e);if(!e||!(i=Mt(i)))return e;var u=re(e),c=re(i),f=su(u,c),g=au(u,c)+1;return Me(u,f,g).join("")}function Xb(e,i,o){if(e=$(e),e&&(o||i===n))return e.slice(0,lu(e)+1);if(!e||!(i=Mt(i)))return e;var u=re(e),c=au(u,re(i))+1;return Me(u,0,c).join("")}function Yb(e,i,o){if(e=$(e),e&&(o||i===n))return e.replace(Zr,"");if(!e||!(i=Mt(i)))return e;var u=re(e),c=su(u,re(i));return Me(u,c).join("")}function Zb(e,i){var o=_i,u=zn;if(nt(i)){var c="separator"in i?i.separator:c;o="length"in i?W(i.length):o,u="omission"in i?Mt(i.omission):u}e=$(e);var f=e.length;if(yn(e)){var g=re(e);f=g.length}if(o>=f)return e;var m=o-Cn(u);if(m<1)return u;var b=g?Me(g,0,m).join(""):e.slice(0,m);if(c===n)return b+u;if(g&&(m+=b.length-m),ts(c)){if(e.slice(m).search(c)){var C,E=b;for(c.global||(c=mo(c.source,$(La.exec(c))+"g")),c.lastIndex=0;C=c.exec(E);)var w=C.index;b=b.slice(0,w===n?m:w)}}else if(e.indexOf(Mt(c),m)!=m){var _=b.lastIndexOf(c);_>-1&&(b=b.slice(0,_))}return b+u}function Qb(e){return e=$(e),e&&ld.test(e)?e.replace(Ra,_f):e}var t0=Tn(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),is=Yu("toUpperCase");function Gl(e,i,o){return e=$(e),i=o?n:i,i===n?Ef(e)?kf(e):gf(e):e.match(i)||[]}var Xl=q(function(e,i){try{return Ft(e,n,i)}catch(o){return Qo(o)?o:new F(o)}}),e0=Ce(function(e,i){return $t(i,function(o){o=ge(o),xe(e,o,Yo(e[o],e))}),e});function n0(e){var i=e==null?0:e.length,o=I();return e=i?et(e,function(u){if(typeof u[1]!="function")throw new Gt(h);return[o(u[0]),u[1]]}):[],q(function(u){for(var c=-1;++c<i;){var f=e[c];if(Ft(f[0],this,u))return Ft(f[1],this,u)}})}function i0(e){return _g(Yt(e,O))}function rs(e){return function(){return e}}function r0(e,i){return e==null||e!==e?i:e}var o0=Qu(),s0=Qu(!0);function It(e){return e}function os(e){return Tu(typeof e=="function"?e:Yt(e,O))}function a0(e){return ku(Yt(e,O))}function u0(e,i){return Ou(e,Yt(i,O))}var l0=q(function(e,i){return function(o){return ai(o,e,i)}}),c0=q(function(e,i){return function(o){return ai(e,o,i)}});function ss(e,i,o){var u=mt(i),c=nr(i,u);o==null&&!(nt(i)&&(c.length||!u.length))&&(o=i,i=e,e=this,c=nr(i,mt(i)));var f=!(nt(o)&&"chain"in o)||!!o.chain,g=Re(e);return $t(c,function(m){var b=i[m];e[m]=b,g&&(e.prototype[m]=function(){var C=this.__chain__;if(f||C){var E=e(this.__wrapped__),w=E.__actions__=Dt(this.__actions__);return w.push({func:b,args:arguments,thisArg:e}),E.__chain__=C,E}return b.apply(e,Oe([this.value()],arguments))})}),e}function h0(){return bt._===this&&(bt._=Nf),this}function as(){}function d0(e){return e=W(e),q(function(i){return Iu(i,e)})}var f0=Mo(et),g0=Mo(tu),p0=Mo(uo);function Yl(e){return Vo(e)?lo(ge(e)):Vg(e)}function m0(e){return function(i){return e==null?n:Qe(e,i)}}var v0=el(),b0=el(!0);function us(){return[]}function ls(){return!1}function A0(){return{}}function x0(){return""}function y0(){return!0}function C0(e,i){if(e=W(e),e<1||e>De)return[];var o=he,u=yt(e,he);i=I(i),e-=he;for(var c=fo(u,i);++o<e;)i(o);return c}function E0(e){return N(e)?et(e,ge):Wt(e)?[e]:Dt(vl($(e)))}function R0(e){var i=++Bf;return $(e)+i}var w0=ur(function(e,i){return e+i},0),S0=Wo("ceil"),L0=ur(function(e,i){return e/i},1),_0=Wo("floor");function T0(e){return e&&e.length?er(e,It,Ro):n}function D0(e,i){return e&&e.length?er(e,I(i,2),Ro):n}function k0(e){return iu(e,It)}function O0(e,i){return iu(e,I(i,2))}function I0(e){return e&&e.length?er(e,It,_o):n}function P0(e,i){return e&&e.length?er(e,I(i,2),_o):n}var B0=ur(function(e,i){return e*i},1),F0=Wo("round"),N0=ur(function(e,i){return e-i},0);function M0(e){return e&&e.length?ho(e,It):0}function W0(e,i){return e&&e.length?ho(e,I(i,2)):0}return d.after=av,d.ary=_l,d.assign=$v,d.assignIn=Hl,d.assignInWith=yr,d.assignWith=Gv,d.at=Xv,d.before=Tl,d.bind=Yo,d.bindAll=e0,d.bindKey=Dl,d.castArray=Av,d.chain=wl,d.chunk=_p,d.compact=Tp,d.concat=Dp,d.cond=n0,d.conforms=i0,d.constant=rs,d.countBy=Mm,d.create=Yv,d.curry=kl,d.curryRight=Ol,d.debounce=Il,d.defaults=Zv,d.defaultsDeep=Qv,d.defer=uv,d.delay=lv,d.difference=kp,d.differenceBy=Op,d.differenceWith=Ip,d.drop=Pp,d.dropRight=Bp,d.dropRightWhile=Fp,d.dropWhile=Np,d.fill=Mp,d.filter=Um,d.flatMap=jm,d.flatMapDeep=zm,d.flatMapDepth=Vm,d.flatten=yl,d.flattenDeep=Wp,d.flattenDepth=Up,d.flip=cv,d.flow=o0,d.flowRight=s0,d.fromPairs=qp,d.functions=sb,d.functionsIn=ab,d.groupBy=Km,d.initial=jp,d.intersection=zp,d.intersectionBy=Vp,d.intersectionWith=Kp,d.invert=lb,d.invertBy=cb,d.invokeMap=$m,d.iteratee=os,d.keyBy=Gm,d.keys=mt,d.keysIn=Ot,d.map=pr,d.mapKeys=db,d.mapValues=fb,d.matches=a0,d.matchesProperty=u0,d.memoize=vr,d.merge=gb,d.mergeWith=jl,d.method=l0,d.methodOf=c0,d.mixin=ss,d.negate=br,d.nthArg=d0,d.omit=pb,d.omitBy=mb,d.once=hv,d.orderBy=Xm,d.over=f0,d.overArgs=dv,d.overEvery=g0,d.overSome=p0,d.partial=Zo,d.partialRight=Pl,d.partition=Ym,d.pick=vb,d.pickBy=zl,d.property=Yl,d.propertyOf=m0,d.pull=Xp,d.pullAll=El,d.pullAllBy=Yp,d.pullAllWith=Zp,d.pullAt=Qp,d.range=v0,d.rangeRight=b0,d.rearg=fv,d.reject=tv,d.remove=tm,d.rest=gv,d.reverse=Go,d.sampleSize=nv,d.set=Ab,d.setWith=xb,d.shuffle=iv,d.slice=em,d.sortBy=sv,d.sortedUniq=um,d.sortedUniqBy=lm,d.split=jb,d.spread=pv,d.tail=cm,d.take=hm,d.takeRight=dm,d.takeRightWhile=fm,d.takeWhile=gm,d.tap=Tm,d.throttle=mv,d.thru=gr,d.toArray=Wl,d.toPairs=Vl,d.toPairsIn=Kl,d.toPath=E0,d.toPlainObject=ql,d.transform=yb,d.unary=vv,d.union=pm,d.unionBy=mm,d.unionWith=vm,d.uniq=bm,d.uniqBy=Am,d.uniqWith=xm,d.unset=Cb,d.unzip=Xo,d.unzipWith=Rl,d.update=Eb,d.updateWith=Rb,d.values=On,d.valuesIn=wb,d.without=ym,d.words=Gl,d.wrap=bv,d.xor=Cm,d.xorBy=Em,d.xorWith=Rm,d.zip=wm,d.zipObject=Sm,d.zipObjectDeep=Lm,d.zipWith=_m,d.entries=Vl,d.entriesIn=Kl,d.extend=Hl,d.extendWith=yr,ss(d,d),d.add=w0,d.attempt=Xl,d.camelCase=Tb,d.capitalize=Jl,d.ceil=S0,d.clamp=Sb,d.clone=xv,d.cloneDeep=Cv,d.cloneDeepWith=Ev,d.cloneWith=yv,d.conformsTo=Rv,d.deburr=$l,d.defaultTo=r0,d.divide=L0,d.endsWith=Db,d.eq=se,d.escape=kb,d.escapeRegExp=Ob,d.every=Wm,d.find=qm,d.findIndex=Al,d.findKey=tb,d.findLast=Hm,d.findLastIndex=xl,d.findLastKey=eb,d.floor=_0,d.forEach=Sl,d.forEachRight=Ll,d.forIn=nb,d.forInRight=ib,d.forOwn=rb,d.forOwnRight=ob,d.get=es,d.gt=wv,d.gte=Sv,d.has=ub,d.hasIn=ns,d.head=Cl,d.identity=It,d.includes=Jm,d.indexOf=Hp,d.inRange=Lb,d.invoke=hb,d.isArguments=nn,d.isArray=N,d.isArrayBuffer=Lv,d.isArrayLike=kt,d.isArrayLikeObject=ut,d.isBoolean=_v,d.isBuffer=We,d.isDate=Tv,d.isElement=Dv,d.isEmpty=kv,d.isEqual=Ov,d.isEqualWith=Iv,d.isError=Qo,d.isFinite=Pv,d.isFunction=Re,d.isInteger=Bl,d.isLength=Ar,d.isMap=Fl,d.isMatch=Bv,d.isMatchWith=Fv,d.isNaN=Nv,d.isNative=Mv,d.isNil=Uv,d.isNull=Wv,d.isNumber=Nl,d.isObject=nt,d.isObjectLike=rt,d.isPlainObject=fi,d.isRegExp=ts,d.isSafeInteger=qv,d.isSet=Ml,d.isString=xr,d.isSymbol=Wt,d.isTypedArray=kn,d.isUndefined=Hv,d.isWeakMap=jv,d.isWeakSet=zv,d.join=Jp,d.kebabCase=Ib,d.last=Qt,d.lastIndexOf=$p,d.lowerCase=Pb,d.lowerFirst=Bb,d.lt=Vv,d.lte=Kv,d.max=T0,d.maxBy=D0,d.mean=k0,d.meanBy=O0,d.min=I0,d.minBy=P0,d.stubArray=us,d.stubFalse=ls,d.stubObject=A0,d.stubString=x0,d.stubTrue=y0,d.multiply=B0,d.nth=Gp,d.noConflict=h0,d.noop=as,d.now=mr,d.pad=Fb,d.padEnd=Nb,d.padStart=Mb,d.parseInt=Wb,d.random=_b,d.reduce=Zm,d.reduceRight=Qm,d.repeat=Ub,d.replace=qb,d.result=bb,d.round=F0,d.runInContext=v,d.sample=ev,d.size=rv,d.snakeCase=Hb,d.some=ov,d.sortedIndex=nm,d.sortedIndexBy=im,d.sortedIndexOf=rm,d.sortedLastIndex=om,d.sortedLastIndexBy=sm,d.sortedLastIndexOf=am,d.startCase=zb,d.startsWith=Vb,d.subtract=N0,d.sum=M0,d.sumBy=W0,d.template=Kb,d.times=C0,d.toFinite=we,d.toInteger=W,d.toLength=Ul,d.toLower=Jb,d.toNumber=te,d.toSafeInteger=Jv,d.toString=$,d.toUpper=$b,d.trim=Gb,d.trimEnd=Xb,d.trimStart=Yb,d.truncate=Zb,d.unescape=Qb,d.uniqueId=R0,d.upperCase=t0,d.upperFirst=is,d.each=Sl,d.eachRight=Ll,d.first=Cl,ss(d,function(){var e={};return de(d,function(i,o){G.call(d.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),d.VERSION=r,$t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),$t(["drop","take"],function(e,i){z.prototype[e]=function(o){o=o===n?1:pt(W(o),0);var u=this.__filtered__&&!i?new z(this):this.clone();return u.__filtered__?u.__takeCount__=yt(o,u.__takeCount__):u.__views__.push({size:yt(o,he),type:e+(u.__dir__<0?"Right":"")}),u},z.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),$t(["filter","map","takeWhile"],function(e,i){var o=i+1,u=o==ce||o==Vn;z.prototype[e]=function(c){var f=this.clone();return f.__iteratees__.push({iteratee:I(c,3),type:o}),f.__filtered__=f.__filtered__||u,f}}),$t(["head","last"],function(e,i){var o="take"+(i?"Right":"");z.prototype[e]=function(){return this[o](1).value()[0]}}),$t(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");z.prototype[e]=function(){return this.__filtered__?new z(this):this[o](1)}}),z.prototype.compact=function(){return this.filter(It)},z.prototype.find=function(e){return this.filter(e).head()},z.prototype.findLast=function(e){return this.reverse().find(e)},z.prototype.invokeMap=q(function(e,i){return typeof e=="function"?new z(this):this.map(function(o){return ai(o,e,i)})}),z.prototype.reject=function(e){return this.filter(br(I(e)))},z.prototype.slice=function(e,i){e=W(e);var o=this;return o.__filtered__&&(e>0||i<0)?new z(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==n&&(i=W(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},z.prototype.toArray=function(){return this.take(he)},de(z.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),c=d[u?"take"+(i=="last"?"Right":""):i],f=u||/^find/.test(i);!c||(d.prototype[i]=function(){var g=this.__wrapped__,m=u?[1]:arguments,b=g instanceof z,C=m[0],E=b||N(g),w=function(H){var V=c.apply(d,Oe([H],m));return u&&_?V[0]:V};E&&o&&typeof C=="function"&&C.length!=1&&(b=E=!1);var _=this.__chain__,D=!!this.__actions__.length,P=f&&!_,U=b&&!D;if(!f&&E){g=U?g:new z(this);var B=e.apply(g,m);return B.__actions__.push({func:gr,args:[w],thisArg:n}),new Xt(B,_)}return P&&U?e.apply(this,m):(B=this.thru(w),P?u?B.value()[0]:B.value():B)})}),$t(["pop","push","shift","sort","splice","unshift"],function(e){var i=Ui[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var c=arguments;if(u&&!this.__chain__){var f=this.value();return i.apply(N(f)?f:[],c)}return this[o](function(g){return i.apply(N(g)?g:[],c)})}}),de(z.prototype,function(e,i){var o=d[i];if(o){var u=o.name+"";G.call(Sn,u)||(Sn[u]=[]),Sn[u].push({name:i,func:o})}}),Sn[ar(n,ft).name]=[{name:"wrapper",func:n}],z.prototype.clone=Qf,z.prototype.reverse=tg,z.prototype.value=eg,d.prototype.at=Dm,d.prototype.chain=km,d.prototype.commit=Om,d.prototype.next=Im,d.prototype.plant=Bm,d.prototype.reverse=Fm,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=Nm,d.prototype.first=d.prototype.head,ti&&(d.prototype[ti]=Pm),d},En=Of();$e?(($e.exports=En)._=En,ro._=En):bt._=En}).call(mi)})(ea,ea.exports);const fx=ea.exports;var Ih={exports:{}},ga={exports:{}},Ph=function(t,n){return function(){for(var a=new Array(arguments.length),l=0;l<a.length;l++)a[l]=arguments[l];return t.apply(n,a)}},gx=Ph,pa=Object.prototype.toString,ma=function(s){return function(t){var n=pa.call(t);return s[n]||(s[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function pn(s){return s=s.toLowerCase(),function(n){return ma(n)===s}}function va(s){return Array.isArray(s)}function kr(s){return typeof s>"u"}function px(s){return s!==null&&!kr(s)&&s.constructor!==null&&!kr(s.constructor)&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}var Bh=pn("ArrayBuffer");function mx(s){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&Bh(s.buffer),t}function vx(s){return typeof s=="string"}function bx(s){return typeof s=="number"}function Fh(s){return s!==null&&typeof s=="object"}function wr(s){if(ma(s)!=="object")return!1;var t=Object.getPrototypeOf(s);return t===null||t===Object.prototype}var Ax=pn("Date"),xx=pn("File"),yx=pn("Blob"),Cx=pn("FileList");function ba(s){return pa.call(s)==="[object Function]"}function Ex(s){return Fh(s)&&ba(s.pipe)}function Rx(s){var t="[object FormData]";return s&&(typeof FormData=="function"&&s instanceof FormData||pa.call(s)===t||ba(s.toString)&&s.toString()===t)}var wx=pn("URLSearchParams");function Sx(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function Lx(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Aa(s,t){if(!(s===null||typeof s>"u"))if(typeof s!="object"&&(s=[s]),va(s))for(var n=0,r=s.length;n<r;n++)t.call(null,s[n],n,s);else for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.call(null,s[a],a,s)}function na(){var s={};function t(a,l){wr(s[l])&&wr(a)?s[l]=na(s[l],a):wr(a)?s[l]=na({},a):va(a)?s[l]=a.slice():s[l]=a}for(var n=0,r=arguments.length;n<r;n++)Aa(arguments[n],t);return s}function _x(s,t,n){return Aa(t,function(a,l){n&&typeof a=="function"?s[l]=gx(a,n):s[l]=a}),s}function Tx(s){return s.charCodeAt(0)===65279&&(s=s.slice(1)),s}function Dx(s,t,n,r){s.prototype=Object.create(t.prototype,r),s.prototype.constructor=s,n&&Object.assign(s.prototype,n)}function kx(s,t,n){var r,a,l,h={};t=t||{};do{for(r=Object.getOwnPropertyNames(s),a=r.length;a-- >0;)l=r[a],h[l]||(t[l]=s[l],h[l]=!0);s=Object.getPrototypeOf(s)}while(s&&(!n||n(s,t))&&s!==Object.prototype);return t}function Ox(s,t,n){s=String(s),(n===void 0||n>s.length)&&(n=s.length),n-=t.length;var r=s.indexOf(t,n);return r!==-1&&r===n}function Ix(s){if(!s)return null;var t=s.length;if(kr(t))return null;for(var n=new Array(t);t-- >0;)n[t]=s[t];return n}var Px=function(s){return function(t){return s&&t instanceof s}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),xt={isArray:va,isArrayBuffer:Bh,isBuffer:px,isFormData:Rx,isArrayBufferView:mx,isString:vx,isNumber:bx,isObject:Fh,isPlainObject:wr,isUndefined:kr,isDate:Ax,isFile:xx,isBlob:yx,isFunction:ba,isStream:Ex,isURLSearchParams:wx,isStandardBrowserEnv:Lx,forEach:Aa,merge:na,extend:_x,trim:Sx,stripBOM:Tx,inherits:Dx,toFlatObject:kx,kindOf:ma,kindOfTest:pn,endsWith:Ox,toArray:Ix,isTypedArray:Px,isFileList:Cx},In=xt;function wc(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Nh=function(t,n,r){if(!n)return t;var a;if(r)a=r(n);else if(In.isURLSearchParams(n))a=n.toString();else{var l=[];In.forEach(n,function(A,R){A===null||typeof A>"u"||(In.isArray(A)?R=R+"[]":A=[A],In.forEach(A,function(O){In.isDate(O)?O=O.toISOString():In.isObject(O)&&(O=JSON.stringify(O)),l.push(wc(R)+"="+wc(O))}))}),a=l.join("&")}if(a){var h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t},Bx=xt;function Nr(){this.handlers=[]}Nr.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Nr.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Nr.prototype.forEach=function(t){Bx.forEach(this.handlers,function(r){r!==null&&t(r)})};var Fx=Nr,Nx=xt,Mx=function(t,n){Nx.forEach(t,function(a,l){l!==n&&l.toUpperCase()===n.toUpperCase()&&(t[n]=a,delete t[l])})},Mh=xt;function Wn(s,t,n,r,a){Error.call(this),this.message=s,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}Mh.inherits(Wn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Wh=Wn.prototype,Uh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(s){Uh[s]={value:s}});Object.defineProperties(Wn,Uh);Object.defineProperty(Wh,"isAxiosError",{value:!0});Wn.from=function(s,t,n,r,a,l){var h=Object.create(Wh);return Mh.toFlatObject(s,h,function(A){return A!==Error.prototype}),Wn.call(h,s.message,t,n,r,a),h.name=s.name,l&&Object.assign(h,l),h};var jn=Wn,qh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ue=xt;function Wx(s,t){t=t||new FormData;var n=[];function r(l){return l===null?"":ue.isDate(l)?l.toISOString():ue.isArrayBuffer(l)||ue.isTypedArray(l)?typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}function a(l,h){if(ue.isPlainObject(l)||ue.isArray(l)){if(n.indexOf(l)!==-1)throw Error("Circular reference detected in "+h);n.push(l),ue.forEach(l,function(A,R){if(!ue.isUndefined(A)){var S=h?h+"."+R:R,O;if(A&&!h&&typeof A=="object"){if(ue.endsWith(R,"{}"))A=JSON.stringify(A);else if(ue.endsWith(R,"[]")&&(O=ue.toArray(A))){O.forEach(function(L){!ue.isUndefined(L)&&t.append(S,r(L))});return}}a(A,S)}}),n.pop()}else t.append(h,r(l))}return a(s),t}var Hh=Wx,_s,Sc;function Ux(){if(Sc)return _s;Sc=1;var s=jn;return _s=function(n,r,a){var l=a.config.validateStatus;!a.status||!l||l(a.status)?n(a):r(new s("Request failed with status code "+a.status,[s.ERR_BAD_REQUEST,s.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))},_s}var Ts,Lc;function qx(){if(Lc)return Ts;Lc=1;var s=xt;return Ts=s.isStandardBrowserEnv()?function(){return{write:function(r,a,l,h,p,A){var R=[];R.push(r+"="+encodeURIComponent(a)),s.isNumber(l)&&R.push("expires="+new Date(l).toGMTString()),s.isString(h)&&R.push("path="+h),s.isString(p)&&R.push("domain="+p),A===!0&&R.push("secure"),document.cookie=R.join("; ")},read:function(r){var a=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ts}var Hx=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},jx=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},zx=Hx,Vx=jx,jh=function(t,n){return t&&!zx(n)?Vx(t,n):n},Ds,_c;function Kx(){if(_c)return Ds;_c=1;var s=xt,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ds=function(r){var a={},l,h,p;return r&&s.forEach(r.split(`
`),function(R){if(p=R.indexOf(":"),l=s.trim(R.substr(0,p)).toLowerCase(),h=s.trim(R.substr(p+1)),l){if(a[l]&&t.indexOf(l)>=0)return;l==="set-cookie"?a[l]=(a[l]?a[l]:[]).concat([h]):a[l]=a[l]?a[l]+", "+h:h}}),a},Ds}var ks,Tc;function Jx(){if(Tc)return ks;Tc=1;var s=xt;return ks=s.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),a;function l(h){var p=h;return n&&(r.setAttribute("href",p),p=r.href),r.setAttribute("href",p),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=l(window.location.href),function(p){var A=s.isString(p)?l(p):p;return A.protocol===a.protocol&&A.host===a.host}}():function(){return function(){return!0}}(),ks}var Os,Dc;function Mr(){if(Dc)return Os;Dc=1;var s=jn,t=xt;function n(r){s.call(this,r==null?"canceled":r,s.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,s,{__CANCEL__:!0}),Os=n,Os}var Is,kc;function $x(){return kc||(kc=1,Is=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),Is}var Ps,Oc;function Ic(){if(Oc)return Ps;Oc=1;var s=xt,t=Ux(),n=qx(),r=Nh,a=jh,l=Kx(),h=Jx(),p=qh,A=jn,R=Mr(),S=$x();return Ps=function(L){return new Promise(function(Tt,ot){var Q=L.data,ft=L.headers,Vt=L.responseType,st;function at(){L.cancelToken&&L.cancelToken.unsubscribe(st),L.signal&&L.signal.removeEventListener("abort",st)}s.isFormData(Q)&&s.isStandardBrowserEnv()&&delete ft["Content-Type"];var k=new XMLHttpRequest;if(L.auth){var Kt=L.auth.username||"",Et=L.auth.password?unescape(encodeURIComponent(L.auth.password)):"";ft.Authorization="Basic "+btoa(Kt+":"+Et)}var me=a(L.baseURL,L.url);k.open(L.method.toUpperCase(),r(me,L.params,L.paramsSerializer),!0),k.timeout=L.timeout;function mn(){if(!!k){var Bt="getAllResponseHeaders"in k?l(k.getAllResponseHeaders()):null,Te=!Vt||Vt==="text"||Vt==="json"?k.responseText:k.response,ce={data:Te,status:k.status,statusText:k.statusText,headers:Bt,config:L,request:k};t(function(Vn){Tt(Vn),at()},function(Vn){ot(Vn),at()},ce),k=null}}if("onloadend"in k?k.onloadend=mn:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(mn)},k.onabort=function(){!k||(ot(new A("Request aborted",A.ECONNABORTED,L,k)),k=null)},k.onerror=function(){ot(new A("Network Error",A.ERR_NETWORK,L,k,k)),k=null},k.ontimeout=function(){var Te=L.timeout?"timeout of "+L.timeout+"ms exceeded":"timeout exceeded",ce=L.transitional||p;L.timeoutErrorMessage&&(Te=L.timeoutErrorMessage),ot(new A(Te,ce.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,L,k)),k=null},s.isStandardBrowserEnv()){var _i=(L.withCredentials||h(me))&&L.xsrfCookieName?n.read(L.xsrfCookieName):void 0;_i&&(ft[L.xsrfHeaderName]=_i)}"setRequestHeader"in k&&s.forEach(ft,function(Te,ce){typeof Q>"u"&&ce.toLowerCase()==="content-type"?delete ft[ce]:k.setRequestHeader(ce,Te)}),s.isUndefined(L.withCredentials)||(k.withCredentials=!!L.withCredentials),Vt&&Vt!=="json"&&(k.responseType=L.responseType),typeof L.onDownloadProgress=="function"&&k.addEventListener("progress",L.onDownloadProgress),typeof L.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",L.onUploadProgress),(L.cancelToken||L.signal)&&(st=function(Bt){!k||(ot(!Bt||Bt&&Bt.type?new R:Bt),k.abort(),k=null)},L.cancelToken&&L.cancelToken.subscribe(st),L.signal&&(L.signal.aborted?st():L.signal.addEventListener("abort",st))),Q||(Q=null);var zn=S(me);if(zn&&["http","https","file"].indexOf(zn)===-1){ot(new A("Unsupported protocol "+zn+":",A.ERR_BAD_REQUEST,L));return}k.send(Q)})},Ps}var Bs,Pc;function Gx(){return Pc||(Pc=1,Bs=null),Bs}var vt=xt,Bc=Mx,Fc=jn,Xx=qh,Yx=Hh,Zx={"Content-Type":"application/x-www-form-urlencoded"};function Nc(s,t){!vt.isUndefined(s)&&vt.isUndefined(s["Content-Type"])&&(s["Content-Type"]=t)}function Qx(){var s;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(s=Ic()),s}function ty(s,t,n){if(vt.isString(s))try{return(t||JSON.parse)(s),vt.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(s)}var Wr={transitional:Xx,adapter:Qx(),transformRequest:[function(t,n){if(Bc(n,"Accept"),Bc(n,"Content-Type"),vt.isFormData(t)||vt.isArrayBuffer(t)||vt.isBuffer(t)||vt.isStream(t)||vt.isFile(t)||vt.isBlob(t))return t;if(vt.isArrayBufferView(t))return t.buffer;if(vt.isURLSearchParams(t))return Nc(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r=vt.isObject(t),a=n&&n["Content-Type"],l;if((l=vt.isFileList(t))||r&&a==="multipart/form-data"){var h=this.env&&this.env.FormData;return Yx(l?{"files[]":t}:t,h&&new h)}else if(r||a==="application/json")return Nc(n,"application/json"),ty(t);return t}],transformResponse:[function(t){var n=this.transitional||Wr.transitional,r=n&&n.silentJSONParsing,a=n&&n.forcedJSONParsing,l=!r&&this.responseType==="json";if(l||a&&vt.isString(t)&&t.length)try{return JSON.parse(t)}catch(h){if(l)throw h.name==="SyntaxError"?Fc.from(h,Fc.ERR_BAD_RESPONSE,this,null,this.response):h}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gx()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};vt.forEach(["delete","get","head"],function(t){Wr.headers[t]={}});vt.forEach(["post","put","patch"],function(t){Wr.headers[t]=vt.merge(Zx)});var xa=Wr,ey=xt,ny=xa,iy=function(t,n,r){var a=this||ny;return ey.forEach(r,function(h){t=h.call(a,t,n)}),t},Fs,Mc;function zh(){return Mc||(Mc=1,Fs=function(t){return!!(t&&t.__CANCEL__)}),Fs}var Wc=xt,Ns=iy,ry=zh(),oy=xa,sy=Mr();function Ms(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new sy}var ay=function(t){Ms(t),t.headers=t.headers||{},t.data=Ns.call(t,t.data,t.headers,t.transformRequest),t.headers=Wc.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Wc.forEach(["delete","get","head","post","put","patch","common"],function(a){delete t.headers[a]});var n=t.adapter||oy.adapter;return n(t).then(function(a){return Ms(t),a.data=Ns.call(t,a.data,a.headers,t.transformResponse),a},function(a){return ry(a)||(Ms(t),a&&a.response&&(a.response.data=Ns.call(t,a.response.data,a.response.headers,t.transformResponse))),Promise.reject(a)})},Ht=xt,Vh=function(t,n){n=n||{};var r={};function a(S,O){return Ht.isPlainObject(S)&&Ht.isPlainObject(O)?Ht.merge(S,O):Ht.isPlainObject(O)?Ht.merge({},O):Ht.isArray(O)?O.slice():O}function l(S){if(Ht.isUndefined(n[S])){if(!Ht.isUndefined(t[S]))return a(void 0,t[S])}else return a(t[S],n[S])}function h(S){if(!Ht.isUndefined(n[S]))return a(void 0,n[S])}function p(S){if(Ht.isUndefined(n[S])){if(!Ht.isUndefined(t[S]))return a(void 0,t[S])}else return a(void 0,n[S])}function A(S){if(S in n)return a(t[S],n[S]);if(S in t)return a(void 0,t[S])}var R={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:A};return Ht.forEach(Object.keys(t).concat(Object.keys(n)),function(O){var L=R[O]||l,K=L(O);Ht.isUndefined(K)&&L!==A||(r[O]=K)}),r},Ws,Uc;function Kh(){return Uc||(Uc=1,Ws={version:"0.27.2"}),Ws}var uy=Kh().version,je=jn,ya={};["object","boolean","number","function","string","symbol"].forEach(function(s,t){ya[s]=function(r){return typeof r===s||"a"+(t<1?"n ":" ")+s}});var qc={};ya.transitional=function(t,n,r){function a(l,h){return"[Axios v"+uy+"] Transitional option '"+l+"'"+h+(r?". "+r:"")}return function(l,h,p){if(t===!1)throw new je(a(h," has been removed"+(n?" in "+n:"")),je.ERR_DEPRECATED);return n&&!qc[h]&&(qc[h]=!0,console.warn(a(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,h,p):!0}};function ly(s,t,n){if(typeof s!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(s),a=r.length;a-- >0;){var l=r[a],h=t[l];if(h){var p=s[l],A=p===void 0||h(p,l,s);if(A!==!0)throw new je("option "+l+" must be "+A,je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new je("Unknown option "+l,je.ERR_BAD_OPTION)}}var cy={assertOptions:ly,validators:ya},Jh=xt,hy=Nh,Hc=Fx,jc=ay,Ur=Vh,dy=jh,$h=cy,Pn=$h.validators;function Un(s){this.defaults=s,this.interceptors={request:new Hc,response:new Hc}}Un.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ur(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&$h.assertOptions(r,{silentJSONParsing:Pn.transitional(Pn.boolean),forcedJSONParsing:Pn.transitional(Pn.boolean),clarifyTimeoutError:Pn.transitional(Pn.boolean)},!1);var a=[],l=!0;this.interceptors.request.forEach(function(K){typeof K.runWhen=="function"&&K.runWhen(n)===!1||(l=l&&K.synchronous,a.unshift(K.fulfilled,K.rejected))});var h=[];this.interceptors.response.forEach(function(K){h.push(K.fulfilled,K.rejected)});var p;if(!l){var A=[jc,void 0];for(Array.prototype.unshift.apply(A,a),A=A.concat(h),p=Promise.resolve(n);A.length;)p=p.then(A.shift(),A.shift());return p}for(var R=n;a.length;){var S=a.shift(),O=a.shift();try{R=S(R)}catch(L){O(L);break}}try{p=jc(R)}catch(L){return Promise.reject(L)}for(;h.length;)p=p.then(h.shift(),h.shift());return p};Un.prototype.getUri=function(t){t=Ur(this.defaults,t);var n=dy(t.baseURL,t.url);return hy(n,t.params,t.paramsSerializer)};Jh.forEach(["delete","get","head","options"],function(t){Un.prototype[t]=function(n,r){return this.request(Ur(r||{},{method:t,url:n,data:(r||{}).data}))}});Jh.forEach(["post","put","patch"],function(t){function n(r){return function(l,h,p){return this.request(Ur(p||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}Un.prototype[t]=n(),Un.prototype[t+"Form"]=n(!0)});var fy=Un,Us,zc;function gy(){if(zc)return Us;zc=1;var s=Mr();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(h){r=h});var a=this;this.promise.then(function(l){if(!!a._listeners){var h,p=a._listeners.length;for(h=0;h<p;h++)a._listeners[h](l);a._listeners=null}}),this.promise.then=function(l){var h,p=new Promise(function(A){a.subscribe(A),h=A}).then(l);return p.cancel=function(){a.unsubscribe(h)},p},n(function(h){a.reason||(a.reason=new s(h),r(a.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}},t.source=function(){var r,a=new t(function(h){r=h});return{token:a,cancel:r}},Us=t,Us}var qs,Vc;function py(){return Vc||(Vc=1,qs=function(t){return function(r){return t.apply(null,r)}}),qs}var Hs,Kc;function my(){if(Kc)return Hs;Kc=1;var s=xt;return Hs=function(n){return s.isObject(n)&&n.isAxiosError===!0},Hs}var Jc=xt,vy=Ph,Sr=fy,by=Vh,Ay=xa;function Gh(s){var t=new Sr(s),n=vy(Sr.prototype.request,t);return Jc.extend(n,Sr.prototype,t),Jc.extend(n,t),n.create=function(a){return Gh(by(s,a))},n}var Pt=Gh(Ay);Pt.Axios=Sr;Pt.CanceledError=Mr();Pt.CancelToken=gy();Pt.isCancel=zh();Pt.VERSION=Kh().version;Pt.toFormData=Hh;Pt.AxiosError=jn;Pt.Cancel=Pt.CanceledError;Pt.all=function(t){return Promise.all(t)};Pt.spread=py();Pt.isAxiosError=my();ga.exports=Pt;ga.exports.default=Pt;(function(s){s.exports=ga.exports})(Ih);const xy=dx(Ih.exports);window._=fx;window.axios=xy;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";
